{"ast":null,"code":"import { upperFirst, capitalize, last, pick, compose, mapValues, matchPercent, evolve, isNil, get, castArray, omit, asyncCompose } from '@react-pdf/fns';\nimport * as P from '@react-pdf/primitives';\nimport { TextInstance } from '@react-pdf/primitives';\nimport stylesheet, { transformColor, processTransform } from '@react-pdf/stylesheet';\nimport layoutEngine from '@react-pdf/textkit/lib/layout';\nimport linebreaker from '@react-pdf/textkit/lib/engines/linebreaker';\nimport justification from '@react-pdf/textkit/lib/engines/justification';\nimport scriptItemizer from '@react-pdf/textkit/lib/engines/scriptItemizer';\nimport wordHyphenation from '@react-pdf/textkit/lib/engines/wordHyphenation';\nimport decorationEngine from '@react-pdf/textkit/lib/engines/textDecoration';\nimport fromFragments from '@react-pdf/textkit/lib/attributedString/fromFragments';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport { PDFFont } from '@react-pdf/pdfkit';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _extends from '@babel/runtime/helpers/extends';\nimport emojiRegex from 'emoji-regex';\nimport resolveImage from '@react-pdf/image';\nimport flatten from '@react-pdf/stylesheet/lib/flatten';\nimport Yoga from '@react-pdf/yoga';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/objectWithoutPropertiesLoose';\nimport advanceWidth from '@react-pdf/textkit/lib/attributedString/advanceWidth';\n/**\n * Apply transformation to text string\n *\n * @param {String} text\n * @param {String} transformation type\n * @returns {String} transformed text\n */\n\nvar transformText = function transformText(text, transformation) {\n  switch (transformation) {\n    case 'uppercase':\n      return text.toUpperCase();\n\n    case 'lowercase':\n      return text.toLowerCase();\n\n    case 'capitalize':\n      return capitalize(text);\n\n    case 'upperfirst':\n      return upperFirst(text);\n\n    default:\n      return text;\n  }\n};\n\nvar StandardFont = /*#__PURE__*/function () {\n  function StandardFont(src) {\n    this.name = src;\n    this.src = PDFFont.open(null, src);\n  }\n\n  var _proto = StandardFont.prototype;\n\n  _proto.encode = function encode(str) {\n    return this.src.encode(str);\n  };\n\n  _proto.layout = function layout(str) {\n    var _this = this;\n\n    var _this$encode = this.encode(str),\n        encoded = _this$encode[0],\n        positions = _this$encode[1];\n\n    return {\n      positions: positions,\n      stringIndices: positions.map(function (_, i) {\n        return i;\n      }),\n      glyphs: encoded.map(function (g, i) {\n        var glyph = _this.getGlyph(parseInt(g, 16));\n\n        glyph.advanceWidth = positions[i].advanceWidth;\n        return glyph;\n      })\n    };\n  };\n\n  _proto.glyphForCodePoint = function glyphForCodePoint(codePoint) {\n    var glyph = this.getGlyph(codePoint);\n    glyph.advanceWidth = 400;\n    return glyph;\n  };\n\n  _proto.getGlyph = function getGlyph(id) {\n    return {\n      id: id,\n      _font: this.src,\n      codePoints: [id],\n      isLigature: false,\n      name: this.src.font.characterToGlyph(id)\n    };\n  };\n\n  _proto.hasGlyphForCodePoint = function hasGlyphForCodePoint(codePoint) {\n    return this.src.font.characterToGlyph(codePoint) !== '.notdef';\n  } // Based on empirical observation\n  ;\n\n  _createClass(StandardFont, [{\n    key: \"ascent\",\n    get: function get() {\n      return 900;\n    } // Based on empirical observation\n\n  }, {\n    key: \"capHeight\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return 650;\n\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return 550;\n\n        default:\n          return 690;\n      }\n    } // Based on empirical observation\n\n  }, {\n    key: \"xHeight\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return 440;\n\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return 390;\n\n        default:\n          return 490;\n      }\n    } // Based on empirical observation\n\n  }, {\n    key: \"descent\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return -220;\n\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return -230;\n\n        default:\n          return -200;\n      }\n    }\n  }, {\n    key: \"lineGap\",\n    get: function get() {\n      return 0;\n    }\n  }, {\n    key: \"unitsPerEm\",\n    get: function get() {\n      return 1000;\n    }\n  }]);\n\n  return StandardFont;\n}();\n\nvar fontCache = {};\nvar IGNORED_CODE_POINTS = [173];\n\nvar getFontSize = function getFontSize(node) {\n  return node.attributes.fontSize || 12;\n};\n\nvar getOrCreateFont = function getOrCreateFont(name) {\n  if (fontCache[name]) return fontCache[name];\n  var font = new StandardFont(name);\n  fontCache[name] = font;\n  return font;\n};\n\nvar getFallbackFont = function getFallbackFont() {\n  return getOrCreateFont('Helvetica');\n};\n\nvar shouldFallbackToFont = function shouldFallbackToFont(codePoint, font) {\n  return !font || !IGNORED_CODE_POINTS.includes(codePoint) && !font.hasGlyphForCodePoint(codePoint) && getFallbackFont().hasGlyphForCodePoint(codePoint);\n};\n\nvar fontSubstitution = function fontSubstitution() {\n  return function (_ref) {\n    var string = _ref.string,\n        runs = _ref.runs;\n    var lastFont = null;\n    var lastFontSize = null;\n    var lastIndex = 0;\n    var index = 0;\n    var res = [];\n\n    for (var i = 0; i < runs.length; i += 1) {\n      var run = runs[i];\n      var defaultFont = typeof run.attributes.font === 'string' ? getOrCreateFont(run.attributes.font) : run.attributes.font;\n\n      if (string.length === 0) {\n        res.push({\n          start: 0,\n          end: 0,\n          attributes: {\n            font: defaultFont\n          }\n        });\n        break;\n      }\n\n      var chars = string.slice(run.start, run.end);\n\n      for (var j = 0; j < chars.length; j += 1) {\n        var char = chars[j];\n        var codePoint = char.codePointAt();\n        var shouldFallback = shouldFallbackToFont(codePoint, defaultFont); // If the default font does not have a glyph and the fallback font does, we use it\n\n        var font = shouldFallback ? getFallbackFont() : defaultFont;\n        var fontSize = getFontSize(run); // If anything that would impact res has changed, update it\n\n        if (font !== lastFont || fontSize !== lastFontSize || font.unitsPerEm !== lastFont.unitsPerEm) {\n          if (lastFont) {\n            res.push({\n              start: lastIndex,\n              end: index,\n              attributes: {\n                font: lastFont,\n                scale: lastFontSize / lastFont.unitsPerEm\n              }\n            });\n          }\n\n          lastFont = font;\n          lastFontSize = fontSize;\n          lastIndex = index;\n        }\n\n        index += char.length;\n      }\n    }\n\n    if (lastIndex < string.length) {\n      var _fontSize = getFontSize(last(runs));\n\n      res.push({\n        start: lastIndex,\n        end: string.length,\n        attributes: {\n          font: lastFont,\n          scale: _fontSize / lastFont.unitsPerEm\n        }\n      });\n    }\n\n    return {\n      string: string,\n      runs: res\n    };\n  };\n};\n\nvar isTextInstance$4 = function isTextInstance(node) {\n  return node.type === P.TextInstance;\n};\n\nvar engines$1 = {\n  linebreaker: linebreaker,\n  justification: justification,\n  scriptItemizer: scriptItemizer,\n  wordHyphenation: wordHyphenation,\n  fontSubstitution: fontSubstitution,\n  textDecoration: decorationEngine\n};\nvar engine$1 = layoutEngine(engines$1);\n\nvar getFragments$1 = function getFragments(fontStore, instance) {\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$props = instance.props,\n      _instance$props$fill = _instance$props.fill,\n      fill = _instance$props$fill === void 0 ? 'black' : _instance$props$fill,\n      _instance$props$fontF = _instance$props.fontFamily,\n      fontFamily = _instance$props$fontF === void 0 ? 'Helvetica' : _instance$props$fontF,\n      fontWeight = _instance$props.fontWeight,\n      fontStyle = _instance$props.fontStyle,\n      _instance$props$fontS = _instance$props.fontSize,\n      fontSize = _instance$props$fontS === void 0 ? 18 : _instance$props$fontS,\n      textDecoration = _instance$props.textDecoration,\n      textDecorationColor = _instance$props.textDecorationColor,\n      textDecorationStyle = _instance$props.textDecorationStyle,\n      textTransform = _instance$props.textTransform,\n      opacity = _instance$props.opacity;\n  var obj = fontStore ? fontStore.getFont({\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  }) : null;\n  var font = obj ? obj.data : fontFamily;\n  var attributes = {\n    font: font,\n    opacity: opacity,\n    fontSize: fontSize,\n    color: fill,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    underlineColor: textDecorationColor || fill,\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeStyle: textDecorationStyle,\n    strikeColor: textDecorationColor || fill\n  };\n\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n\n    if (isTextInstance$4(child)) {\n      fragments.push({\n        string: transformText(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      fragments.push.apply(fragments, getFragments(child));\n    }\n  }\n\n  return fragments;\n};\n\nvar getAttributedString$1 = function getAttributedString(fontStore, instance) {\n  return fromFragments(getFragments$1(fontStore, instance));\n};\n\nvar AlmostInfinity = 999999999999;\nvar shrinkWhitespaceFactor = {\n  before: -0.5,\n  after: -0.5\n};\n\nvar layoutTspan = function layoutTspan(fontStore) {\n  return function (node) {\n    var _node$props, _node$props2;\n\n    var attributedString = getAttributedString$1(fontStore, node);\n    var x = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.x) || 0;\n    var y = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.y) || 0;\n    var container = {\n      x: x,\n      y: y,\n      width: AlmostInfinity,\n      height: AlmostInfinity\n    };\n    var hyphenationCallback = node.props.hyphenationCallback || (fontStore === null || fontStore === void 0 ? void 0 : fontStore.getHyphenationCallback()) || null;\n    var layoutOptions = {\n      hyphenationCallback: hyphenationCallback,\n      shrinkWhitespaceFactor: shrinkWhitespaceFactor\n    };\n    var lines = engine$1(attributedString, container, layoutOptions).flat();\n    return Object.assign({}, node, {\n      lines: lines\n    });\n  };\n};\n\nvar layoutText$1 = function layoutText(fontStore, node) {\n  if (!node.children) return node;\n  var children = node.children.map(layoutTspan(fontStore));\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar isDefs = function isDefs(node) {\n  return node.type === P.Defs;\n};\n\nvar getDefs = function getDefs(node) {\n  var children = node.children || [];\n  var defs = children.find(isDefs) || {};\n  var values = defs.children || [];\n  return values.reduce(function (acc, value) {\n    var _value$props;\n\n    var id = (_value$props = value.props) === null || _value$props === void 0 ? void 0 : _value$props.id;\n    if (id) acc[id] = value;\n    return acc;\n  }, {});\n};\n\nvar isNotDefs = function isNotDefs(node) {\n  return node.type !== P.Defs;\n};\n\nvar detachDefs = function detachDefs(node) {\n  if (!node.children) return node;\n  var children = node.children.filter(isNotDefs);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar URL_REGEX = /url\\(['\"]?#([^'\"]+)['\"]?\\)/;\n\nvar replaceDef = function replaceDef(defs, value) {\n  if (!value) return undefined;\n  if (!URL_REGEX.test(value)) return value;\n  var match = value.match(URL_REGEX);\n  return defs[match[1]];\n};\n\nvar parseNodeDefs = function parseNodeDefs(defs) {\n  return function (node) {\n    var _node$props, _node$props2;\n\n    var fill = replaceDef(defs, (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.fill);\n    var clipPath = replaceDef(defs, (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.clipPath);\n    var props = Object.assign({}, node.props, {\n      fill: fill,\n      clipPath: clipPath\n    });\n    var children = node.children ? node.children.map(parseNodeDefs(defs)) : undefined;\n    return Object.assign({}, node, {\n      props: props,\n      children: children\n    });\n  };\n};\n\nvar parseDefs = function parseDefs(root) {\n  if (!root.children) return root;\n  var defs = getDefs(root);\n  var children = root.children.map(parseNodeDefs(defs));\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar replaceDefs = function replaceDefs(node) {\n  return detachDefs(parseDefs(node));\n};\n\nvar parseViewbox = function parseViewbox(value) {\n  if (!value) return null;\n  var values = value.split(/[,\\s]+/).map(parseFloat);\n  if (values.length !== 4) return null;\n  return {\n    minX: values[0],\n    minY: values[1],\n    maxX: values[2],\n    maxY: values[3]\n  };\n};\n\nvar getContainer$1 = function getContainer(node) {\n  var viewbox = parseViewbox(node.props.viewBox);\n\n  if (viewbox) {\n    return {\n      width: viewbox.maxX,\n      height: viewbox.maxY\n    };\n  }\n\n  if (node.props.width && node.props.height) {\n    return {\n      width: parseFloat(node.props.width),\n      height: parseFloat(node.props.height)\n    };\n  }\n\n  return {\n    width: 0,\n    height: 0\n  };\n};\n\nvar SVG_INHERITED_PROPS = ['x', 'y', 'clipPath', 'clipRule', 'opacity', 'fill', 'fillOpacity', 'fillRule', 'stroke', 'strokeLinecap', 'strokeLinejoin', 'strokeOpacity', 'strokeWidth', 'textAnchor', 'dominantBaseline', 'color', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'opacity', 'textDecoration', 'lineHeight', 'textAlign', 'visibility', 'wordSpacing'];\n\nvar getInheritProps = function getInheritProps(node) {\n  var props = node.props || {};\n  return pick(SVG_INHERITED_PROPS, props);\n};\n\nvar inheritProps = function inheritProps(node) {\n  if (!node.children) return node;\n  var inheritedProps = getInheritProps(node);\n  var children = node.children.map(function (child) {\n    var props = Object.assign({}, inheritedProps, child.props || {});\n    var newChild = Object.assign({}, child, {\n      props: props\n    });\n    return inheritProps(newChild);\n  });\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar parseAspectRatio = function parseAspectRatio(value) {\n  var match = value.replace(/[\\s\\r\\t\\n]+/gm, ' ').replace(/^defer\\s/, '').split(' ');\n  var align = match[0] || 'xMidYMid';\n  var meetOrSlice = match[1] || 'meet';\n  return {\n    align: align,\n    meetOrSlice: meetOrSlice\n  };\n};\n\nvar STYLE_PROPS = ['width', 'height', 'color', 'stroke', 'strokeWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'fill', 'fillRule', 'clipPath', 'offset', 'transform', 'strokeLinejoin', 'strokeLinecap', 'strokeDasharray'];\nvar VERTICAL_PROPS = ['y', 'y1', 'y2', 'height', 'cy', 'ry'];\nvar HORIZONTAL_PROPS = ['x', 'x1', 'x2', 'width', 'cx', 'rx'];\n\nvar isType$3 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\n\nvar isSvg$3 = isType$3(P.Svg);\nvar isText$4 = isType$3(P.Text);\nvar isTextInstance$3 = isType$3(P.TextInstance);\n\nvar transformPercent = function transformPercent(container) {\n  return function (props) {\n    return mapValues(props, function (value, key) {\n      var match = matchPercent(value);\n\n      if (match && VERTICAL_PROPS.includes(key)) {\n        return match.percent * container.height;\n      }\n\n      if (match && HORIZONTAL_PROPS.includes(key)) {\n        return match.percent * container.width;\n      }\n\n      return value;\n    });\n  };\n};\n\nvar parsePercent = function parsePercent(value) {\n  var match = matchPercent(value);\n  return match ? match.percent : parseFloat(value);\n};\n\nvar parseProps = function parseProps(container) {\n  return function (node) {\n    var props = transformPercent(container)(node.props);\n    props = evolve({\n      x: parseFloat,\n      x1: parseFloat,\n      x2: parseFloat,\n      y: parseFloat,\n      y1: parseFloat,\n      y2: parseFloat,\n      r: parseFloat,\n      rx: parseFloat,\n      ry: parseFloat,\n      cx: parseFloat,\n      cy: parseFloat,\n      width: parseFloat,\n      height: parseFloat,\n      offset: parsePercent,\n      fill: transformColor,\n      opacity: parsePercent,\n      stroke: transformColor,\n      stopOpacity: parsePercent,\n      stopColor: transformColor,\n      transform: processTransform\n    }, props);\n    return Object.assign({}, node, {\n      props: props\n    });\n  };\n};\n\nvar mergeStyles$1 = function mergeStyles(node) {\n  var style = node.style || {};\n  var props = Object.assign({}, style, node.props);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\n\nvar removeNoneValues = function removeNoneValues(node) {\n  var removeNone = function removeNone(value) {\n    return value === 'none' ? null : value;\n  };\n\n  var props = mapValues(node.props, removeNone);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\n\nvar pickStyleProps = function pickStyleProps(node) {\n  var props = node.props || {};\n  var styleProps = pick(STYLE_PROPS, props);\n  var style = Object.assign({}, styleProps, node.style || {});\n  return Object.assign({}, node, {\n    style: style\n  });\n};\n\nvar parseSvgProps = function parseSvgProps(node) {\n  var props = evolve({\n    width: parseFloat,\n    height: parseFloat,\n    viewBox: parseViewbox,\n    preserveAspectRatio: parseAspectRatio\n  }, node.props);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\n\nvar wrapBetweenTspan = function wrapBetweenTspan(node) {\n  return {\n    type: P.Tspan,\n    props: {},\n    children: [node]\n  };\n};\n\nvar addMissingTspan = function addMissingTspan(node) {\n  if (!isText$4(node)) return node;\n  if (!node.children) return node;\n\n  var resolveChild = function resolveChild(child) {\n    return isTextInstance$3(child) ? wrapBetweenTspan(child) : child;\n  };\n\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar parseText = function parseText(fontStore) {\n  return function (node) {\n    if (isText$4(node)) return layoutText$1(fontStore, node);\n    if (!node.children) return node;\n    var children = node.children.map(parseText(fontStore));\n    return Object.assign({}, node, {\n      children: children\n    });\n  };\n};\n\nvar resolveSvgNode = function resolveSvgNode(container) {\n  return compose(parseProps(container), addMissingTspan, removeNoneValues, mergeStyles$1);\n};\n\nvar resolveChildren = function resolveChildren(container) {\n  return function (node) {\n    if (!node.children) return node;\n    var resolveChild = compose(resolveChildren(container), resolveSvgNode(container));\n    var children = node.children.map(resolveChild);\n    return Object.assign({}, node, {\n      children: children\n    });\n  };\n};\n\nvar resolveSvgRoot = function resolveSvgRoot(node, fontStore) {\n  var container = getContainer$1(node);\n  return compose(replaceDefs, parseText(fontStore), parseSvgProps, pickStyleProps, inheritProps, resolveChildren(container))(node);\n};\n/**\n * Pre-process SVG nodes so they can be rendered in the next steps\n *\n * @param {Object} root node\n * @param {Object} fontStore font store\n * @returns {Object} root node\n */\n\n\nvar resolveSvg = function resolveSvg(node, fontStore) {\n  if (!node.children) return node;\n\n  var resolveChild = function resolveChild(child) {\n    return resolveSvg(child, fontStore);\n  };\n\n  var root = isSvg$3(node) ? resolveSvgRoot(node, fontStore) : node;\n  var children = root.children.map(resolveChild);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar getZIndex = function getZIndex(node) {\n  return node.style.zIndex;\n};\n\nvar shouldSort = function shouldSort(node) {\n  return node.type !== P.Document && node.type !== P.Svg;\n};\n\nvar sortZIndex = function sortZIndex(a, b) {\n  var za = getZIndex(a);\n  var zb = getZIndex(b);\n  if (!za && !zb) return 0;\n  if (!za) return 1;\n  if (!zb) return -1;\n  return zb - za;\n};\n/**\n * Sort children by zIndex value\n *\n * @param {Object} node\n * @returns {Object} node\n */\n\n\nvar resolveZIndex = function resolveZIndex(node) {\n  if (!node.children) return node;\n  var sortedChildren = shouldSort(node) ? node.children.sort(sortZIndex) : node.children;\n  var children = sortedChildren.map(resolveZIndex);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar emojis = {};\nvar regex = emojiRegex();\n\nvar reflect = function reflect(promise) {\n  return function () {\n    return promise.apply(void 0, arguments).then(function (v) {\n      return v;\n    }, function (e) {\n      return e;\n    });\n  };\n}; // Returns a function to be able to mock resolveImage.\n\n\nvar makeFetchEmojiImage = function makeFetchEmojiImage() {\n  return reflect(resolveImage);\n};\n/**\n * When an emoji as no color, it might still have 2 parts,\n * the canonical emoji and an empty string.\n * ex.\n *   (no color) Array.from('❤️') => [\"❤\", \"️\"]\n *   (w/ color) Array.from('👍🏿') => [\"👍\", \"🏿\"]\n *\n * The empty string needs to be removed otherwise the generated\n * url will be incorect.\n */\n\n\nvar _removeNoColor = function _removeNoColor(x) {\n  return x !== '️';\n};\n\nvar getCodePoints = function getCodePoints(string) {\n  return Array.from(string).filter(_removeNoColor).map(function (char) {\n    return char.codePointAt(0).toString(16);\n  }).join('-');\n};\n\nvar buildEmojiUrl = function buildEmojiUrl(emoji, source) {\n  var url = source.url,\n      format = source.format;\n  return \"\" + url + getCodePoints(emoji) + \".\" + format;\n};\n\nvar fetchEmojis = function fetchEmojis(string, source) {\n  if (!source || !source.url) return [];\n  var promises = [];\n  var match;\n\n  var _loop = function _loop() {\n    var emoji = match[0];\n\n    if (!emojis[emoji] || emojis[emoji].loading) {\n      var emojiUrl = buildEmojiUrl(emoji, source);\n      emojis[emoji] = {\n        loading: true\n      };\n      var fetchEmojiImage = makeFetchEmojiImage();\n      promises.push(fetchEmojiImage({\n        uri: emojiUrl\n      }).then(function (image) {\n        emojis[emoji].loading = false;\n        emojis[emoji].data = image.data;\n      }));\n    }\n  };\n\n  while (match = regex.exec(string)) {\n    _loop();\n  }\n\n  return promises;\n};\n\nvar embedEmojis = function embedEmojis(fragments) {\n  var result = [];\n\n  for (var i = 0; i < fragments.length; i += 1) {\n    var fragment = fragments[i];\n    var match = void 0;\n    var lastIndex = 0;\n\n    while (match = regex.exec(fragment.string)) {\n      var _match = match,\n          index = _match.index;\n      var emoji = match[0];\n      var emojiSize = fragment.attributes.fontSize;\n      var chunk = fragment.string.slice(lastIndex, index + match[0].length); // If emoji image was found, we create a new fragment with the\n      // correct attachment and object substitution character;\n\n      if (emojis[emoji] && emojis[emoji].data) {\n        result.push({\n          string: chunk.replace(match, String.fromCharCode(0xfffc)),\n          attributes: _extends({}, fragment.attributes, {\n            attachment: {\n              width: emojiSize,\n              height: emojiSize,\n              yOffset: Math.floor(emojiSize * 0.1),\n              image: emojis[emoji].data\n            }\n          })\n        });\n      } else {\n        // If no emoji data, we just replace the emoji with a nodef char\n        result.push({\n          string: chunk.replace(match, String.fromCharCode(0)),\n          attributes: fragment.attributes\n        });\n      }\n\n      lastIndex = index + emoji.length;\n    }\n\n    if (lastIndex < fragment.string.length) {\n      result.push({\n        string: fragment.string.slice(lastIndex),\n        attributes: fragment.attributes\n      });\n    }\n  }\n\n  return result;\n};\n/**\n * Get image source\n *\n * @param {Object} image node\n * @returns {String | Object} image src\n */\n\n\nvar getSource = function getSource(node) {\n  var _node$props, _node$props2, _node$props3;\n\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.src) || ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.source) || ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.href);\n};\n/**\n * Resolves `src` to `@react-pdf/image` interface.\n *\n * Also it handles factories and async sources.\n *\n * @param {string | Object | Function} src\n * @returns {object} resolved src\n */\n\n\nvar resolveSource = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(src) {\n    var source;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(typeof src === 'function')) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 3;\n            return src();\n\n          case 3:\n            _context.t0 = _context.sent;\n            _context.next = 9;\n            break;\n\n          case 6:\n            _context.next = 8;\n            return src;\n\n          case 8:\n            _context.t0 = _context.sent;\n\n          case 9:\n            source = _context.t0;\n            return _context.abrupt(\"return\", typeof source === 'string' ? {\n              uri: source\n            } : source);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function resolveSource(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n/**\n * Fetches image and append data to node\n * Ideally this fn should be immutable.\n *\n * @param {Object} node\n */\n\n\nvar fetchImage = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(node) {\n    var src, cache, source;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            src = getSource(node);\n            cache = node.props.cache;\n\n            if (src) {\n              _context.next = 5;\n              break;\n            }\n\n            console.warn(false, 'Image should receive either a \"src\" or \"source\" prop');\n            return _context.abrupt(\"return\");\n\n          case 5:\n            _context.prev = 5;\n            _context.next = 8;\n            return resolveSource(src);\n\n          case 8:\n            source = _context.sent;\n\n            if (source) {\n              _context.next = 11;\n              break;\n            }\n\n            throw new Error(\"Image's \\\"src\\\" or \\\"source\\\" prop returned \" + source);\n\n          case 11:\n            _context.next = 13;\n            return resolveImage(source, {\n              cache: cache\n            });\n\n          case 13:\n            node.image = _context.sent;\n            node.image.key = source.data ? source.data.toString() : source.uri;\n            _context.next = 21;\n            break;\n\n          case 17:\n            _context.prev = 17;\n            _context.t0 = _context[\"catch\"](5);\n            node.image = {\n              width: 0,\n              height: 0,\n              key: null\n            };\n            console.warn(_context.t0.message);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5, 17]]);\n  }));\n\n  return function fetchImage(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar isImage$2 = function isImage(node) {\n  return node.type === P.Image;\n};\n/**\n * Get all asset promises that need to be resolved\n *\n * @param {Object} root node\n * @returns {Array} asset promises\n */\n\n\nvar fetchAssets = function fetchAssets(fontStore, node) {\n  var _node$children;\n\n  var promises = [];\n  var listToExplore = ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.slice(0)) || [];\n  var emojiSource = fontStore ? fontStore.getEmojiSource() : null;\n\n  while (listToExplore.length > 0) {\n    var _n$style;\n\n    var n = listToExplore.shift();\n\n    if (isImage$2(n)) {\n      promises.push(fetchImage(n));\n    }\n\n    if (fontStore && (_n$style = n.style) !== null && _n$style !== void 0 && _n$style.fontFamily) {\n      promises.push(fontStore.load(n.style));\n    }\n\n    if (typeof n === 'string') {\n      promises.push.apply(promises, fetchEmojis(n, emojiSource));\n    }\n\n    if (typeof n.value === 'string') {\n      promises.push.apply(promises, fetchEmojis(n.value, emojiSource));\n    }\n\n    if (n.children) {\n      n.children.forEach(function (childNode) {\n        listToExplore.push(childNode);\n      });\n    }\n  }\n\n  return promises;\n};\n/**\n * Fetch image, font and emoji assets in parallel.\n * Layout process will not be resumed until promise resolves.\n *\n * @param {Object} root node\n * @param {Object} fontStore font store\n * @returns {Object} root node\n */\n\n\nvar resolveAssets = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(node, fontStore) {\n    var promises;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            promises = fetchAssets(fontStore, node);\n            _context.next = 3;\n            return Promise.all(promises);\n\n          case 3:\n            return _context.abrupt(\"return\", node);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function resolveAssets(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar isLink$1 = function isLink(node) {\n  return node.type === P.Link;\n};\n\nvar DEFAULT_LINK_STYLES = {\n  color: 'blue',\n  textDecoration: 'underline'\n};\n/**\n * Computes styles using stylesheet\n *\n * @param {Object} container\n * @param {Object} document node\n * @returns {Object} computed styles\n */\n\nvar computeStyle = function computeStyle(container, node) {\n  var baseStyle = node.style;\n\n  if (isLink$1(node)) {\n    baseStyle = Array.isArray(node.style) ? [DEFAULT_LINK_STYLES].concat(node.style) : [DEFAULT_LINK_STYLES, node.style];\n  }\n\n  return stylesheet(container, baseStyle);\n};\n/**\n * Resolves node styles\n *\n * @param {Object} container\n * @param {Object} document node\n * @returns {Object} node (and subnodes) with resolved styles\n */\n\n\nvar resolveNodeStyles = function resolveNodeStyles(container) {\n  return function (node) {\n    var style = computeStyle(container, node);\n    if (!node.children) return Object.assign({}, node, {\n      style: style\n    });\n    var children = node.children.map(resolveNodeStyles(container));\n    return Object.assign({}, node, {\n      style: style,\n      children: children\n    });\n  };\n};\n/**\n * Resolves page styles\n *\n * @param {Object} document page\n * @returns {Object} document page with resolved styles\n */\n\n\nvar resolvePageStyles = function resolvePageStyles(page) {\n  var _page$props;\n\n  var dpi = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.dpi) || 72;\n  var box = page.box || page.style;\n\n  var container = _extends({}, box, {\n    dpi: dpi\n  });\n\n  return resolveNodeStyles(container)(page);\n};\n/**\n * Resolves document styles\n *\n * @param {Object} document root\n * @returns {Object} document root with resolved styles\n */\n\n\nvar resolveStyles = function resolveStyles(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePageStyles);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar getTransformStyle = function getTransformStyle(s) {\n  return function (node) {\n    var _node$style, _node$style2;\n\n    return isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style[s]) ? '50%' : (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2[s];\n  };\n};\n/**\n * Get node origin\n *\n * @param {Object} node\n * @returns {Object} node origin\n */\n\n\nvar getOrigin = function getOrigin(node) {\n  if (!node.box) return {};\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top,\n      width = _node$box.width,\n      height = _node$box.height;\n  var transformOriginX = getTransformStyle('transformOriginX')(node);\n  var transformOriginY = getTransformStyle('transformOriginY')(node);\n  var percentX = matchPercent(transformOriginX);\n  var percentY = matchPercent(transformOriginY);\n  var offsetX = percentX ? width * percentX.percent : transformOriginX;\n  var offsetY = percentY ? height * percentY.percent : transformOriginY;\n  return {\n    left: left + offsetX,\n    top: top + offsetY\n  };\n};\n/**\n * Resolve node origin\n *\n * @param {Object} node\n * @returns {Object} node with origin attribute\n */\n\n\nvar resolveNodeOrigin = function resolveNodeOrigin(node) {\n  var origin = getOrigin(node);\n  var newNode = Object.assign({}, node, {\n    origin: origin\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(resolveNodeOrigin);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n/**\n * Resolve document origins\n *\n * @param {Object} document root\n * @returns {Object} documrnt root\n */\n\n\nvar resolveOrigin = function resolveOrigin(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolveNodeOrigin);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n/* eslint-disable no-plusplus */\n\n/* eslint-disable prefer-const */\n\n/* eslint-disable prefer-destructuring */\n\n\nvar getBookmarkValue = function getBookmarkValue(title) {\n  return typeof title === 'string' ? {\n    title: title,\n    fit: false,\n    expanded: false\n  } : title;\n};\n\nvar resolveBookmarks = function resolveBookmarks(node) {\n  var refs = 0;\n  var children = (node.children || []).slice(0);\n  var listToExplore = children.map(function (value) {\n    return {\n      value: value,\n      parent: null\n    };\n  });\n\n  var _loop = function _loop() {\n    var _child$props;\n\n    var element = listToExplore.shift();\n    var child = element.value;\n    var parent = element.parent;\n\n    if ((_child$props = child.props) !== null && _child$props !== void 0 && _child$props.bookmark) {\n      var _parent;\n\n      var bookmark = getBookmarkValue(child.props.bookmark);\n      var ref = refs++;\n\n      var newHierarchy = _extends({\n        ref: ref,\n        parent: (_parent = parent) === null || _parent === void 0 ? void 0 : _parent.ref\n      }, bookmark);\n\n      child.props.bookmark = newHierarchy;\n      parent = newHierarchy;\n    }\n\n    if (child.children) {\n      child.children.forEach(function (childNode) {\n        listToExplore.push({\n          value: childNode,\n          parent: parent\n        });\n      });\n    }\n  };\n\n  while (listToExplore.length > 0) {\n    _loop();\n  }\n\n  return node;\n};\n\nvar VALID_ORIENTATIONS = ['portrait', 'landscape'];\n/**\n * Get page orientation. Defaults to portrait\n *\n * @param { Object } page object\n * @returns { String } page orientation\n */\n\nvar getOrientation = function getOrientation(page) {\n  var _page$props;\n\n  var value = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.orientation) || 'portrait';\n  return VALID_ORIENTATIONS.includes(value) ? value : 'portrait';\n};\n/**\n * Return true if page is landscape\n *\n * @param {Object} page instance\n * @returns {Boolean} is page landscape\n */\n\n\nvar isLandscape = function isLandscape(page) {\n  return getOrientation(page) === 'landscape';\n};\n\nvar PAGE_SIZES = {\n  '4A0': [4767.87, 6740.79],\n  '2A0': [3370.39, 4767.87],\n  A0: [2383.94, 3370.39],\n  A1: [1683.78, 2383.94],\n  A2: [1190.55, 1683.78],\n  A3: [841.89, 1190.55],\n  A4: [595.28, 841.89],\n  A5: [419.53, 595.28],\n  A6: [297.64, 419.53],\n  A7: [209.76, 297.64],\n  A8: [147.4, 209.76],\n  A9: [104.88, 147.4],\n  A10: [73.7, 104.88],\n  B0: [2834.65, 4008.19],\n  B1: [2004.09, 2834.65],\n  B2: [1417.32, 2004.09],\n  B3: [1000.63, 1417.32],\n  B4: [708.66, 1000.63],\n  B5: [498.9, 708.66],\n  B6: [354.33, 498.9],\n  B7: [249.45, 354.33],\n  B8: [175.75, 249.45],\n  B9: [124.72, 175.75],\n  B10: [87.87, 124.72],\n  C0: [2599.37, 3676.54],\n  C1: [1836.85, 2599.37],\n  C2: [1298.27, 1836.85],\n  C3: [918.43, 1298.27],\n  C4: [649.13, 918.43],\n  C5: [459.21, 649.13],\n  C6: [323.15, 459.21],\n  C7: [229.61, 323.15],\n  C8: [161.57, 229.61],\n  C9: [113.39, 161.57],\n  C10: [79.37, 113.39],\n  RA0: [2437.8, 3458.27],\n  RA1: [1729.13, 2437.8],\n  RA2: [1218.9, 1729.13],\n  RA3: [864.57, 1218.9],\n  RA4: [609.45, 864.57],\n  SRA0: [2551.18, 3628.35],\n  SRA1: [1814.17, 2551.18],\n  SRA2: [1275.59, 1814.17],\n  SRA3: [907.09, 1275.59],\n  SRA4: [637.8, 907.09],\n  EXECUTIVE: [521.86, 756.0],\n  FOLIO: [612.0, 936.0],\n  LEGAL: [612.0, 1008.0],\n  LETTER: [612.0, 792.0],\n  TABLOID: [792.0, 1224.0],\n  ID1: [153, 243]\n};\n/**\n * Transforms array into size object\n *\n * @param {Array} array\n * @returns {Object} size object with width and height\n */\n\nvar toSizeObject = function toSizeObject(v) {\n  return {\n    width: v[0],\n    height: v[1]\n  };\n};\n/**\n * Flip size object\n *\n * @param {Object} size object\n * @returns {Object} flipped size object\n */\n\n\nvar flipSizeObject = function flipSizeObject(v) {\n  return {\n    width: v.height,\n    height: v.width\n  };\n};\n/**\n * Adjust page size to passed DPI\n *\n * @param {Object} size object\n * @param {number} dpi\n * @returns {Object} adjusted size object\n */\n\n\nvar adjustDpi = function adjustDpi(v, dpi) {\n  return {\n    width: v.width ? v.width * dpi : v.width,\n    height: v.height ? v.height * dpi : v.height\n  };\n};\n/**\n * Returns size object from a given string\n *\n * @param {String} page size string\n * @returns {Object} size object with width and height\n */\n\n\nvar getStringSize = function getStringSize(v) {\n  return toSizeObject(PAGE_SIZES[v.toUpperCase()]);\n};\n/**\n * Returns size object from a single number\n *\n * @param {Number} page size number\n * @returns {Object} size object with width and height\n */\n\n\nvar getNumberSize = function getNumberSize(n) {\n  return toSizeObject([n]);\n};\n/**\n * Return page size in an object { width, height }\n *\n * @param {Object} page instance\n * @returns {Object} size object with width and height\n */\n\n\nvar getSize = function getSize(page) {\n  var _page$props, _page$props2;\n\n  var value = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.size) || 'A4';\n  var dpi = parseFloat(((_page$props2 = page.props) === null || _page$props2 === void 0 ? void 0 : _page$props2.dpi) || 72);\n  var type = typeof value;\n  var size = value;\n\n  if (type === 'string') {\n    size = getStringSize(value);\n  } else if (Array.isArray(value)) {\n    size = toSizeObject(value);\n  } else if (type === 'number') {\n    size = getNumberSize(value);\n  }\n\n  size = adjustDpi(size, dpi / 72);\n  return isLandscape(page) ? flipSizeObject(size) : size;\n};\n/**\n * Resolves page size\n *\n * @param {Object} page\n * @returns {Object} page with resolved size in style attribute\n */\n\n\nvar resolvePageSize = function resolvePageSize(page) {\n  var size = getSize(page);\n  var style = flatten(page.style || {});\n  return _extends({}, page, {\n    style: _extends({}, style, size)\n  });\n};\n/**\n * Resolves page sizes\n *\n * @param {Object} document root\n * @returns {Object} document root with resolved page sizes\n */\n\n\nvar resolvePageSizes = function resolvePageSizes(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePageSize);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar isFixed = function isFixed(node) {\n  var _node$props;\n\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.fixed) === true;\n};\n/**\n * Get line index at given height\n *\n * @param {Object} node\n * @param {Number} height\n */\n\n\nvar lineIndexAtHeight = function lineIndexAtHeight(node, height) {\n  var y = 0;\n  if (!node.lines) return 0;\n\n  for (var i = 0; i < node.lines.length; i += 1) {\n    var line = node.lines[i];\n    if (y + line.box.height > height) return i;\n    y += line.box.height;\n  }\n\n  return node.lines.length;\n};\n/**\n * Get height for given text line index\n *\n * @param {Object} node\n * @param {Number} index\n */\n\n\nvar heightAtLineIndex = function heightAtLineIndex(node, index) {\n  var counter = 0;\n  if (!node.lines) return counter;\n\n  for (var i = 0; i < index; i += 1) {\n    var line = node.lines[i];\n    if (!line) break;\n    counter += line.box.height;\n  }\n\n  return counter;\n};\n\nvar getLineBreak = function getLineBreak(node, height) {\n  var top = get(node, ['box', 'top'], 0);\n  var widows = get(node, ['props', 'widows'], 2);\n  var orphans = get(node, ['props', 'orphans'], 2);\n  var linesQuantity = node.lines.length;\n  var slicedLine = lineIndexAtHeight(node, height - top);\n\n  if (slicedLine === 0) {\n    return 0;\n  }\n\n  if (linesQuantity < orphans) {\n    return linesQuantity;\n  }\n\n  if (slicedLine < orphans || linesQuantity < orphans + widows) {\n    return 0;\n  }\n\n  if (linesQuantity === orphans + widows) {\n    return orphans;\n  }\n\n  if (linesQuantity - slicedLine < widows) {\n    return linesQuantity - widows;\n  }\n\n  return slicedLine;\n}; // Also receives contentArea in case it's needed\n\n\nvar splitText = function splitText(node, height) {\n  var slicedLineIndex = getLineBreak(node, height);\n  var currentHeight = heightAtLineIndex(node, slicedLineIndex);\n  var nextHeight = node.box.height - currentHeight;\n  var current = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      height: currentHeight,\n      borderBottomWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginBottom: 0,\n      paddingBottom: 0,\n      borderBottomWidth: 0,\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0\n    }),\n    lines: node.lines.slice(0, slicedLineIndex)\n  });\n  var next = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      top: 0,\n      height: nextHeight,\n      borderTopWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginTop: 0,\n      paddingTop: 0,\n      borderTopWidth: 0,\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0\n    }),\n    lines: node.lines.slice(slicedLineIndex)\n  });\n  return [current, next];\n};\n\nvar getTop$1 = function getTop(node) {\n  var _node$box;\n\n  return ((_node$box = node.box) === null || _node$box === void 0 ? void 0 : _node$box.top) || 0;\n};\n\nvar hasFixedHeight = function hasFixedHeight(node) {\n  var _node$style;\n\n  return !isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.height);\n};\n\nvar splitNode = function splitNode(node, height) {\n  if (!node) return [null, null];\n  var nodeTop = getTop$1(node);\n  var current = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      borderBottomWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginBottom: 0,\n      paddingBottom: 0,\n      borderBottomWidth: 0,\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0\n    })\n  });\n  current.style.height = height - nodeTop;\n  var nextHeight = hasFixedHeight(node) ? node.box.height - (height - nodeTop) : null;\n  var next = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      top: 0,\n      borderTopWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginTop: 0,\n      paddingTop: 0,\n      borderTopWidth: 0,\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0\n    })\n  });\n\n  if (nextHeight) {\n    next.style.height = nextHeight;\n  }\n\n  return [current, next];\n};\n\nvar NON_WRAP_TYPES = [P.Svg, P.Note, P.Image, P.Canvas];\n\nvar getWrap = function getWrap(node) {\n  var _node$props;\n\n  if (NON_WRAP_TYPES.includes(node.type)) return false;\n  return isNil((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.wrap) ? true : node.props.wrap;\n};\n\nvar getComputedPadding = function getComputedPadding(node, edge) {\n  var yogaNode = node._yogaNode;\n  return yogaNode ? yogaNode.getComputedPadding(edge) : null;\n};\n/**\n * Get Yoga computed paddings. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} paddings\n */\n\n\nvar getPadding = function getPadding(node) {\n  var style = node.style,\n      box = node.box;\n  var paddingTop = getComputedPadding(node, Yoga.EDGE_TOP) || (box === null || box === void 0 ? void 0 : box.paddingTop) || (style === null || style === void 0 ? void 0 : style.paddingTop) || (style === null || style === void 0 ? void 0 : style.paddingVertical) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingRight = getComputedPadding(node, Yoga.EDGE_RIGHT) || (box === null || box === void 0 ? void 0 : box.paddingRight) || (style === null || style === void 0 ? void 0 : style.paddingRight) || (style === null || style === void 0 ? void 0 : style.paddingHorizontal) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingBottom = getComputedPadding(node, Yoga.EDGE_BOTTOM) || (box === null || box === void 0 ? void 0 : box.paddingBottom) || (style === null || style === void 0 ? void 0 : style.paddingBottom) || (style === null || style === void 0 ? void 0 : style.paddingVertical) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingLeft = getComputedPadding(node, Yoga.EDGE_LEFT) || (box === null || box === void 0 ? void 0 : box.paddingLeft) || (style === null || style === void 0 ? void 0 : style.paddingLeft) || (style === null || style === void 0 ? void 0 : style.paddingHorizontal) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  return {\n    paddingTop: paddingTop,\n    paddingRight: paddingRight,\n    paddingBottom: paddingBottom,\n    paddingLeft: paddingLeft\n  };\n};\n\nvar getWrapArea = function getWrapArea(page) {\n  var _page$style;\n\n  var _getPadding = getPadding(page),\n      paddingBottom = _getPadding.paddingBottom;\n\n  var height = (_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.height;\n  return height - paddingBottom;\n};\n\nvar getContentArea = function getContentArea(page) {\n  var _page$style;\n\n  var height = (_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.height;\n\n  var _getPadding = getPadding(page),\n      paddingTop = _getPadding.paddingTop,\n      paddingBottom = _getPadding.paddingBottom;\n\n  return height - paddingBottom - paddingTop;\n};\n\nvar _excluded = [\"style\", \"children\"];\n\nvar isString = function isString(value) {\n  return typeof value === 'string';\n};\n\nvar isNumber = function isNumber(value) {\n  return typeof value === 'number';\n};\n/**\n * Transforms a react element instance to internal element format\n *\n * @param {Object} React element\n * @returns {Object} parsed react element\n */\n\n\nvar createInstance = function createInstance(element) {\n  if (!element) return null;\n  if (isString(element) || isNumber(element)) return {\n    type: TextInstance,\n    value: \"\" + element\n  };\n  if (!isString(element.type)) return createInstance(element.type(element.props));\n\n  var type = element.type,\n      _element$props = element.props,\n      _element$props$style = _element$props.style,\n      style = _element$props$style === void 0 ? {} : _element$props$style,\n      _element$props$childr = _element$props.children,\n      children = _element$props$childr === void 0 ? [] : _element$props$childr,\n      props = _objectWithoutPropertiesLoose(_element$props, _excluded);\n\n  var nextChildren = castArray(children).map(createInstance);\n  return {\n    type: type,\n    style: style,\n    props: props,\n    box: {},\n    children: nextChildren\n  };\n};\n/**\n * Get many nodes height\n *\n * @param {Array} nodes\n * @return {number} nodes height\n */\n\n\nvar getNodesHeight = function getNodesHeight(nodes) {\n  var max = 0;\n  var min = Infinity;\n  if (!nodes || nodes.length === 0) return 0;\n\n  for (var i = 0; i < nodes.length; i += 1) {\n    var node = nodes[i];\n    min = Math.min(min, node.box.top);\n    max = Math.max(max, node.box.top + node.box.height);\n  }\n\n  return max - min;\n};\n/* eslint-disable no-continue */\n\n\nvar getBreak = function getBreak(node) {\n  var _node$props;\n\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.break) || false;\n};\n\nvar getMinPresenceAhead = function getMinPresenceAhead(node) {\n  var _node$props2;\n\n  return (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.minPresenceAhead;\n};\n\nvar defaultPresenceAhead = function defaultPresenceAhead(element) {\n  return function (height) {\n    return Math.min(element.box.height, height);\n  };\n};\n\nvar getPresenceAhead = function getPresenceAhead(elements, height) {\n  var result = 0;\n\n  for (var i = 0; i < elements.length; i += 1) {\n    var element = elements[i];\n    if (!element.box) continue;\n    var isElementInside = height > element.box.top;\n    var presenceAhead = element.props.presenceAhead || defaultPresenceAhead(element);\n\n    if (element && isElementInside) {\n      result += presenceAhead(height - element.box.top);\n    }\n  }\n\n  return result;\n};\n\nvar shouldBreak = function shouldBreak(child, futureElements, height) {\n  var minPresenceAhead = getMinPresenceAhead(child);\n  var presenceAhead = getPresenceAhead(futureElements, height);\n  var futureHeight = getNodesHeight(futureElements);\n  var shouldSplit = height < child.box.top + child.box.height;\n  var shouldWrap = getWrap(child);\n  return getBreak(child) || !shouldWrap && shouldSplit || minPresenceAhead < futureHeight && presenceAhead < minPresenceAhead;\n};\n\nvar IGNORABLE_CODEPOINTS = [8232, // LINE_SEPARATOR\n8233 // PARAGRAPH_SEPARATOR\n];\n\nvar buildSubsetForFont = function buildSubsetForFont(font) {\n  return IGNORABLE_CODEPOINTS.reduce(function (acc, codePoint) {\n    if (font && font.hasGlyphForCodePoint && font.hasGlyphForCodePoint(codePoint)) {\n      return acc;\n    }\n\n    return [].concat(acc, [String.fromCharCode(codePoint)]);\n  }, []);\n};\n\nvar ignoreChars = function ignoreChars(fragments) {\n  return fragments.map(function (fragment) {\n    var charSubset = buildSubsetForFont(fragment.attributes.font);\n    var subsetRegex = new RegExp(charSubset.join('|'));\n    return {\n      string: fragment.string.replace(subsetRegex, ''),\n      attributes: fragment.attributes\n    };\n  });\n};\n\nvar PREPROCESSORS = [ignoreChars, embedEmojis];\n\nvar isImage$1 = function isImage(node) {\n  return node.type === P.Image;\n};\n\nvar isTextInstance$2 = function isTextInstance(node) {\n  return node.type === P.TextInstance;\n};\n/**\n * Get textkit fragments of given node object\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Array} text fragments\n */\n\n\nvar getFragments = function getFragments(fontStore, instance, parentLink, level) {\n  var _instance$props, _instance$props2;\n\n  if (level === void 0) {\n    level = 0;\n  }\n\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$style = instance.style,\n      _instance$style$color = _instance$style.color,\n      color = _instance$style$color === void 0 ? 'black' : _instance$style$color,\n      _instance$style$fontF = _instance$style.fontFamily,\n      fontFamily = _instance$style$fontF === void 0 ? 'Helvetica' : _instance$style$fontF,\n      fontWeight = _instance$style.fontWeight,\n      fontStyle = _instance$style.fontStyle,\n      _instance$style$fontS = _instance$style.fontSize,\n      fontSize = _instance$style$fontS === void 0 ? 18 : _instance$style$fontS,\n      _instance$style$textA = _instance$style.textAlign,\n      textAlign = _instance$style$textA === void 0 ? 'left' : _instance$style$textA,\n      lineHeight = _instance$style.lineHeight,\n      textDecoration = _instance$style.textDecoration,\n      textDecorationColor = _instance$style.textDecorationColor,\n      textDecorationStyle = _instance$style.textDecorationStyle,\n      textTransform = _instance$style.textTransform,\n      letterSpacing = _instance$style.letterSpacing,\n      textIndent = _instance$style.textIndent,\n      opacity = _instance$style.opacity;\n  var opts = {\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  };\n  var obj = fontStore ? fontStore.getFont(opts) : null;\n  var font = obj ? obj.data : fontFamily; // Don't pass main background color to textkit. Will be rendered by the render package instead\n\n  var backgroundColor = level === 0 ? null : instance.style.backgroundColor;\n  var attributes = {\n    font: font,\n    color: color,\n    opacity: opacity,\n    fontSize: fontSize,\n    backgroundColor: backgroundColor,\n    align: textAlign,\n    indent: textIndent,\n    characterSpacing: letterSpacing,\n    strikeStyle: textDecorationStyle,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeColor: textDecorationColor || color,\n    underlineColor: textDecorationColor || color,\n    link: parentLink || ((_instance$props = instance.props) === null || _instance$props === void 0 ? void 0 : _instance$props.src) || ((_instance$props2 = instance.props) === null || _instance$props2 === void 0 ? void 0 : _instance$props2.href),\n    lineHeight: lineHeight ? lineHeight * fontSize : null\n  };\n\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n\n    if (isImage$1(child)) {\n      fragments.push({\n        string: String.fromCharCode(0xfffc),\n        attributes: _extends({}, attributes, {\n          attachment: {\n            width: child.style.width || fontSize,\n            height: child.style.height || fontSize,\n            image: child.image.data\n          }\n        })\n      });\n    } else if (isTextInstance$2(child)) {\n      fragments.push({\n        string: transformText(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      var _fragments;\n\n      (_fragments = fragments).push.apply(_fragments, getFragments(fontStore, child, attributes.link, level + 1));\n    }\n  }\n\n  for (var _i = 0; _i < PREPROCESSORS.length; _i += 1) {\n    var preprocessor = PREPROCESSORS[_i];\n    fragments = preprocessor(fragments);\n  }\n\n  return fragments;\n};\n/**\n * Get textkit attributed string from text node\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Object} attributed string\n */\n\n\nvar getAttributedString = function getAttributedString(fontStore, instance) {\n  var fragments = getFragments(fontStore, instance);\n  return fromFragments(fragments);\n};\n\nvar engines = {\n  linebreaker: linebreaker,\n  justification: justification,\n  textDecoration: decorationEngine,\n  scriptItemizer: scriptItemizer,\n  wordHyphenation: wordHyphenation,\n  fontSubstitution: fontSubstitution\n};\nvar engine = layoutEngine(engines);\n\nvar getMaxLines = function getMaxLines(node) {\n  var _node$style;\n\n  return (_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.maxLines;\n};\n\nvar getTextOverflow = function getTextOverflow(node) {\n  var _node$style2;\n\n  return (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.textOverflow;\n};\n/**\n * Get layout container for specific text node\n *\n * @param {Number} width\n * @param {Number} height\n * @param {Object} node\n * @returns {Object} layout container\n */\n\n\nvar getContainer = function getContainer(width, height, node) {\n  var maxLines = getMaxLines(node);\n  var textOverflow = getTextOverflow(node);\n  return {\n    x: 0,\n    y: 0,\n    width: width,\n    maxLines: maxLines,\n    height: height || Infinity,\n    truncateMode: textOverflow\n  };\n};\n/**\n * Get text layout options for specific text node\n *\n * @param {Object} node instance\n * @returns {Object} layout options\n */\n\n\nvar getLayoutOptions = function getLayoutOptions(fontStore, node) {\n  return {\n    hyphenationPenalty: node.props.hyphenationPenalty,\n    shrinkWhitespaceFactor: {\n      before: -0.5,\n      after: -0.5\n    },\n    hyphenationCallback: node.props.hyphenationCallback || (fontStore === null || fontStore === void 0 ? void 0 : fontStore.getHyphenationCallback()) || null\n  };\n};\n/**\n * Get text lines for given node\n *\n * @param {Object} node\n * @param {Number} container width\n * @param {Number} container height\n * @param {Number} fontStore font store\n * @returns {Array} layout lines\n */\n\n\nvar layoutText = function layoutText(node, width, height, fontStore) {\n  var attributedString = getAttributedString(fontStore, node);\n  var container = getContainer(width, height, node);\n  var options = getLayoutOptions(fontStore, node);\n  var lines = engine(attributedString, container, options);\n  return lines.reduce(function (acc, line) {\n    return [].concat(acc, line);\n  }, []);\n};\n\nvar isType$2 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\n\nvar isSvg$2 = isType$2(P.Svg);\nvar isText$3 = isType$2(P.Text);\n\nvar shouldIterate = function shouldIterate(node) {\n  return !isSvg$2(node) && !isText$3(node);\n};\n\nvar shouldLayoutText = function shouldLayoutText(node) {\n  return isText$3(node) && !node.lines;\n};\n/**\n * Performs text layout on text node if wasn't calculated before.\n * Text layout is usually performed on Yoga's layout process (via setMeasureFunc),\n * but we need to layout those nodes with fixed width and height.\n *\n * @param {Object} node\n * @returns {Object} layout node\n */\n\n\nvar resolveTextLayout = function resolveTextLayout(node, fontStore) {\n  if (shouldLayoutText(node)) {\n    var width = node.box.width - (node.box.paddingRight + node.box.paddingLeft);\n    var height = node.box.height - (node.box.paddingTop + node.box.paddingBottom); // eslint-disable-next-line no-param-reassign\n\n    node.lines = layoutText(node, width, height, fontStore);\n  }\n\n  if (shouldIterate(node)) {\n    if (!node.children) return node;\n\n    var mapChild = function mapChild(child) {\n      return resolveTextLayout(child, fontStore);\n    };\n\n    var children = node.children.map(mapChild);\n    return Object.assign({}, node, {\n      children: children\n    });\n  }\n\n  return node;\n};\n\nvar INHERITED_PROPERTIES = ['color', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'opacity', 'textDecoration', 'textTransform', 'lineHeight', 'textAlign', 'visibility', 'wordSpacing'];\n\nvar isSvg$1 = function isSvg(node) {\n  return node.type === P.Svg;\n}; // Merge style values\n\n\nvar mergeValues = function mergeValues(styleName, value, inheritedValue) {\n  switch (styleName) {\n    case 'textDecoration':\n      {\n        // merge not none and not false textDecoration values to one rule\n        return [inheritedValue, value].filter(function (v) {\n          return v && v !== 'none';\n        }).join(' ');\n      }\n\n    default:\n      return value;\n  }\n}; // Merge inherited and node styles\n\n\nvar merge = function merge(inheritedStyles, style) {\n  var mergedStyles = _extends({}, inheritedStyles);\n\n  Object.entries(style).forEach(function (_ref) {\n    var styleName = _ref[0],\n        value = _ref[1];\n    mergedStyles[styleName] = mergeValues(styleName, value, inheritedStyles[styleName]);\n  });\n  return mergedStyles;\n};\n/**\n * Merges styles with node\n *\n * @param {Object} style object\n * @param {Object} node\n * @returns {Object} node with styles merged\n */\n\n\nvar mergeStyles = function mergeStyles(inheritedStyles) {\n  return function (node) {\n    var style = merge(inheritedStyles, node.style || {});\n    return Object.assign({}, node, {\n      style: style\n    });\n  };\n};\n/**\n * Inherit style values from the root to the leafs\n *\n * @param {Object} document root\n * @returns {Object} document root with inheritance\n *\n */\n\n\nvar resolveInheritance = function resolveInheritance(node) {\n  if (isSvg$1(node)) return node;\n  if (!node.children) return node;\n  var inheritStyles = pick(INHERITED_PROPERTIES, node.style || {});\n  var resolveChild = compose(resolveInheritance, mergeStyles(inheritStyles));\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar getComputedMargin = function getComputedMargin(node, edge) {\n  var yogaNode = node._yogaNode;\n  return yogaNode ? yogaNode.getComputedMargin(edge) : null;\n};\n/**\n * Get Yoga computed magins. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} margins\n */\n\n\nvar getMargin = function getMargin(node) {\n  var style = node.style,\n      box = node.box;\n  var marginTop = getComputedMargin(node, Yoga.EDGE_TOP) || (box === null || box === void 0 ? void 0 : box.marginTop) || (style === null || style === void 0 ? void 0 : style.marginTop) || (style === null || style === void 0 ? void 0 : style.marginVertical) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginRight = getComputedMargin(node, Yoga.EDGE_RIGHT) || (box === null || box === void 0 ? void 0 : box.marginRight) || (style === null || style === void 0 ? void 0 : style.marginRight) || (style === null || style === void 0 ? void 0 : style.marginHorizontal) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginBottom = getComputedMargin(node, Yoga.EDGE_BOTTOM) || (box === null || box === void 0 ? void 0 : box.marginBottom) || (style === null || style === void 0 ? void 0 : style.marginBottom) || (style === null || style === void 0 ? void 0 : style.marginVertical) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginLeft = getComputedMargin(node, Yoga.EDGE_LEFT) || (box === null || box === void 0 ? void 0 : box.marginLeft) || (style === null || style === void 0 ? void 0 : style.marginLeft) || (style === null || style === void 0 ? void 0 : style.marginHorizontal) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  return {\n    marginTop: marginTop,\n    marginRight: marginRight,\n    marginBottom: marginBottom,\n    marginLeft: marginLeft\n  };\n};\n/**\n * Get Yoga computed position. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} position\n */\n\n\nvar getPosition = function getPosition(node) {\n  var yogaNode = node._yogaNode;\n  return {\n    top: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedTop()) || 0,\n    right: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedRight()) || 0,\n    bottom: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedBottom()) || 0,\n    left: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedLeft()) || 0\n  };\n};\n\nvar DEFAULT_DIMENSION = {\n  width: 0,\n  height: 0\n};\n/**\n * Get Yoga computed dimensions. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} dimensions\n */\n\nvar getDimension = function getDimension(node) {\n  var yogaNode = node._yogaNode;\n  if (!yogaNode) return DEFAULT_DIMENSION;\n  return {\n    width: yogaNode.getComputedWidth(),\n    height: yogaNode.getComputedHeight()\n  };\n};\n\nvar getComputedBorder = function getComputedBorder(yogaNode, edge) {\n  return yogaNode ? yogaNode.getComputedBorder(edge) : 0;\n};\n/**\n * Get Yoga computed border width. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} border widths\n */\n\n\nvar getBorderWidth = function getBorderWidth(node) {\n  var yogaNode = node._yogaNode;\n  return {\n    borderTopWidth: getComputedBorder(yogaNode, Yoga.EDGE_TOP),\n    borderRightWidth: getComputedBorder(yogaNode, Yoga.EDGE_RIGHT),\n    borderBottomWidth: getComputedBorder(yogaNode, Yoga.EDGE_BOTTOM),\n    borderLeftWidth: getComputedBorder(yogaNode, Yoga.EDGE_LEFT)\n  };\n};\n/**\n * Set display attribute to node's Yoga instance\n *\n * @param {String} display\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\n\nvar setDisplay = function setDisplay(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (yogaNode) {\n      yogaNode.setDisplay(value === 'none' ? Yoga.DISPLAY_NONE : Yoga.DISPLAY_FLEX);\n    }\n\n    return node;\n  };\n};\n\nvar OVERFLOW = {\n  hidden: Yoga.OVERFLOW_HIDDEN,\n  scroll: Yoga.OVERFLOW_SCROLL\n};\n/**\n * Set overflow attribute to node's Yoga instance\n *\n * @param {String} overflow value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setOverflow = function setOverflow(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (!isNil(value) && yogaNode) {\n      var overflow = OVERFLOW[value] || Yoga.OVERFLOW_VISIBLE;\n      yogaNode.setOverflow(overflow);\n    }\n\n    return node;\n  };\n};\n\nvar FLEX_WRAP = {\n  wrap: Yoga.WRAP_WRAP,\n  'wrap-reverse': Yoga.WRAP_WRAP_REVERSE\n};\n/**\n * Set flex wrap attribute to node's Yoga instance\n *\n * @param {String} flex wrap value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setFlexWrap = function setFlexWrap(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (yogaNode) {\n      var flexWrap = FLEX_WRAP[value] || Yoga.WRAP_NO_WRAP;\n      yogaNode.setFlexWrap(flexWrap);\n    }\n\n    return node;\n  };\n};\n/* eslint-disable no-unused-expressions */\n\n/**\n * Set generic yoga attribute to node's Yoga instance, handing `auto`, edges and percentage cases\n *\n * @param {String} property\n * @param {Number} edge\n * @param {any} value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\n\nvar setYogaValue = function setYogaValue(attr, edge) {\n  return function (value) {\n    return function (node) {\n      var yogaNode = node._yogaNode;\n\n      if (!isNil(value) && yogaNode) {\n        var hasEdge = !isNil(edge);\n        var fixedMethod = \"set\" + upperFirst(attr);\n        var autoMethod = fixedMethod + \"Auto\";\n        var percentMethod = fixedMethod + \"Percent\";\n        var percent = matchPercent(value);\n\n        if (percent && !yogaNode[percentMethod]) {\n          throw new Error(\"You can't pass percentage values to \" + attr + \" property\");\n        }\n\n        if (percent) {\n          if (hasEdge) {\n            var _yogaNode$percentMeth;\n\n            (_yogaNode$percentMeth = yogaNode[percentMethod]) === null || _yogaNode$percentMeth === void 0 ? void 0 : _yogaNode$percentMeth.call(yogaNode, edge, percent.value);\n          } else {\n            var _yogaNode$percentMeth2;\n\n            (_yogaNode$percentMeth2 = yogaNode[percentMethod]) === null || _yogaNode$percentMeth2 === void 0 ? void 0 : _yogaNode$percentMeth2.call(yogaNode, percent.value);\n          }\n        } else if (value === 'auto') {\n          if (hasEdge) {\n            var _yogaNode$autoMethod;\n\n            (_yogaNode$autoMethod = yogaNode[autoMethod]) === null || _yogaNode$autoMethod === void 0 ? void 0 : _yogaNode$autoMethod.call(yogaNode, edge);\n          } else if (attr === 'flexBasis') {\n            // YogaNode.setFlexBasisAuto is missing (#766)\n            yogaNode.setFlexBasis(Yoga.UNIT_AUTO);\n          } else {\n            var _yogaNode$autoMethod2;\n\n            (_yogaNode$autoMethod2 = yogaNode[autoMethod]) === null || _yogaNode$autoMethod2 === void 0 ? void 0 : _yogaNode$autoMethod2.call(yogaNode);\n          }\n        } else if (hasEdge) {\n          var _yogaNode$fixedMethod;\n\n          (_yogaNode$fixedMethod = yogaNode[fixedMethod]) === null || _yogaNode$fixedMethod === void 0 ? void 0 : _yogaNode$fixedMethod.call(yogaNode, edge, value);\n        } else {\n          var _yogaNode$fixedMethod2;\n\n          (_yogaNode$fixedMethod2 = yogaNode[fixedMethod]) === null || _yogaNode$fixedMethod2 === void 0 ? void 0 : _yogaNode$fixedMethod2.call(yogaNode, value);\n        }\n      }\n\n      return node;\n    };\n  };\n};\n/**\n * Set flex grow attribute to node's Yoga instance\n *\n * @param {Number} flex grow value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\n\nvar setFlexGrow = function setFlexGrow(value) {\n  return function (node) {\n    return setYogaValue('flexGrow')(value || 0)(node);\n  };\n};\n/**\n * Set flex basis attribute to node's Yoga instance\n *\n * @param {Number} flex basis value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\n\nvar setFlexBasis = setYogaValue('flexBasis');\nvar ALIGN = {\n  'flex-start': Yoga.ALIGN_FLEX_START,\n  center: Yoga.ALIGN_CENTER,\n  'flex-end': Yoga.ALIGN_FLEX_END,\n  stretch: Yoga.ALIGN_STRETCH,\n  baseline: Yoga.ALIGN_BASELINE,\n  'space-between': Yoga.ALIGN_SPACE_BETWEEN,\n  'space-around': Yoga.ALIGN_SPACE_AROUND\n};\n/**\n * Set generic align attribute to node's Yoga instance\n *\n * @param {String} specific align property\n * @param {String} align value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setAlign = function setAlign(attr) {\n  return function (value) {\n    return function (node) {\n      var yogaNode = node._yogaNode;\n      var defaultValue = attr === 'items' ? Yoga.ALIGN_STRETCH : Yoga.ALIGN_AUTO;\n\n      if (yogaNode) {\n        var align = ALIGN[value] || defaultValue;\n        yogaNode[\"setAlign\" + upperFirst(attr)](align);\n      }\n\n      return node;\n    };\n  };\n};\n/**\n * Set align self attribute to node's Yoga instance\n *\n * @param {String} align value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\n\nvar setAlignSelf = setAlign('self');\n/**\n * Set align items attribute to node's Yoga instance\n *\n * @param {String} align value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setAlignItems = setAlign('items');\n/**\n * Set flex shrink attribute to node's Yoga instance\n *\n * @param {Number} flex shrink value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setFlexShrink = function setFlexShrink(value) {\n  return function (node) {\n    return setYogaValue('flexShrink')(value || 1)(node);\n  };\n};\n/**\n * Set aspect ratio attribute to node's Yoga instance\n *\n * @param {Number} ratio\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\n\nvar setAspectRatio = function setAspectRatio(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (!isNil(value) && yogaNode) {\n      yogaNode.setAspectRatio(value);\n    }\n\n    return node;\n  };\n};\n/**\n * Set align content attribute to node's Yoga instance\n *\n * @param {String} align value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\n\nvar setAlignContent = setAlign('content');\n/**\n * Set position type attribute to node's Yoga instance\n *\n * @param {String} position type\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionType = function setPositionType(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (!isNil(value) && yogaNode) {\n      yogaNode.setPositionType(value === 'absolute' ? Yoga.POSITION_TYPE_ABSOLUTE : Yoga.POSITION_TYPE_RELATIVE);\n    }\n\n    return node;\n  };\n};\n\nvar FLEX_DIRECTIONS = {\n  row: Yoga.FLEX_DIRECTION_ROW,\n  'row-reverse': Yoga.FLEX_DIRECTION_ROW_REVERSE,\n  'column-reverse': Yoga.FLEX_DIRECTION_COLUMN_REVERSE\n};\n/**\n * Set flex direction attribute to node's Yoga instance\n *\n * @param {String} flex direction value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setFlexDirection = function setFlexDirection(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (yogaNode) {\n      var flexDirection = FLEX_DIRECTIONS[value] || Yoga.FLEX_DIRECTION_COLUMN;\n      yogaNode.setFlexDirection(flexDirection);\n    }\n\n    return node;\n  };\n};\n\nvar JUSTIFY_CONTENT = {\n  center: Yoga.JUSTIFY_CENTER,\n  'flex-end': Yoga.JUSTIFY_FLEX_END,\n  'space-between': Yoga.JUSTIFY_SPACE_BETWEEN,\n  'space-around': Yoga.JUSTIFY_SPACE_AROUND,\n  'space-evenly': Yoga.JUSTIFY_SPACE_EVENLY\n};\n/**\n * Set justify content attribute to node's Yoga instance\n *\n * @param {String} justify content value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setJustifyContent = function setJustifyContent(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (!isNil(value) && yogaNode) {\n      var justifyContent = JUSTIFY_CONTENT[value] || Yoga.JUSTIFY_FLEX_START;\n      yogaNode.setJustifyContent(justifyContent);\n    }\n\n    return node;\n  };\n};\n/**\n * Set margin top attribute to node's Yoga instance\n *\n * @param {Number} margin top\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\n\nvar setMarginTop = setYogaValue('margin', Yoga.EDGE_TOP);\n/**\n * Set margin right attribute to node's Yoga instance\n *\n * @param {Number} margin right\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMarginRight = setYogaValue('margin', Yoga.EDGE_RIGHT);\n/**\n * Set margin bottom attribute to node's Yoga instance\n *\n * @param {Number} margin bottom\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMarginBottom = setYogaValue('margin', Yoga.EDGE_BOTTOM);\n/**\n * Set margin left attribute to node's Yoga instance\n *\n * @param {Number} margin left\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMarginLeft = setYogaValue('margin', Yoga.EDGE_LEFT);\n/**\n * Set padding top attribute to node's Yoga instance\n *\n * @param {Number} padding top\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPaddingTop = setYogaValue('padding', Yoga.EDGE_TOP);\n/**\n * Set padding right attribute to node's Yoga instance\n *\n * @param {Number} padding right\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPaddingRight = setYogaValue('padding', Yoga.EDGE_RIGHT);\n/**\n * Set padding bottom attribute to node's Yoga instance\n *\n * @param {Number} padding bottom\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPaddingBottom = setYogaValue('padding', Yoga.EDGE_BOTTOM);\n/**\n * Set padding left attribute to node's Yoga instance\n *\n * @param {Number} padding left\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPaddingLeft = setYogaValue('padding', Yoga.EDGE_LEFT);\n/**\n * Set border top attribute to node's Yoga instance\n *\n * @param {Number} border top width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setBorderTop = setYogaValue('border', Yoga.EDGE_TOP);\n/**\n * Set border right attribute to node's Yoga instance\n *\n * @param {Number} border right width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setBorderRight = setYogaValue('border', Yoga.EDGE_RIGHT);\n/**\n * Set border bottom attribute to node's Yoga instance\n *\n * @param {Number} border bottom width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setBorderBottom = setYogaValue('border', Yoga.EDGE_BOTTOM);\n/**\n * Set border left attribute to node's Yoga instance\n *\n * @param {Number} border left width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setBorderLeft = setYogaValue('border', Yoga.EDGE_LEFT);\n/**\n * Set position top attribute to node's Yoga instance\n *\n * @param {Number} position top\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionTop = setYogaValue('position', Yoga.EDGE_TOP);\n/**\n * Set position right attribute to node's Yoga instance\n *\n * @param {Number} position right\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionRight = setYogaValue('position', Yoga.EDGE_RIGHT);\n/**\n * Set position bottom attribute to node's Yoga instance\n *\n * @param {Number} position bottom\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionBottom = setYogaValue('position', Yoga.EDGE_BOTTOM);\n/**\n * Set position left attribute to node's Yoga instance\n *\n * @param {Number} position left\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionLeft = setYogaValue('position', Yoga.EDGE_LEFT);\n/**\n * Set width to node's Yoga instance\n *\n * @param {Number} width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setWidth = setYogaValue('width');\n/**\n * Set min width to node's Yoga instance\n *\n * @param {Number} min width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMinWidth = setYogaValue('minWidth');\n/**\n * Set max width to node's Yoga instance\n *\n * @param {Number} max width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMaxWidth = setYogaValue('maxWidth');\n/**\n * Set height to node's Yoga instance\n *\n * @param {Number} height\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setHeight = setYogaValue('height');\n/**\n * Set min height to node's Yoga instance\n *\n * @param {Number} min height\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMinHeight = setYogaValue('minHeight');\n/**\n * Set max height to node's Yoga instance\n *\n * @param {Number} max height\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMaxHeight = setYogaValue('maxHeight');\n\nvar getAspectRatio = function getAspectRatio(viewbox) {\n  if (!viewbox) return null;\n  return (viewbox.maxX - viewbox.minX) / (viewbox.maxY - viewbox.minY);\n};\n/**\n * Yoga svg measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Number} width\n * @param {Number} widthMode\n * @param {Number} height\n * @param {Number} heightMode\n * @returns {Object} canvas width and height\n */\n\n\nvar measureCanvas$1 = function measureCanvas(page, node) {\n  return function (width, widthMode, height, heightMode) {\n    var aspectRatio = getAspectRatio(node.props.viewBox) || 1;\n\n    if (widthMode === Yoga.MEASURE_MODE_EXACTLY || widthMode === Yoga.MEASURE_MODE_AT_MOST) {\n      return {\n        width: width,\n        height: width / aspectRatio\n      };\n    }\n\n    if (heightMode === Yoga.MEASURE_MODE_EXACTLY) {\n      return {\n        width: height * aspectRatio\n      };\n    }\n\n    return {};\n  };\n};\n/**\n * Get lines width (if any)\n *\n * @param {Object} node\n * @returns {Number} lines width\n */\n\n\nvar linesWidth = function linesWidth(node) {\n  if (!node.lines) return 0;\n  return Math.max.apply(Math, [0].concat(node.lines.map(function (line) {\n    return advanceWidth(line);\n  })));\n};\n/**\n * Get lines height (if any)\n *\n * @param {Object} node\n * @returns {Number} lines height\n */\n\n\nvar linesHeight = function linesHeight(node) {\n  if (!node.lines) return -1;\n  return node.lines.reduce(function (acc, line) {\n    return acc + line.box.height;\n  }, 0);\n};\n/* eslint-disable no-param-reassign */\n\n\nvar ALIGNMENT_FACTORS = {\n  center: 0.5,\n  right: 1\n};\n/**\n * Yoga text measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Number} width\n * @param {Number} widthMode\n * @param {Number} height\n * @param {Number} heightMode\n * @returns {Object} text width and height\n */\n\nvar measureText = function measureText(page, node, fontStore) {\n  return function (width, widthMode, height) {\n    if (widthMode === Yoga.MEASURE_MODE_EXACTLY) {\n      if (!node.lines) node.lines = layoutText(node, width, height, fontStore);\n      return {\n        height: linesHeight(node)\n      };\n    }\n\n    if (widthMode === Yoga.MEASURE_MODE_AT_MOST) {\n      var _node$style;\n\n      var alignFactor = ALIGNMENT_FACTORS[(_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.textAlign] || 0;\n\n      if (!node.lines) {\n        node.lines = layoutText(node, width, height, fontStore);\n        node.alignOffset = (width - linesWidth(node)) * alignFactor; // Compensate align in variable width containers\n      }\n\n      return {\n        height: linesHeight(node),\n        width: Math.min(width, linesWidth(node))\n      };\n    }\n\n    return {};\n  };\n};\n/**\n * Get image ratio\n *\n * @param {Object} image node\n * @returns {Number} image ratio\n */\n\n\nvar getRatio = function getRatio(node) {\n  var _node$image;\n\n  return (_node$image = node.image) !== null && _node$image !== void 0 && _node$image.data ? node.image.width / node.image.height : 1;\n};\n/**\n * Checks if page has auto height\n *\n * @param {Object} page\n * @returns {Boolean} is page height auto\n */\n\n\nvar isHeightAuto = function isHeightAuto(page) {\n  var _page$box;\n\n  return isNil((_page$box = page.box) === null || _page$box === void 0 ? void 0 : _page$box.height);\n};\n\nvar SAFETY_HEIGHT$1 = 10;\n/**\n * Yoga image measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Number} width\n * @param {Number} widthMode\n * @param {Number} height\n * @param {Number} heightMode\n * @returns {Object} image width and height\n */\n\nvar measureImage = function measureImage(page, node) {\n  return function (width, widthMode, height, heightMode) {\n    var imageRatio = getRatio(node);\n    var imageMargin = getMargin(node);\n    var pagePadding = getPadding(page);\n    var pageArea = isHeightAuto(page) ? Infinity : page.box.height - pagePadding.paddingTop - pagePadding.paddingBottom - imageMargin.marginTop - imageMargin.marginBottom - SAFETY_HEIGHT$1; // Skip measure if image data not present yet\n\n    if (!node.image) return {\n      width: 0,\n      height: 0\n    };\n\n    if (widthMode === Yoga.MEASURE_MODE_EXACTLY && heightMode === Yoga.MEASURE_MODE_UNDEFINED) {\n      var scaledHeight = width / imageRatio;\n      return {\n        height: Math.min(pageArea, scaledHeight)\n      };\n    }\n\n    if (heightMode === Yoga.MEASURE_MODE_EXACTLY && (widthMode === Yoga.MEASURE_MODE_AT_MOST || widthMode === Yoga.MEASURE_MODE_UNDEFINED)) {\n      return {\n        width: Math.min(height * imageRatio, width)\n      };\n    }\n\n    if (widthMode === Yoga.MEASURE_MODE_EXACTLY && heightMode === Yoga.MEASURE_MODE_AT_MOST) {\n      var _scaledHeight = width / imageRatio;\n\n      return {\n        height: Math.min(height, pageArea, _scaledHeight)\n      };\n    }\n\n    if (widthMode === Yoga.MEASURE_MODE_AT_MOST && heightMode === Yoga.MEASURE_MODE_AT_MOST) {\n      if (imageRatio > 1) {\n        return {\n          width: width,\n          height: Math.min(width / imageRatio, height)\n        };\n      }\n\n      return {\n        height: height,\n        width: Math.min(height * imageRatio, width)\n      };\n    }\n\n    return {\n      height: height,\n      width: width\n    };\n  };\n};\n/* eslint-disable no-param-reassign */\n\n\nvar SAFETY_HEIGHT = 10;\n\nvar getMax = function getMax(values) {\n  return Math.max.apply(Math, [-Infinity].concat(values));\n};\n/**\n * Helper object to predict canvas size\n * TODO: Implement remaining functions (as close as possible);\n */\n\n\nvar measureCtx = function measureCtx() {\n  var ctx = {};\n  var points = [];\n\n  var nil = function nil() {\n    return ctx;\n  };\n\n  var addPoint = function addPoint(x, y) {\n    return points.push([x, y]);\n  };\n\n  var moveTo = function moveTo() {\n    addPoint.apply(void 0, arguments);\n    return ctx;\n  };\n\n  var rect = function rect(x, y, w, h) {\n    addPoint(x, y);\n    addPoint(x + w, y);\n    addPoint(x, y + h);\n    addPoint(x + w, y + h);\n    return ctx;\n  };\n\n  var ellipse = function ellipse(x, y, rx, ry) {\n    ry = ry || rx;\n    addPoint(x - rx, y - ry);\n    addPoint(x + rx, y - ry);\n    addPoint(x + rx, y + ry);\n    addPoint(x - rx, y + ry);\n    return ctx;\n  };\n\n  var polygon = function polygon() {\n    points.push.apply(points, arguments);\n    return ctx;\n  }; // Change dimensions\n\n\n  ctx.rect = rect;\n  ctx.moveTo = moveTo;\n  ctx.lineTo = moveTo;\n  ctx.circle = ellipse;\n  ctx.polygon = polygon;\n  ctx.ellipse = ellipse;\n  ctx.roundedRect = rect; // To be implemented\n\n  ctx.text = nil;\n  ctx.path = nil;\n  ctx.lineWidth = nil;\n  ctx.bezierCurveTo = nil;\n  ctx.quadraticCurveTo = nil;\n  ctx.scale = nil;\n  ctx.rotate = nil;\n  ctx.translate = nil; // These don't change dimensions\n\n  ctx.dash = nil;\n  ctx.clip = nil;\n  ctx.save = nil;\n  ctx.fill = nil;\n  ctx.font = nil;\n  ctx.stroke = nil;\n  ctx.lineCap = nil;\n  ctx.opacity = nil;\n  ctx.restore = nil;\n  ctx.lineJoin = nil;\n  ctx.fontSize = nil;\n  ctx.fillColor = nil;\n  ctx.miterLimit = nil;\n  ctx.strokeColor = nil;\n  ctx.fillOpacity = nil;\n  ctx.strokeOpacity = nil;\n  ctx.linearGradient = nil;\n  ctx.radialGradient = nil;\n\n  ctx.getWidth = function () {\n    return getMax(points.map(function (p) {\n      return p[0];\n    }));\n  };\n\n  ctx.getHeight = function () {\n    return getMax(points.map(function (p) {\n      return p[1];\n    }));\n  };\n\n  return ctx;\n};\n/**\n * Yoga canvas measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Number} width\n * @param {Number} widthMode\n * @param {Number} height\n * @param {Number} heightMode\n * @returns {Object} canvas width and height\n */\n\n\nvar measureCanvas = function measureCanvas(page, node) {\n  return function () {\n    var imageMargin = getMargin(node);\n    var pagePadding = getPadding(page);\n    var pageArea = isHeightAuto(page) ? Infinity : page.box.height - pagePadding.paddingTop - pagePadding.paddingBottom - imageMargin.marginTop - imageMargin.marginBottom - SAFETY_HEIGHT;\n    var ctx = measureCtx();\n    node.props.paint(ctx);\n    var width = ctx.getWidth();\n    var height = Math.min(pageArea, ctx.getHeight());\n    return {\n      height: height,\n      width: width\n    };\n  };\n};\n\nvar YOGA_NODE = '_yogaNode';\nvar YOGA_CONFIG = Yoga.Config.create();\nYOGA_CONFIG.setPointScaleFactor(0);\n\nvar isType$1 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\n\nvar isSvg = isType$1(P.Svg);\nvar isText$2 = isType$1(P.Text);\nvar isNote = isType$1(P.Note);\nvar isPage = isType$1(P.Page);\nvar isImage = isType$1(P.Image);\nvar isCanvas = isType$1(P.Canvas);\nvar isTextInstance$1 = isType$1(P.TextInstance);\n\nvar setNodeHeight = function setNodeHeight(node) {\n  var value = isPage(node) ? node.box.height : node.style.height;\n  return setHeight(value);\n};\n/**\n * Set styles valeus into yoga node before layout calculation\n *\n * @param {Object} node\n * @returns {Object} node\n */\n\n\nvar setYogaValues = function setYogaValues(node) {\n  compose(setNodeHeight(node), setWidth(node.style.width), setMinWidth(node.style.minWidth), setMaxWidth(node.style.maxWidth), setMinHeight(node.style.minHeight), setMaxHeight(node.style.maxHeight), setMarginTop(node.style.marginTop), setMarginRight(node.style.marginRight), setMarginBottom(node.style.marginBottom), setMarginLeft(node.style.marginLeft), setPaddingTop(node.style.paddingTop), setPaddingRight(node.style.paddingRight), setPaddingBottom(node.style.paddingBottom), setPaddingLeft(node.style.paddingLeft), setPositionType(node.style.position), setPositionTop(node.style.top), setPositionRight(node.style.right), setPositionBottom(node.style.bottom), setPositionLeft(node.style.left), setBorderTop(node.style.borderTopWidth), setBorderRight(node.style.borderRightWidth), setBorderBottom(node.style.borderBottomWidth), setBorderLeft(node.style.borderLeftWidth), setDisplay(node.style.display), setFlexDirection(node.style.flexDirection), setAlignSelf(node.style.alignSelf), setAlignContent(node.style.alignContent), setAlignItems(node.style.alignItems), setJustifyContent(node.style.justifyContent), setFlexWrap(node.style.flexWrap), setOverflow(node.style.overflow), setAspectRatio(node.style.aspectRatio), setFlexBasis(node.style.flexBasis), setFlexGrow(node.style.flexGrow), setFlexShrink(node.style.flexShrink))(node);\n};\n/**\n * Inserts child into parent' yoga node\n *\n * @param {Object} parent\n * @param {Object} node\n * @param {Object} node\n */\n\n\nvar insertYogaNodes = function insertYogaNodes(parent) {\n  return function (child) {\n    parent.insertChild(child[YOGA_NODE], parent.getChildCount());\n    return child;\n  };\n};\n\nvar setMeasureFunc = function setMeasureFunc(node, page, fontStore) {\n  var yogaNode = node[YOGA_NODE];\n\n  if (isText$2(node)) {\n    yogaNode.setMeasureFunc(measureText(page, node, fontStore));\n  }\n\n  if (isImage(node)) {\n    yogaNode.setMeasureFunc(measureImage(page, node));\n  }\n\n  if (isCanvas(node)) {\n    yogaNode.setMeasureFunc(measureCanvas(page, node));\n  }\n\n  if (isSvg(node)) {\n    yogaNode.setMeasureFunc(measureCanvas$1(page, node));\n  }\n\n  return node;\n};\n\nvar isLayoutElement = function isLayoutElement(node) {\n  return !isText$2(node) && !isNote(node) && !isSvg(node);\n};\n/**\n * Creates and add yoga node to document tree\n * Handles measure function for text and image nodes\n *\n * @param {Object} node\n * @returns {Object} node with appended yoga node\n */\n\n\nvar createYogaNodes = function createYogaNodes(page, fontStore) {\n  return function (node) {\n    var yogaNode = Yoga.Node.createWithConfig(YOGA_CONFIG);\n    var result = Object.assign({}, node);\n    result[YOGA_NODE] = yogaNode;\n    setYogaValues(result);\n\n    if (isLayoutElement(node) && node.children) {\n      var resolveChild = compose(insertYogaNodes(yogaNode), createYogaNodes(page, fontStore));\n      result.children = node.children.map(resolveChild);\n    }\n\n    setMeasureFunc(result, page, fontStore);\n    return result;\n  };\n};\n/**\n * Performs yoga calculation\n *\n * @param {Object} node\n * @returns {Object} node\n */\n\n\nvar calculateLayout = function calculateLayout(page) {\n  page[YOGA_NODE].calculateLayout();\n  return page;\n};\n/**\n * Saves Yoga layout result into 'box' attribute of node\n *\n * @param {Object} node\n * @returns {Object} node with box data\n */\n\n\nvar persistDimensions = function persistDimensions(node) {\n  if (isTextInstance$1(node)) return node;\n  var box = Object.assign(getPadding(node), getMargin(node), getBorderWidth(node), getPosition(node), getDimension(node));\n  var newNode = Object.assign({}, node, {\n    box: box\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(persistDimensions);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n/**\n * Removes yoga node from document tree\n *\n * @param {Object} node\n * @returns {Object} node without yoga node\n */\n\n\nvar destroyYogaNodes = function destroyYogaNodes(node) {\n  var newNode = Object.assign({}, node);\n  delete newNode[YOGA_NODE];\n  if (!node.children) return newNode;\n  var children = node.children.map(destroyYogaNodes);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n/**\n * Free yoga node from document tree\n *\n * @param {Object} node\n * @returns {Object} node without yoga node\n */\n\n\nvar freeYogaNodes = function freeYogaNodes(node) {\n  if (node[YOGA_NODE]) node[YOGA_NODE].freeRecursive();\n  return node;\n};\n/**\n * Calculates page object layout using Yoga.\n * Takes node values from 'box' and 'style' attributes, and persist them back into 'box'\n * Destroy yoga values at the end.\n *\n * @param {Object} page object\n * @returns {Object} page object with correct 'box' layout attributes\n */\n\n\nvar resolvePageDimensions = function resolvePageDimensions(page, fontStore) {\n  if (isNil(page)) return null;\n  return compose(destroyYogaNodes, freeYogaNodes, persistDimensions, calculateLayout, createYogaNodes(page, fontStore))(page);\n};\n/**\n * Calculates root object layout using Yoga.\n *\n * @param {Object} root object\n * @returns {Object} root object with correct 'box' layout attributes\n */\n\n\nvar resolveDimensions = function resolveDimensions(node, fontStore) {\n  if (!node.children) return node;\n\n  var resolveChild = function resolveChild(child) {\n    return resolvePageDimensions(child, fontStore);\n  };\n\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar isText$1 = function isText(node) {\n  return node.type === P.Text;\n}; // Prevent splitting elements by low decimal numbers\n\n\nvar SAFTY_THRESHOLD = 0.001;\n\nvar assingChildren = function assingChildren(children, node) {\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar getTop = function getTop(node) {\n  var _node$box;\n\n  return ((_node$box = node.box) === null || _node$box === void 0 ? void 0 : _node$box.top) || 0;\n};\n\nvar allFixed = function allFixed(nodes) {\n  return nodes.every(isFixed);\n};\n\nvar isDynamic = function isDynamic(node) {\n  var _node$props;\n\n  return !isNil((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.render);\n};\n\nvar relayoutPage = compose(resolveTextLayout, resolveInheritance, resolvePageDimensions);\n\nvar warnUnavailableSpace = function warnUnavailableSpace(node) {\n  console.warn(\"Node of type \" + node.type + \" can't wrap between pages and it's bigger than available page height\");\n};\n\nvar splitNodes = function splitNodes(height, contentArea, nodes) {\n  var currentChildren = [];\n  var nextChildren = [];\n\n  for (var i = 0; i < nodes.length; i += 1) {\n    var child = nodes[i];\n    var futureNodes = nodes.slice(i + 1);\n    var futureFixedNodes = futureNodes.filter(isFixed);\n    var nodeTop = getTop(child);\n    var nodeHeight = child.box.height;\n    var isOutside = height <= nodeTop;\n    var shouldBreak$1 = shouldBreak(child, futureNodes, height);\n    var shouldSplit = height + SAFTY_THRESHOLD < nodeTop + nodeHeight;\n    var canWrap = getWrap(child);\n    var fitsInsidePage = nodeHeight <= contentArea;\n\n    if (isFixed(child)) {\n      nextChildren.push(child);\n      currentChildren.push(child);\n      continue;\n    }\n\n    if (isOutside) {\n      var box = Object.assign({}, child.box, {\n        top: child.box.top - height\n      });\n      var next = Object.assign({}, child, {\n        box: box\n      });\n      nextChildren.push(next);\n      continue;\n    }\n\n    if (!fitsInsidePage && !canWrap) {\n      currentChildren.push(child);\n      nextChildren.push.apply(nextChildren, futureNodes);\n      warnUnavailableSpace(child);\n      break;\n    }\n\n    if (shouldBreak$1) {\n      var _box = Object.assign({}, child.box, {\n        top: child.box.top - height\n      });\n\n      var props = Object.assign({}, child.props, {\n        wrap: true,\n        break: false\n      });\n\n      var _next = Object.assign({}, child, {\n        box: _box,\n        props: props\n      });\n\n      currentChildren.push.apply(currentChildren, futureFixedNodes);\n      nextChildren.push.apply(nextChildren, [_next].concat(futureNodes));\n      break;\n    }\n\n    if (shouldSplit) {\n      var _split = split(child, height, contentArea),\n          currentChild = _split[0],\n          nextChild = _split[1];\n\n      if (currentChild) currentChildren.push(currentChild);\n      if (nextChild) nextChildren.push(nextChild);\n      continue;\n    }\n\n    currentChildren.push(child);\n  }\n\n  return [currentChildren, nextChildren];\n};\n\nvar splitChildren = function splitChildren(height, contentArea, node) {\n  var children = node.children || [];\n  var availableHeight = height - getTop(node);\n  return splitNodes(availableHeight, contentArea, children);\n};\n\nvar splitView = function splitView(node, height, contentArea) {\n  var _splitNode = splitNode(node, height),\n      currentNode = _splitNode[0],\n      nextNode = _splitNode[1];\n\n  var _splitChildren = splitChildren(height, contentArea, node),\n      currentChilds = _splitChildren[0],\n      nextChildren = _splitChildren[1];\n\n  return [assingChildren(currentChilds, currentNode), assingChildren(nextChildren, nextNode)];\n};\n\nvar split = function split(node, height, contentArea) {\n  return isText$1(node) ? splitText(node, height) : splitView(node, height, contentArea);\n};\n\nvar shouldResolveDynamicNodes = function shouldResolveDynamicNodes(node) {\n  var children = node.children || [];\n  return isDynamic(node) || children.some(shouldResolveDynamicNodes);\n};\n\nvar resolveDynamicNodes = function resolveDynamicNodes(props, node) {\n  var isNodeDynamic = isDynamic(node); // Call render prop on dynamic nodes and append result to children\n\n  var resolveChildren = function resolveChildren(children) {\n    if (children === void 0) {\n      children = [];\n    }\n\n    if (isNodeDynamic) {\n      var res = node.props.render(props);\n      return [createInstance(res)].filter(Boolean);\n    }\n\n    return children.map(function (c) {\n      return resolveDynamicNodes(props, c);\n    });\n  }; // We reset dynamic text box so it can be computed again later on\n\n\n  var resetHeight = isNodeDynamic && isText$1(node);\n  var box = resetHeight ? _extends({}, node.box, {\n    height: 0\n  }) : node.box;\n  var children = resolveChildren(node.children);\n  var lines = isNodeDynamic ? null : node.lines;\n  return Object.assign({}, node, {\n    box: box,\n    lines: lines,\n    children: children\n  });\n};\n\nvar resolveDynamicPage = function resolveDynamicPage(props, page, fontStore) {\n  if (shouldResolveDynamicNodes(page)) {\n    var resolvedPage = resolveDynamicNodes(props, page);\n    return relayoutPage(resolvedPage, fontStore);\n  }\n\n  return page;\n};\n\nvar splitPage = function splitPage(page, pageNumber, fontStore) {\n  var wrapArea = getWrapArea(page);\n  var contentArea = getContentArea(page);\n  var dynamicPage = resolveDynamicPage({\n    pageNumber: pageNumber\n  }, page, fontStore);\n  var height = page.style.height;\n\n  var _splitNodes = splitNodes(wrapArea, contentArea, dynamicPage.children),\n      currentChilds = _splitNodes[0],\n      nextChilds = _splitNodes[1];\n\n  var relayout = function relayout(node) {\n    return relayoutPage(node, fontStore);\n  };\n\n  var currentBox = _extends({}, page.box, {\n    height: height\n  });\n\n  var currentPage = relayout(Object.assign({}, page, {\n    box: currentBox,\n    children: currentChilds\n  }));\n  if (nextChilds.length === 0 || allFixed(nextChilds)) return [currentPage, null];\n  var nextBox = omit('height', page.box);\n  var nextProps = omit('bookmark', page.props);\n  var nextPage = relayout(Object.assign({}, page, {\n    props: nextProps,\n    box: nextBox,\n    children: nextChilds\n  }));\n  return [currentPage, nextPage];\n};\n\nvar resolvePageIndices = function resolvePageIndices(fontStore, page, pageNumber, pages) {\n  var totalPages = pages.length;\n  var props = {\n    totalPages: totalPages,\n    pageNumber: pageNumber + 1,\n    subPageNumber: page.subPageNumber + 1,\n    subPageTotalPages: page.subPageTotalPages\n  };\n  return resolveDynamicPage(props, page, fontStore);\n};\n\nvar assocSubPageData = function assocSubPageData(subpages) {\n  return subpages.map(function (page, i) {\n    return _extends({}, page, {\n      subPageNumber: i,\n      subPageTotalPages: subpages.length\n    });\n  });\n};\n\nvar dissocSubPageData = function dissocSubPageData(page) {\n  return omit(['subPageNumber', 'subPageTotalPages'], page);\n};\n\nvar paginate = function paginate(page, pageNumber, fontStore) {\n  if (!page) return [];\n  var splittedPage = splitPage(page, pageNumber, fontStore);\n  var pages = [splittedPage[0]];\n  var nextPage = splittedPage[1];\n\n  while (nextPage !== null) {\n    splittedPage = splitPage(nextPage, pageNumber + pages.length, fontStore);\n    pages.push(splittedPage[0]);\n    nextPage = splittedPage[1];\n  }\n\n  return pages;\n};\n/**\n * Performs pagination. This is the step responsible of breaking the whole document\n * into pages following pagiation rules, such as `fixed`, `break` and dynamic nodes.\n *\n * @param {Object} node\n * @param {Object} fontStore font store\n * @returns {Object} layout node\n */\n\n\nvar resolvePagination = function resolvePagination(doc, fontStore) {\n  var pages = [];\n  var pageNumber = 1;\n\n  for (var i = 0; i < doc.children.length; i += 1) {\n    var page = doc.children[i];\n    var subpages = paginate(page, pageNumber, fontStore);\n    subpages = assocSubPageData(subpages);\n    pageNumber += subpages.length;\n    pages = pages.concat(subpages);\n  }\n\n  pages = pages.map(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return dissocSubPageData(resolvePageIndices.apply(void 0, [fontStore].concat(args)));\n  });\n  return assingChildren(pages, doc);\n};\n/*\n * Translates page percentage horizontal paddings in fixed ones\n *\n * @param {Object} page container\n * @param {String} padding value\n * @returns {Object} translated padding value\n */\n\n\nvar resolvePageHorizontalPadding = function resolvePageHorizontalPadding(container) {\n  return function (value) {\n    var match = matchPercent(value);\n    return match ? match.percent * container.width : value;\n  };\n};\n/**\n * Translates page percentage vertical paddings in fixed ones\n *\n * @param {Object} page container\n * @param {String} padding value\n * @returns {Object} translated padding value\n */\n\n\nvar resolvePageVerticalPadding = function resolvePageVerticalPadding(container) {\n  return function (value) {\n    var match = matchPercent(value);\n    return match ? match.percent * container.height : value;\n  };\n};\n/**\n * Translates page percentage paddings in fixed ones\n *\n * @param {Object} page\n * @returns {Object} page with fixed paddings\n */\n\n\nvar resolvePagePaddings = function resolvePagePaddings(page) {\n  var container = page.style;\n  var style = evolve({\n    paddingTop: resolvePageVerticalPadding(container),\n    paddingLeft: resolvePageHorizontalPadding(container),\n    paddingRight: resolvePageHorizontalPadding(container),\n    paddingBottom: resolvePageVerticalPadding(container)\n  }, page.style);\n  return Object.assign({}, page, {\n    style: style\n  });\n};\n/**\n * Translates all pages percentage paddings in fixed ones\n * This has to be computed from pages calculated size and not by Yoga\n * because at this point we didn't performed pagination yet.\n *\n * @param {Object} document root\n * @returns {Object} document root with translated page paddings\n */\n\n\nvar resolvePagesPaddings = function resolvePagesPaddings(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePagePaddings);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n/**\n *\n * @param {Object} container width and height\n * @param {String | Number} value border radius value\n * @returns {Number} fixed border radius value\n */\n\n\nvar resolveRadius = function resolveRadius(container) {\n  return function (value) {\n    if (!value) return undefined;\n    var match = matchPercent(value);\n    return match ? match.percent * Math.min(container.width, container.height) : value;\n  };\n};\n/**\n * Transforms percent border radius into fixed values\n *\n * @param {Object} node\n * @returns {Object} node\n */\n\n\nvar resolvePercentRadius = function resolvePercentRadius(node) {\n  var style = evolve({\n    borderTopLeftRadius: resolveRadius(node.box),\n    borderTopRightRadius: resolveRadius(node.box),\n    borderBottomRightRadius: resolveRadius(node.box),\n    borderBottomLeftRadius: resolveRadius(node.box)\n  }, node.style || {});\n  var newNode = Object.assign({}, node, {\n    style: style\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(resolvePercentRadius);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n/**\n * Transform percent height into fixed\n *\n * @param {String | number} height\n * @return {number} height\n */\n\n\nvar transformHeight = function transformHeight(pageArea, height) {\n  var match = matchPercent(height);\n  return match ? match.percent * pageArea : height;\n};\n/**\n * Get page area (height minus paddings)\n *\n * @param {Object} page\n * @return {number} page area\n */\n\n\nvar getPageArea = function getPageArea(page) {\n  var _page$style, _page$style2;\n\n  var pageHeight = page.style.height;\n  var pagePaddingTop = ((_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.paddingTop) || 0;\n  var pagePaddingBottom = ((_page$style2 = page.style) === null || _page$style2 === void 0 ? void 0 : _page$style2.paddingBottom) || 0;\n  return pageHeight - pagePaddingTop - pagePaddingBottom;\n};\n/**\n * Transform node percent height to fixed\n *\n * @param {Object} page\n * @param {Object} node\n * @return {Object} transformed node\n */\n\n\nvar resolveNodePercentHeight = function resolveNodePercentHeight(page, node) {\n  var _page$style3, _node$style;\n\n  if (isNil((_page$style3 = page.style) === null || _page$style3 === void 0 ? void 0 : _page$style3.height)) return node;\n  if (isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.height)) return node;\n  var pageArea = getPageArea(page);\n  var height = transformHeight(pageArea, node.style.height);\n  var style = Object.assign({}, node.style, {\n    height: height\n  });\n  return Object.assign({}, node, {\n    style: style\n  });\n};\n/**\n * Transform page immediate children with percent height to fixed\n *\n * @param {Object} page\n * @return {Object} transformed page\n */\n\n\nvar resolvePagePercentHeight = function resolvePagePercentHeight(page) {\n  if (!page.children) return page;\n\n  var resolveChild = function resolveChild(child) {\n    return resolveNodePercentHeight(page, child);\n  };\n\n  var children = page.children.map(resolveChild);\n  return Object.assign({}, page, {\n    children: children\n  });\n};\n/**\n * Transform all page immediate children with percent height to fixed.\n * This is needed for computing correct dimensions on pre-pagination layout.\n *\n * @param {Object} document root\n * @return {Object} transformed document root\n */\n\n\nvar resolvePercentHeight = function resolvePercentHeight(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePagePercentHeight);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar isType = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\n\nvar isLink = isType(P.Link);\nvar isText = isType(P.Text);\nvar isTextInstance = isType(P.TextInstance);\n/**\n * Checks if node has render prop\n *\n * @param {Object} node\n * @returns {Boolean} has render prop?\n */\n\nvar hasRenderProp = function hasRenderProp(node) {\n  var _node$props;\n\n  return !!((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.render);\n};\n/**\n * Checks if node is text type (Text or TextInstance)\n *\n * @param {Object} node\n * @returns {Boolean} are all children text instances?\n */\n\n\nvar isTextType = function isTextType(node) {\n  return isText(node) || isTextInstance(node);\n};\n/**\n * Checks if is tet link that needs to be wrapped in Text\n *\n * @param {Object} node\n * @returns {Boolean} are all children text instances?\n */\n\n\nvar isTextLink = function isTextLink(node) {\n  var children = node.children || []; // Text string inside a Link\n\n  if (children.every(isTextInstance)) return true; // Text node inside a Link\n\n  if (children.every(isText)) return false;\n  return children.every(isTextType);\n};\n/**\n * Wraps node children inside Text node\n *\n * @param {Object} node\n * @returns {Boolean} node with intermediate Text child\n */\n\n\nvar wrapText = function wrapText(node) {\n  var textElement = {\n    type: P.Text,\n    props: {},\n    style: {},\n    box: {},\n    children: node.children\n  };\n  return Object.assign({}, node, {\n    children: [textElement]\n  });\n};\n\nvar transformLink = function transformLink(node) {\n  if (!isLink(node)) return node; // If has render prop substitute the instance by a Text, that will\n  // ultimately render the inline Link via the textkit PDF renderer.\n\n  if (hasRenderProp(node)) return Object.assign({}, node, {\n    type: P.Text\n  }); // If is a text link (either contains Text or TextInstalce), wrap it\n  // inside a Text element so styles are applied correctly\n\n  if (isTextLink(node)) return wrapText(node);\n  return node;\n};\n/**\n * Transforms Link layout to correctly render text and dynamic rendered links\n *\n * @param {Object} node\n * @returns {Object} node with link substitution\n */\n\n\nvar resolveLinkSubstitution = function resolveLinkSubstitution(node) {\n  if (!node.children) return node;\n  var resolveChild = compose(transformLink, resolveLinkSubstitution);\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar layout = asyncCompose(resolveZIndex, resolveOrigin, resolvePagination, resolveTextLayout, resolvePercentRadius, resolveDimensions, resolveSvg, resolveAssets, resolveInheritance, resolvePercentHeight, resolvePagesPaddings, resolveStyles, resolveLinkSubstitution, resolveBookmarks, resolvePageSizes);\nexport { layout as default };","map":{"version":3,"names":["upperFirst","capitalize","last","pick","compose","mapValues","matchPercent","evolve","isNil","get","castArray","omit","asyncCompose","P","TextInstance","stylesheet","transformColor","processTransform","layoutEngine","linebreaker","justification","scriptItemizer","wordHyphenation","decorationEngine","fromFragments","_createClass","PDFFont","_asyncToGenerator","_regeneratorRuntime","_extends","emojiRegex","resolveImage","flatten","Yoga","_objectWithoutPropertiesLoose","advanceWidth","transformText","text","transformation","toUpperCase","toLowerCase","StandardFont","src","name","open","_proto","prototype","encode","str","layout","_this","_this$encode","encoded","positions","stringIndices","map","_","i","glyphs","g","glyph","getGlyph","parseInt","glyphForCodePoint","codePoint","id","_font","codePoints","isLigature","font","characterToGlyph","hasGlyphForCodePoint","key","fontCache","IGNORED_CODE_POINTS","getFontSize","node","attributes","fontSize","getOrCreateFont","getFallbackFont","shouldFallbackToFont","includes","fontSubstitution","_ref","string","runs","lastFont","lastFontSize","lastIndex","index","res","length","run","defaultFont","push","start","end","chars","slice","j","char","codePointAt","shouldFallback","unitsPerEm","scale","_fontSize","isTextInstance$4","isTextInstance","type","engines$1","textDecoration","engine$1","getFragments$1","getFragments","fontStore","instance","fragments","_instance$props","props","_instance$props$fill","fill","_instance$props$fontF","fontFamily","fontWeight","fontStyle","_instance$props$fontS","textDecorationColor","textDecorationStyle","textTransform","opacity","obj","getFont","data","color","underlineStyle","underline","underlineColor","strike","strikeStyle","strikeColor","children","child","value","apply","getAttributedString$1","getAttributedString","AlmostInfinity","shrinkWhitespaceFactor","before","after","layoutTspan","_node$props","_node$props2","attributedString","x","y","container","width","height","hyphenationCallback","getHyphenationCallback","layoutOptions","lines","flat","Object","assign","layoutText$1","layoutText","isDefs","Defs","getDefs","defs","find","values","reduce","acc","_value$props","isNotDefs","detachDefs","filter","URL_REGEX","replaceDef","undefined","test","match","parseNodeDefs","clipPath","parseDefs","root","replaceDefs","parseViewbox","split","parseFloat","minX","minY","maxX","maxY","getContainer$1","getContainer","viewbox","viewBox","SVG_INHERITED_PROPS","getInheritProps","inheritProps","inheritedProps","newChild","parseAspectRatio","replace","align","meetOrSlice","STYLE_PROPS","VERTICAL_PROPS","HORIZONTAL_PROPS","isType$3","isType","isSvg$3","Svg","isText$4","Text","isTextInstance$3","transformPercent","percent","parsePercent","parseProps","x1","x2","y1","y2","r","rx","ry","cx","cy","offset","stroke","stopOpacity","stopColor","transform","mergeStyles$1","mergeStyles","style","removeNoneValues","removeNone","pickStyleProps","styleProps","parseSvgProps","preserveAspectRatio","wrapBetweenTspan","Tspan","addMissingTspan","resolveChild","parseText","resolveSvgNode","resolveChildren","resolveSvgRoot","resolveSvg","getZIndex","zIndex","shouldSort","Document","sortZIndex","a","b","za","zb","resolveZIndex","sortedChildren","sort","emojis","regex","reflect","promise","arguments","then","v","e","makeFetchEmojiImage","_removeNoColor","getCodePoints","Array","from","toString","join","buildEmojiUrl","emoji","source","url","format","fetchEmojis","promises","_loop","loading","emojiUrl","fetchEmojiImage","uri","image","exec","embedEmojis","result","fragment","_match","emojiSize","chunk","String","fromCharCode","attachment","yOffset","Math","floor","getSource","_node$props3","href","resolveSource","mark","_callee","wrap","_callee$","_context","prev","next","t0","sent","abrupt","stop","_x","fetchImage","cache","console","warn","Error","message","isImage$2","isImage","Image","fetchAssets","_node$children","listToExplore","emojiSource","getEmojiSource","_n$style","n","shift","load","forEach","childNode","resolveAssets","Promise","all","_x2","isLink$1","isLink","Link","DEFAULT_LINK_STYLES","computeStyle","baseStyle","isArray","concat","resolveNodeStyles","resolvePageStyles","page","_page$props","dpi","box","resolveStyles","getTransformStyle","s","_node$style","_node$style2","getOrigin","_node$box","left","top","transformOriginX","transformOriginY","percentX","percentY","offsetX","offsetY","resolveNodeOrigin","origin","newNode","resolveOrigin","getBookmarkValue","title","fit","expanded","resolveBookmarks","refs","parent","_child$props","element","bookmark","_parent","ref","newHierarchy","VALID_ORIENTATIONS","getOrientation","orientation","isLandscape","PAGE_SIZES","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","RA0","RA1","RA2","RA3","RA4","SRA0","SRA1","SRA2","SRA3","SRA4","EXECUTIVE","FOLIO","LEGAL","LETTER","TABLOID","ID1","toSizeObject","flipSizeObject","adjustDpi","getStringSize","getNumberSize","getSize","_page$props2","size","resolvePageSize","resolvePageSizes","isFixed","fixed","lineIndexAtHeight","line","heightAtLineIndex","counter","getLineBreak","widows","orphans","linesQuantity","slicedLine","splitText","slicedLineIndex","currentHeight","nextHeight","current","borderBottomWidth","marginBottom","paddingBottom","borderBottomLeftRadius","borderBottomRightRadius","borderTopWidth","marginTop","paddingTop","borderTopLeftRadius","borderTopRightRadius","getTop$1","getTop","hasFixedHeight","splitNode","nodeTop","NON_WRAP_TYPES","Note","Canvas","getWrap","getComputedPadding","edge","yogaNode","_yogaNode","getPadding","EDGE_TOP","paddingVertical","padding","paddingRight","EDGE_RIGHT","paddingHorizontal","EDGE_BOTTOM","paddingLeft","EDGE_LEFT","getWrapArea","_page$style","_getPadding","getContentArea","_excluded","isString","isNumber","createInstance","_element$props","_element$props$style","_element$props$childr","nextChildren","getNodesHeight","nodes","max","min","Infinity","getBreak","break","getMinPresenceAhead","minPresenceAhead","defaultPresenceAhead","getPresenceAhead","elements","isElementInside","presenceAhead","shouldBreak","futureElements","futureHeight","shouldSplit","shouldWrap","IGNORABLE_CODEPOINTS","buildSubsetForFont","ignoreChars","charSubset","subsetRegex","RegExp","PREPROCESSORS","isImage$1","isTextInstance$2","parentLink","level","_instance$props2","_instance$style","_instance$style$color","_instance$style$fontF","_instance$style$fontS","_instance$style$textA","textAlign","lineHeight","letterSpacing","textIndent","opts","backgroundColor","indent","characterSpacing","link","_fragments","_i","preprocessor","engines","engine","getMaxLines","maxLines","getTextOverflow","textOverflow","truncateMode","getLayoutOptions","hyphenationPenalty","options","isType$2","isSvg$2","isText$3","shouldIterate","shouldLayoutText","resolveTextLayout","mapChild","INHERITED_PROPERTIES","isSvg$1","isSvg","mergeValues","styleName","inheritedValue","merge","inheritedStyles","mergedStyles","entries","resolveInheritance","inheritStyles","getComputedMargin","getMargin","marginVertical","margin","marginRight","marginHorizontal","marginLeft","getPosition","getComputedTop","right","getComputedRight","bottom","getComputedBottom","getComputedLeft","DEFAULT_DIMENSION","getDimension","getComputedWidth","getComputedHeight","getComputedBorder","getBorderWidth","borderRightWidth","borderLeftWidth","setDisplay","DISPLAY_NONE","DISPLAY_FLEX","OVERFLOW","hidden","OVERFLOW_HIDDEN","scroll","OVERFLOW_SCROLL","setOverflow","overflow","OVERFLOW_VISIBLE","FLEX_WRAP","WRAP_WRAP","WRAP_WRAP_REVERSE","setFlexWrap","flexWrap","WRAP_NO_WRAP","setYogaValue","attr","hasEdge","fixedMethod","autoMethod","percentMethod","_yogaNode$percentMeth","call","_yogaNode$percentMeth2","_yogaNode$autoMethod","setFlexBasis","UNIT_AUTO","_yogaNode$autoMethod2","_yogaNode$fixedMethod","_yogaNode$fixedMethod2","setFlexGrow","ALIGN","ALIGN_FLEX_START","center","ALIGN_CENTER","ALIGN_FLEX_END","stretch","ALIGN_STRETCH","baseline","ALIGN_BASELINE","ALIGN_SPACE_BETWEEN","ALIGN_SPACE_AROUND","setAlign","defaultValue","ALIGN_AUTO","setAlignSelf","setAlignItems","setFlexShrink","setAspectRatio","setAlignContent","setPositionType","POSITION_TYPE_ABSOLUTE","POSITION_TYPE_RELATIVE","FLEX_DIRECTIONS","row","FLEX_DIRECTION_ROW","FLEX_DIRECTION_ROW_REVERSE","FLEX_DIRECTION_COLUMN_REVERSE","setFlexDirection","flexDirection","FLEX_DIRECTION_COLUMN","JUSTIFY_CONTENT","JUSTIFY_CENTER","JUSTIFY_FLEX_END","JUSTIFY_SPACE_BETWEEN","JUSTIFY_SPACE_AROUND","JUSTIFY_SPACE_EVENLY","setJustifyContent","justifyContent","JUSTIFY_FLEX_START","setMarginTop","setMarginRight","setMarginBottom","setMarginLeft","setPaddingTop","setPaddingRight","setPaddingBottom","setPaddingLeft","setBorderTop","setBorderRight","setBorderBottom","setBorderLeft","setPositionTop","setPositionRight","setPositionBottom","setPositionLeft","setWidth","setMinWidth","setMaxWidth","setHeight","setMinHeight","setMaxHeight","getAspectRatio","measureCanvas$1","measureCanvas","widthMode","heightMode","aspectRatio","MEASURE_MODE_EXACTLY","MEASURE_MODE_AT_MOST","linesWidth","linesHeight","ALIGNMENT_FACTORS","measureText","alignFactor","alignOffset","getRatio","_node$image","isHeightAuto","_page$box","SAFETY_HEIGHT$1","measureImage","imageRatio","imageMargin","pagePadding","pageArea","MEASURE_MODE_UNDEFINED","scaledHeight","_scaledHeight","SAFETY_HEIGHT","getMax","measureCtx","ctx","points","nil","addPoint","moveTo","rect","w","h","ellipse","polygon","lineTo","circle","roundedRect","path","lineWidth","bezierCurveTo","quadraticCurveTo","rotate","translate","dash","clip","save","lineCap","restore","lineJoin","fillColor","miterLimit","strokeColor","fillOpacity","strokeOpacity","linearGradient","radialGradient","getWidth","p","getHeight","paint","YOGA_NODE","YOGA_CONFIG","Config","create","setPointScaleFactor","isType$1","isText$2","isNote","isPage","Page","isCanvas","isTextInstance$1","setNodeHeight","setYogaValues","minWidth","maxWidth","minHeight","maxHeight","position","display","alignSelf","alignContent","alignItems","flexBasis","flexGrow","flexShrink","insertYogaNodes","insertChild","getChildCount","setMeasureFunc","isLayoutElement","createYogaNodes","Node","createWithConfig","calculateLayout","persistDimensions","destroyYogaNodes","freeYogaNodes","freeRecursive","resolvePageDimensions","resolveDimensions","isText$1","isText","SAFTY_THRESHOLD","assingChildren","allFixed","every","isDynamic","render","relayoutPage","warnUnavailableSpace","splitNodes","contentArea","currentChildren","futureNodes","futureFixedNodes","nodeHeight","isOutside","shouldBreak$1","canWrap","fitsInsidePage","_box","_next","_split","currentChild","nextChild","splitChildren","availableHeight","splitView","_splitNode","currentNode","nextNode","_splitChildren","currentChilds","shouldResolveDynamicNodes","some","resolveDynamicNodes","isNodeDynamic","Boolean","c","resetHeight","resolveDynamicPage","resolvedPage","splitPage","pageNumber","wrapArea","dynamicPage","_splitNodes","nextChilds","relayout","currentBox","currentPage","nextBox","nextProps","nextPage","resolvePageIndices","pages","totalPages","subPageNumber","subPageTotalPages","assocSubPageData","subpages","dissocSubPageData","paginate","splittedPage","resolvePagination","doc","_len","args","_key","resolvePageHorizontalPadding","resolvePageVerticalPadding","resolvePagePaddings","resolvePagesPaddings","resolveRadius","resolvePercentRadius","transformHeight","getPageArea","_page$style2","pageHeight","pagePaddingTop","pagePaddingBottom","resolveNodePercentHeight","_page$style3","resolvePagePercentHeight","resolvePercentHeight","hasRenderProp","isTextType","isTextLink","wrapText","textElement","transformLink","resolveLinkSubstitution","default"],"sources":["C:/Users/Pipe17/Desktop/practicaReact/loginfirebase/node_modules/@react-pdf/layout/lib/index.es.js"],"sourcesContent":["import { upperFirst, capitalize, last, pick, compose, mapValues, matchPercent, evolve, isNil, get, castArray, omit, asyncCompose } from '@react-pdf/fns';\nimport * as P from '@react-pdf/primitives';\nimport { TextInstance } from '@react-pdf/primitives';\nimport stylesheet, { transformColor, processTransform } from '@react-pdf/stylesheet';\nimport layoutEngine from '@react-pdf/textkit/lib/layout';\nimport linebreaker from '@react-pdf/textkit/lib/engines/linebreaker';\nimport justification from '@react-pdf/textkit/lib/engines/justification';\nimport scriptItemizer from '@react-pdf/textkit/lib/engines/scriptItemizer';\nimport wordHyphenation from '@react-pdf/textkit/lib/engines/wordHyphenation';\nimport decorationEngine from '@react-pdf/textkit/lib/engines/textDecoration';\nimport fromFragments from '@react-pdf/textkit/lib/attributedString/fromFragments';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport { PDFFont } from '@react-pdf/pdfkit';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _extends from '@babel/runtime/helpers/extends';\nimport emojiRegex from 'emoji-regex';\nimport resolveImage from '@react-pdf/image';\nimport flatten from '@react-pdf/stylesheet/lib/flatten';\nimport Yoga from '@react-pdf/yoga';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/objectWithoutPropertiesLoose';\nimport advanceWidth from '@react-pdf/textkit/lib/attributedString/advanceWidth';\n\n/**\n * Apply transformation to text string\n *\n * @param {String} text\n * @param {String} transformation type\n * @returns {String} transformed text\n */\n\nvar transformText = function transformText(text, transformation) {\n  switch (transformation) {\n    case 'uppercase':\n      return text.toUpperCase();\n\n    case 'lowercase':\n      return text.toLowerCase();\n\n    case 'capitalize':\n      return capitalize(text);\n\n    case 'upperfirst':\n      return upperFirst(text);\n\n    default:\n      return text;\n  }\n};\n\nvar StandardFont = /*#__PURE__*/function () {\n  function StandardFont(src) {\n    this.name = src;\n    this.src = PDFFont.open(null, src);\n  }\n\n  var _proto = StandardFont.prototype;\n\n  _proto.encode = function encode(str) {\n    return this.src.encode(str);\n  };\n\n  _proto.layout = function layout(str) {\n    var _this = this;\n\n    var _this$encode = this.encode(str),\n        encoded = _this$encode[0],\n        positions = _this$encode[1];\n\n    return {\n      positions: positions,\n      stringIndices: positions.map(function (_, i) {\n        return i;\n      }),\n      glyphs: encoded.map(function (g, i) {\n        var glyph = _this.getGlyph(parseInt(g, 16));\n\n        glyph.advanceWidth = positions[i].advanceWidth;\n        return glyph;\n      })\n    };\n  };\n\n  _proto.glyphForCodePoint = function glyphForCodePoint(codePoint) {\n    var glyph = this.getGlyph(codePoint);\n    glyph.advanceWidth = 400;\n    return glyph;\n  };\n\n  _proto.getGlyph = function getGlyph(id) {\n    return {\n      id: id,\n      _font: this.src,\n      codePoints: [id],\n      isLigature: false,\n      name: this.src.font.characterToGlyph(id)\n    };\n  };\n\n  _proto.hasGlyphForCodePoint = function hasGlyphForCodePoint(codePoint) {\n    return this.src.font.characterToGlyph(codePoint) !== '.notdef';\n  } // Based on empirical observation\n  ;\n\n  _createClass(StandardFont, [{\n    key: \"ascent\",\n    get: function get() {\n      return 900;\n    } // Based on empirical observation\n\n  }, {\n    key: \"capHeight\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return 650;\n\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return 550;\n\n        default:\n          return 690;\n      }\n    } // Based on empirical observation\n\n  }, {\n    key: \"xHeight\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return 440;\n\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return 390;\n\n        default:\n          return 490;\n      }\n    } // Based on empirical observation\n\n  }, {\n    key: \"descent\",\n    get: function get() {\n      switch (this.name) {\n        case 'Times-Roman':\n        case 'Times-Bold':\n        case 'Times-Italic':\n        case 'Times-BoldItalic':\n          return -220;\n\n        case 'Courier':\n        case 'Courier-Bold':\n        case 'Courier-Oblique':\n        case 'Courier-BoldOblique':\n          return -230;\n\n        default:\n          return -200;\n      }\n    }\n  }, {\n    key: \"lineGap\",\n    get: function get() {\n      return 0;\n    }\n  }, {\n    key: \"unitsPerEm\",\n    get: function get() {\n      return 1000;\n    }\n  }]);\n\n  return StandardFont;\n}();\n\nvar fontCache = {};\nvar IGNORED_CODE_POINTS = [173];\n\nvar getFontSize = function getFontSize(node) {\n  return node.attributes.fontSize || 12;\n};\n\nvar getOrCreateFont = function getOrCreateFont(name) {\n  if (fontCache[name]) return fontCache[name];\n  var font = new StandardFont(name);\n  fontCache[name] = font;\n  return font;\n};\n\nvar getFallbackFont = function getFallbackFont() {\n  return getOrCreateFont('Helvetica');\n};\n\nvar shouldFallbackToFont = function shouldFallbackToFont(codePoint, font) {\n  return !font || !IGNORED_CODE_POINTS.includes(codePoint) && !font.hasGlyphForCodePoint(codePoint) && getFallbackFont().hasGlyphForCodePoint(codePoint);\n};\n\nvar fontSubstitution = function fontSubstitution() {\n  return function (_ref) {\n    var string = _ref.string,\n        runs = _ref.runs;\n    var lastFont = null;\n    var lastFontSize = null;\n    var lastIndex = 0;\n    var index = 0;\n    var res = [];\n\n    for (var i = 0; i < runs.length; i += 1) {\n      var run = runs[i];\n      var defaultFont = typeof run.attributes.font === 'string' ? getOrCreateFont(run.attributes.font) : run.attributes.font;\n\n      if (string.length === 0) {\n        res.push({\n          start: 0,\n          end: 0,\n          attributes: {\n            font: defaultFont\n          }\n        });\n        break;\n      }\n\n      var chars = string.slice(run.start, run.end);\n\n      for (var j = 0; j < chars.length; j += 1) {\n        var char = chars[j];\n        var codePoint = char.codePointAt();\n        var shouldFallback = shouldFallbackToFont(codePoint, defaultFont); // If the default font does not have a glyph and the fallback font does, we use it\n\n        var font = shouldFallback ? getFallbackFont() : defaultFont;\n        var fontSize = getFontSize(run); // If anything that would impact res has changed, update it\n\n        if (font !== lastFont || fontSize !== lastFontSize || font.unitsPerEm !== lastFont.unitsPerEm) {\n          if (lastFont) {\n            res.push({\n              start: lastIndex,\n              end: index,\n              attributes: {\n                font: lastFont,\n                scale: lastFontSize / lastFont.unitsPerEm\n              }\n            });\n          }\n\n          lastFont = font;\n          lastFontSize = fontSize;\n          lastIndex = index;\n        }\n\n        index += char.length;\n      }\n    }\n\n    if (lastIndex < string.length) {\n      var _fontSize = getFontSize(last(runs));\n\n      res.push({\n        start: lastIndex,\n        end: string.length,\n        attributes: {\n          font: lastFont,\n          scale: _fontSize / lastFont.unitsPerEm\n        }\n      });\n    }\n\n    return {\n      string: string,\n      runs: res\n    };\n  };\n};\n\nvar isTextInstance$4 = function isTextInstance(node) {\n  return node.type === P.TextInstance;\n};\n\nvar engines$1 = {\n  linebreaker: linebreaker,\n  justification: justification,\n  scriptItemizer: scriptItemizer,\n  wordHyphenation: wordHyphenation,\n  fontSubstitution: fontSubstitution,\n  textDecoration: decorationEngine\n};\nvar engine$1 = layoutEngine(engines$1);\n\nvar getFragments$1 = function getFragments(fontStore, instance) {\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$props = instance.props,\n      _instance$props$fill = _instance$props.fill,\n      fill = _instance$props$fill === void 0 ? 'black' : _instance$props$fill,\n      _instance$props$fontF = _instance$props.fontFamily,\n      fontFamily = _instance$props$fontF === void 0 ? 'Helvetica' : _instance$props$fontF,\n      fontWeight = _instance$props.fontWeight,\n      fontStyle = _instance$props.fontStyle,\n      _instance$props$fontS = _instance$props.fontSize,\n      fontSize = _instance$props$fontS === void 0 ? 18 : _instance$props$fontS,\n      textDecoration = _instance$props.textDecoration,\n      textDecorationColor = _instance$props.textDecorationColor,\n      textDecorationStyle = _instance$props.textDecorationStyle,\n      textTransform = _instance$props.textTransform,\n      opacity = _instance$props.opacity;\n  var obj = fontStore ? fontStore.getFont({\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  }) : null;\n  var font = obj ? obj.data : fontFamily;\n  var attributes = {\n    font: font,\n    opacity: opacity,\n    fontSize: fontSize,\n    color: fill,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    underlineColor: textDecorationColor || fill,\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeStyle: textDecorationStyle,\n    strikeColor: textDecorationColor || fill\n  };\n\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n\n    if (isTextInstance$4(child)) {\n      fragments.push({\n        string: transformText(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      fragments.push.apply(fragments, getFragments(child));\n    }\n  }\n\n  return fragments;\n};\n\nvar getAttributedString$1 = function getAttributedString(fontStore, instance) {\n  return fromFragments(getFragments$1(fontStore, instance));\n};\n\nvar AlmostInfinity = 999999999999;\nvar shrinkWhitespaceFactor = {\n  before: -0.5,\n  after: -0.5\n};\n\nvar layoutTspan = function layoutTspan(fontStore) {\n  return function (node) {\n    var _node$props, _node$props2;\n\n    var attributedString = getAttributedString$1(fontStore, node);\n    var x = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.x) || 0;\n    var y = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.y) || 0;\n    var container = {\n      x: x,\n      y: y,\n      width: AlmostInfinity,\n      height: AlmostInfinity\n    };\n    var hyphenationCallback = node.props.hyphenationCallback || (fontStore === null || fontStore === void 0 ? void 0 : fontStore.getHyphenationCallback()) || null;\n    var layoutOptions = {\n      hyphenationCallback: hyphenationCallback,\n      shrinkWhitespaceFactor: shrinkWhitespaceFactor\n    };\n    var lines = engine$1(attributedString, container, layoutOptions).flat();\n    return Object.assign({}, node, {\n      lines: lines\n    });\n  };\n};\n\nvar layoutText$1 = function layoutText(fontStore, node) {\n  if (!node.children) return node;\n  var children = node.children.map(layoutTspan(fontStore));\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar isDefs = function isDefs(node) {\n  return node.type === P.Defs;\n};\n\nvar getDefs = function getDefs(node) {\n  var children = node.children || [];\n  var defs = children.find(isDefs) || {};\n  var values = defs.children || [];\n  return values.reduce(function (acc, value) {\n    var _value$props;\n\n    var id = (_value$props = value.props) === null || _value$props === void 0 ? void 0 : _value$props.id;\n    if (id) acc[id] = value;\n    return acc;\n  }, {});\n};\n\nvar isNotDefs = function isNotDefs(node) {\n  return node.type !== P.Defs;\n};\n\nvar detachDefs = function detachDefs(node) {\n  if (!node.children) return node;\n  var children = node.children.filter(isNotDefs);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar URL_REGEX = /url\\(['\"]?#([^'\"]+)['\"]?\\)/;\n\nvar replaceDef = function replaceDef(defs, value) {\n  if (!value) return undefined;\n  if (!URL_REGEX.test(value)) return value;\n  var match = value.match(URL_REGEX);\n  return defs[match[1]];\n};\n\nvar parseNodeDefs = function parseNodeDefs(defs) {\n  return function (node) {\n    var _node$props, _node$props2;\n\n    var fill = replaceDef(defs, (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.fill);\n    var clipPath = replaceDef(defs, (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.clipPath);\n    var props = Object.assign({}, node.props, {\n      fill: fill,\n      clipPath: clipPath\n    });\n    var children = node.children ? node.children.map(parseNodeDefs(defs)) : undefined;\n    return Object.assign({}, node, {\n      props: props,\n      children: children\n    });\n  };\n};\n\nvar parseDefs = function parseDefs(root) {\n  if (!root.children) return root;\n  var defs = getDefs(root);\n  var children = root.children.map(parseNodeDefs(defs));\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar replaceDefs = function replaceDefs(node) {\n  return detachDefs(parseDefs(node));\n};\n\nvar parseViewbox = function parseViewbox(value) {\n  if (!value) return null;\n  var values = value.split(/[,\\s]+/).map(parseFloat);\n  if (values.length !== 4) return null;\n  return {\n    minX: values[0],\n    minY: values[1],\n    maxX: values[2],\n    maxY: values[3]\n  };\n};\n\nvar getContainer$1 = function getContainer(node) {\n  var viewbox = parseViewbox(node.props.viewBox);\n\n  if (viewbox) {\n    return {\n      width: viewbox.maxX,\n      height: viewbox.maxY\n    };\n  }\n\n  if (node.props.width && node.props.height) {\n    return {\n      width: parseFloat(node.props.width),\n      height: parseFloat(node.props.height)\n    };\n  }\n\n  return {\n    width: 0,\n    height: 0\n  };\n};\n\nvar SVG_INHERITED_PROPS = ['x', 'y', 'clipPath', 'clipRule', 'opacity', 'fill', 'fillOpacity', 'fillRule', 'stroke', 'strokeLinecap', 'strokeLinejoin', 'strokeOpacity', 'strokeWidth', 'textAnchor', 'dominantBaseline', 'color', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'opacity', 'textDecoration', 'lineHeight', 'textAlign', 'visibility', 'wordSpacing'];\n\nvar getInheritProps = function getInheritProps(node) {\n  var props = node.props || {};\n  return pick(SVG_INHERITED_PROPS, props);\n};\n\nvar inheritProps = function inheritProps(node) {\n  if (!node.children) return node;\n  var inheritedProps = getInheritProps(node);\n  var children = node.children.map(function (child) {\n    var props = Object.assign({}, inheritedProps, child.props || {});\n    var newChild = Object.assign({}, child, {\n      props: props\n    });\n    return inheritProps(newChild);\n  });\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar parseAspectRatio = function parseAspectRatio(value) {\n  var match = value.replace(/[\\s\\r\\t\\n]+/gm, ' ').replace(/^defer\\s/, '').split(' ');\n  var align = match[0] || 'xMidYMid';\n  var meetOrSlice = match[1] || 'meet';\n  return {\n    align: align,\n    meetOrSlice: meetOrSlice\n  };\n};\n\nvar STYLE_PROPS = ['width', 'height', 'color', 'stroke', 'strokeWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'fill', 'fillRule', 'clipPath', 'offset', 'transform', 'strokeLinejoin', 'strokeLinecap', 'strokeDasharray'];\nvar VERTICAL_PROPS = ['y', 'y1', 'y2', 'height', 'cy', 'ry'];\nvar HORIZONTAL_PROPS = ['x', 'x1', 'x2', 'width', 'cx', 'rx'];\n\nvar isType$3 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\n\nvar isSvg$3 = isType$3(P.Svg);\nvar isText$4 = isType$3(P.Text);\nvar isTextInstance$3 = isType$3(P.TextInstance);\n\nvar transformPercent = function transformPercent(container) {\n  return function (props) {\n    return mapValues(props, function (value, key) {\n      var match = matchPercent(value);\n\n      if (match && VERTICAL_PROPS.includes(key)) {\n        return match.percent * container.height;\n      }\n\n      if (match && HORIZONTAL_PROPS.includes(key)) {\n        return match.percent * container.width;\n      }\n\n      return value;\n    });\n  };\n};\n\nvar parsePercent = function parsePercent(value) {\n  var match = matchPercent(value);\n  return match ? match.percent : parseFloat(value);\n};\n\nvar parseProps = function parseProps(container) {\n  return function (node) {\n    var props = transformPercent(container)(node.props);\n    props = evolve({\n      x: parseFloat,\n      x1: parseFloat,\n      x2: parseFloat,\n      y: parseFloat,\n      y1: parseFloat,\n      y2: parseFloat,\n      r: parseFloat,\n      rx: parseFloat,\n      ry: parseFloat,\n      cx: parseFloat,\n      cy: parseFloat,\n      width: parseFloat,\n      height: parseFloat,\n      offset: parsePercent,\n      fill: transformColor,\n      opacity: parsePercent,\n      stroke: transformColor,\n      stopOpacity: parsePercent,\n      stopColor: transformColor,\n      transform: processTransform\n    }, props);\n    return Object.assign({}, node, {\n      props: props\n    });\n  };\n};\n\nvar mergeStyles$1 = function mergeStyles(node) {\n  var style = node.style || {};\n  var props = Object.assign({}, style, node.props);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\n\nvar removeNoneValues = function removeNoneValues(node) {\n  var removeNone = function removeNone(value) {\n    return value === 'none' ? null : value;\n  };\n\n  var props = mapValues(node.props, removeNone);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\n\nvar pickStyleProps = function pickStyleProps(node) {\n  var props = node.props || {};\n  var styleProps = pick(STYLE_PROPS, props);\n  var style = Object.assign({}, styleProps, node.style || {});\n  return Object.assign({}, node, {\n    style: style\n  });\n};\n\nvar parseSvgProps = function parseSvgProps(node) {\n  var props = evolve({\n    width: parseFloat,\n    height: parseFloat,\n    viewBox: parseViewbox,\n    preserveAspectRatio: parseAspectRatio\n  }, node.props);\n  return Object.assign({}, node, {\n    props: props\n  });\n};\n\nvar wrapBetweenTspan = function wrapBetweenTspan(node) {\n  return {\n    type: P.Tspan,\n    props: {},\n    children: [node]\n  };\n};\n\nvar addMissingTspan = function addMissingTspan(node) {\n  if (!isText$4(node)) return node;\n  if (!node.children) return node;\n\n  var resolveChild = function resolveChild(child) {\n    return isTextInstance$3(child) ? wrapBetweenTspan(child) : child;\n  };\n\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar parseText = function parseText(fontStore) {\n  return function (node) {\n    if (isText$4(node)) return layoutText$1(fontStore, node);\n    if (!node.children) return node;\n    var children = node.children.map(parseText(fontStore));\n    return Object.assign({}, node, {\n      children: children\n    });\n  };\n};\n\nvar resolveSvgNode = function resolveSvgNode(container) {\n  return compose(parseProps(container), addMissingTspan, removeNoneValues, mergeStyles$1);\n};\n\nvar resolveChildren = function resolveChildren(container) {\n  return function (node) {\n    if (!node.children) return node;\n    var resolveChild = compose(resolveChildren(container), resolveSvgNode(container));\n    var children = node.children.map(resolveChild);\n    return Object.assign({}, node, {\n      children: children\n    });\n  };\n};\n\nvar resolveSvgRoot = function resolveSvgRoot(node, fontStore) {\n  var container = getContainer$1(node);\n  return compose(replaceDefs, parseText(fontStore), parseSvgProps, pickStyleProps, inheritProps, resolveChildren(container))(node);\n};\n/**\n * Pre-process SVG nodes so they can be rendered in the next steps\n *\n * @param {Object} root node\n * @param {Object} fontStore font store\n * @returns {Object} root node\n */\n\n\nvar resolveSvg = function resolveSvg(node, fontStore) {\n  if (!node.children) return node;\n\n  var resolveChild = function resolveChild(child) {\n    return resolveSvg(child, fontStore);\n  };\n\n  var root = isSvg$3(node) ? resolveSvgRoot(node, fontStore) : node;\n  var children = root.children.map(resolveChild);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar getZIndex = function getZIndex(node) {\n  return node.style.zIndex;\n};\n\nvar shouldSort = function shouldSort(node) {\n  return node.type !== P.Document && node.type !== P.Svg;\n};\n\nvar sortZIndex = function sortZIndex(a, b) {\n  var za = getZIndex(a);\n  var zb = getZIndex(b);\n  if (!za && !zb) return 0;\n  if (!za) return 1;\n  if (!zb) return -1;\n  return zb - za;\n};\n/**\n * Sort children by zIndex value\n *\n * @param {Object} node\n * @returns {Object} node\n */\n\n\nvar resolveZIndex = function resolveZIndex(node) {\n  if (!node.children) return node;\n  var sortedChildren = shouldSort(node) ? node.children.sort(sortZIndex) : node.children;\n  var children = sortedChildren.map(resolveZIndex);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar emojis = {};\nvar regex = emojiRegex();\n\nvar reflect = function reflect(promise) {\n  return function () {\n    return promise.apply(void 0, arguments).then(function (v) {\n      return v;\n    }, function (e) {\n      return e;\n    });\n  };\n}; // Returns a function to be able to mock resolveImage.\n\n\nvar makeFetchEmojiImage = function makeFetchEmojiImage() {\n  return reflect(resolveImage);\n};\n/**\n * When an emoji as no color, it might still have 2 parts,\n * the canonical emoji and an empty string.\n * ex.\n *   (no color) Array.from('❤️') => [\"❤\", \"️\"]\n *   (w/ color) Array.from('👍🏿') => [\"👍\", \"🏿\"]\n *\n * The empty string needs to be removed otherwise the generated\n * url will be incorect.\n */\n\n\nvar _removeNoColor = function _removeNoColor(x) {\n  return x !== '️';\n};\n\nvar getCodePoints = function getCodePoints(string) {\n  return Array.from(string).filter(_removeNoColor).map(function (char) {\n    return char.codePointAt(0).toString(16);\n  }).join('-');\n};\n\nvar buildEmojiUrl = function buildEmojiUrl(emoji, source) {\n  var url = source.url,\n      format = source.format;\n  return \"\" + url + getCodePoints(emoji) + \".\" + format;\n};\n\nvar fetchEmojis = function fetchEmojis(string, source) {\n  if (!source || !source.url) return [];\n  var promises = [];\n  var match;\n\n  var _loop = function _loop() {\n    var emoji = match[0];\n\n    if (!emojis[emoji] || emojis[emoji].loading) {\n      var emojiUrl = buildEmojiUrl(emoji, source);\n      emojis[emoji] = {\n        loading: true\n      };\n      var fetchEmojiImage = makeFetchEmojiImage();\n      promises.push(fetchEmojiImage({\n        uri: emojiUrl\n      }).then(function (image) {\n        emojis[emoji].loading = false;\n        emojis[emoji].data = image.data;\n      }));\n    }\n  };\n\n  while (match = regex.exec(string)) {\n    _loop();\n  }\n\n  return promises;\n};\nvar embedEmojis = function embedEmojis(fragments) {\n  var result = [];\n\n  for (var i = 0; i < fragments.length; i += 1) {\n    var fragment = fragments[i];\n    var match = void 0;\n    var lastIndex = 0;\n\n    while (match = regex.exec(fragment.string)) {\n      var _match = match,\n          index = _match.index;\n      var emoji = match[0];\n      var emojiSize = fragment.attributes.fontSize;\n      var chunk = fragment.string.slice(lastIndex, index + match[0].length); // If emoji image was found, we create a new fragment with the\n      // correct attachment and object substitution character;\n\n      if (emojis[emoji] && emojis[emoji].data) {\n        result.push({\n          string: chunk.replace(match, String.fromCharCode(0xfffc)),\n          attributes: _extends({}, fragment.attributes, {\n            attachment: {\n              width: emojiSize,\n              height: emojiSize,\n              yOffset: Math.floor(emojiSize * 0.1),\n              image: emojis[emoji].data\n            }\n          })\n        });\n      } else {\n        // If no emoji data, we just replace the emoji with a nodef char\n        result.push({\n          string: chunk.replace(match, String.fromCharCode(0)),\n          attributes: fragment.attributes\n        });\n      }\n\n      lastIndex = index + emoji.length;\n    }\n\n    if (lastIndex < fragment.string.length) {\n      result.push({\n        string: fragment.string.slice(lastIndex),\n        attributes: fragment.attributes\n      });\n    }\n  }\n\n  return result;\n};\n\n/**\n * Get image source\n *\n * @param {Object} image node\n * @returns {String | Object} image src\n */\nvar getSource = function getSource(node) {\n  var _node$props, _node$props2, _node$props3;\n\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.src) || ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.source) || ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.href);\n};\n\n/**\n * Resolves `src` to `@react-pdf/image` interface.\n *\n * Also it handles factories and async sources.\n *\n * @param {string | Object | Function} src\n * @returns {object} resolved src\n */\nvar resolveSource = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(src) {\n    var source;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(typeof src === 'function')) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 3;\n            return src();\n\n          case 3:\n            _context.t0 = _context.sent;\n            _context.next = 9;\n            break;\n\n          case 6:\n            _context.next = 8;\n            return src;\n\n          case 8:\n            _context.t0 = _context.sent;\n\n          case 9:\n            source = _context.t0;\n            return _context.abrupt(\"return\", typeof source === 'string' ? {\n              uri: source\n            } : source);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function resolveSource(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/**\n * Fetches image and append data to node\n * Ideally this fn should be immutable.\n *\n * @param {Object} node\n */\n\nvar fetchImage = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(node) {\n    var src, cache, source;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            src = getSource(node);\n            cache = node.props.cache;\n\n            if (src) {\n              _context.next = 5;\n              break;\n            }\n\n            console.warn(false, 'Image should receive either a \"src\" or \"source\" prop');\n            return _context.abrupt(\"return\");\n\n          case 5:\n            _context.prev = 5;\n            _context.next = 8;\n            return resolveSource(src);\n\n          case 8:\n            source = _context.sent;\n\n            if (source) {\n              _context.next = 11;\n              break;\n            }\n\n            throw new Error(\"Image's \\\"src\\\" or \\\"source\\\" prop returned \" + source);\n\n          case 11:\n            _context.next = 13;\n            return resolveImage(source, {\n              cache: cache\n            });\n\n          case 13:\n            node.image = _context.sent;\n            node.image.key = source.data ? source.data.toString() : source.uri;\n            _context.next = 21;\n            break;\n\n          case 17:\n            _context.prev = 17;\n            _context.t0 = _context[\"catch\"](5);\n            node.image = {\n              width: 0,\n              height: 0,\n              key: null\n            };\n            console.warn(_context.t0.message);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5, 17]]);\n  }));\n\n  return function fetchImage(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar isImage$2 = function isImage(node) {\n  return node.type === P.Image;\n};\n/**\n * Get all asset promises that need to be resolved\n *\n * @param {Object} root node\n * @returns {Array} asset promises\n */\n\n\nvar fetchAssets = function fetchAssets(fontStore, node) {\n  var _node$children;\n\n  var promises = [];\n  var listToExplore = ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.slice(0)) || [];\n  var emojiSource = fontStore ? fontStore.getEmojiSource() : null;\n\n  while (listToExplore.length > 0) {\n    var _n$style;\n\n    var n = listToExplore.shift();\n\n    if (isImage$2(n)) {\n      promises.push(fetchImage(n));\n    }\n\n    if (fontStore && (_n$style = n.style) !== null && _n$style !== void 0 && _n$style.fontFamily) {\n      promises.push(fontStore.load(n.style));\n    }\n\n    if (typeof n === 'string') {\n      promises.push.apply(promises, fetchEmojis(n, emojiSource));\n    }\n\n    if (typeof n.value === 'string') {\n      promises.push.apply(promises, fetchEmojis(n.value, emojiSource));\n    }\n\n    if (n.children) {\n      n.children.forEach(function (childNode) {\n        listToExplore.push(childNode);\n      });\n    }\n  }\n\n  return promises;\n};\n/**\n * Fetch image, font and emoji assets in parallel.\n * Layout process will not be resumed until promise resolves.\n *\n * @param {Object} root node\n * @param {Object} fontStore font store\n * @returns {Object} root node\n */\n\n\nvar resolveAssets = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(node, fontStore) {\n    var promises;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            promises = fetchAssets(fontStore, node);\n            _context.next = 3;\n            return Promise.all(promises);\n\n          case 3:\n            return _context.abrupt(\"return\", node);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function resolveAssets(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar isLink$1 = function isLink(node) {\n  return node.type === P.Link;\n};\n\nvar DEFAULT_LINK_STYLES = {\n  color: 'blue',\n  textDecoration: 'underline'\n};\n/**\n * Computes styles using stylesheet\n *\n * @param {Object} container\n * @param {Object} document node\n * @returns {Object} computed styles\n */\n\nvar computeStyle = function computeStyle(container, node) {\n  var baseStyle = node.style;\n\n  if (isLink$1(node)) {\n    baseStyle = Array.isArray(node.style) ? [DEFAULT_LINK_STYLES].concat(node.style) : [DEFAULT_LINK_STYLES, node.style];\n  }\n\n  return stylesheet(container, baseStyle);\n};\n/**\n * Resolves node styles\n *\n * @param {Object} container\n * @param {Object} document node\n * @returns {Object} node (and subnodes) with resolved styles\n */\n\n\nvar resolveNodeStyles = function resolveNodeStyles(container) {\n  return function (node) {\n    var style = computeStyle(container, node);\n    if (!node.children) return Object.assign({}, node, {\n      style: style\n    });\n    var children = node.children.map(resolveNodeStyles(container));\n    return Object.assign({}, node, {\n      style: style,\n      children: children\n    });\n  };\n};\n/**\n * Resolves page styles\n *\n * @param {Object} document page\n * @returns {Object} document page with resolved styles\n */\n\n\nvar resolvePageStyles = function resolvePageStyles(page) {\n  var _page$props;\n\n  var dpi = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.dpi) || 72;\n  var box = page.box || page.style;\n\n  var container = _extends({}, box, {\n    dpi: dpi\n  });\n\n  return resolveNodeStyles(container)(page);\n};\n/**\n * Resolves document styles\n *\n * @param {Object} document root\n * @returns {Object} document root with resolved styles\n */\n\n\nvar resolveStyles = function resolveStyles(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePageStyles);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar getTransformStyle = function getTransformStyle(s) {\n  return function (node) {\n    var _node$style, _node$style2;\n\n    return isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style[s]) ? '50%' : (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2[s];\n  };\n};\n/**\n * Get node origin\n *\n * @param {Object} node\n * @returns {Object} node origin\n */\n\n\nvar getOrigin = function getOrigin(node) {\n  if (!node.box) return {};\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top,\n      width = _node$box.width,\n      height = _node$box.height;\n  var transformOriginX = getTransformStyle('transformOriginX')(node);\n  var transformOriginY = getTransformStyle('transformOriginY')(node);\n  var percentX = matchPercent(transformOriginX);\n  var percentY = matchPercent(transformOriginY);\n  var offsetX = percentX ? width * percentX.percent : transformOriginX;\n  var offsetY = percentY ? height * percentY.percent : transformOriginY;\n  return {\n    left: left + offsetX,\n    top: top + offsetY\n  };\n};\n\n/**\n * Resolve node origin\n *\n * @param {Object} node\n * @returns {Object} node with origin attribute\n */\n\nvar resolveNodeOrigin = function resolveNodeOrigin(node) {\n  var origin = getOrigin(node);\n  var newNode = Object.assign({}, node, {\n    origin: origin\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(resolveNodeOrigin);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n/**\n * Resolve document origins\n *\n * @param {Object} document root\n * @returns {Object} documrnt root\n */\n\n\nvar resolveOrigin = function resolveOrigin(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolveNodeOrigin);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\n/* eslint-disable no-plusplus */\n\n/* eslint-disable prefer-const */\n\n/* eslint-disable prefer-destructuring */\nvar getBookmarkValue = function getBookmarkValue(title) {\n  return typeof title === 'string' ? {\n    title: title,\n    fit: false,\n    expanded: false\n  } : title;\n};\n\nvar resolveBookmarks = function resolveBookmarks(node) {\n  var refs = 0;\n  var children = (node.children || []).slice(0);\n  var listToExplore = children.map(function (value) {\n    return {\n      value: value,\n      parent: null\n    };\n  });\n\n  var _loop = function _loop() {\n    var _child$props;\n\n    var element = listToExplore.shift();\n    var child = element.value;\n    var parent = element.parent;\n\n    if ((_child$props = child.props) !== null && _child$props !== void 0 && _child$props.bookmark) {\n      var _parent;\n\n      var bookmark = getBookmarkValue(child.props.bookmark);\n      var ref = refs++;\n\n      var newHierarchy = _extends({\n        ref: ref,\n        parent: (_parent = parent) === null || _parent === void 0 ? void 0 : _parent.ref\n      }, bookmark);\n\n      child.props.bookmark = newHierarchy;\n      parent = newHierarchy;\n    }\n\n    if (child.children) {\n      child.children.forEach(function (childNode) {\n        listToExplore.push({\n          value: childNode,\n          parent: parent\n        });\n      });\n    }\n  };\n\n  while (listToExplore.length > 0) {\n    _loop();\n  }\n\n  return node;\n};\n\nvar VALID_ORIENTATIONS = ['portrait', 'landscape'];\n/**\n * Get page orientation. Defaults to portrait\n *\n * @param { Object } page object\n * @returns { String } page orientation\n */\n\nvar getOrientation = function getOrientation(page) {\n  var _page$props;\n\n  var value = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.orientation) || 'portrait';\n  return VALID_ORIENTATIONS.includes(value) ? value : 'portrait';\n};\n\n/**\n * Return true if page is landscape\n *\n * @param {Object} page instance\n * @returns {Boolean} is page landscape\n */\n\nvar isLandscape = function isLandscape(page) {\n  return getOrientation(page) === 'landscape';\n};\n\nvar PAGE_SIZES = {\n  '4A0': [4767.87, 6740.79],\n  '2A0': [3370.39, 4767.87],\n  A0: [2383.94, 3370.39],\n  A1: [1683.78, 2383.94],\n  A2: [1190.55, 1683.78],\n  A3: [841.89, 1190.55],\n  A4: [595.28, 841.89],\n  A5: [419.53, 595.28],\n  A6: [297.64, 419.53],\n  A7: [209.76, 297.64],\n  A8: [147.4, 209.76],\n  A9: [104.88, 147.4],\n  A10: [73.7, 104.88],\n  B0: [2834.65, 4008.19],\n  B1: [2004.09, 2834.65],\n  B2: [1417.32, 2004.09],\n  B3: [1000.63, 1417.32],\n  B4: [708.66, 1000.63],\n  B5: [498.9, 708.66],\n  B6: [354.33, 498.9],\n  B7: [249.45, 354.33],\n  B8: [175.75, 249.45],\n  B9: [124.72, 175.75],\n  B10: [87.87, 124.72],\n  C0: [2599.37, 3676.54],\n  C1: [1836.85, 2599.37],\n  C2: [1298.27, 1836.85],\n  C3: [918.43, 1298.27],\n  C4: [649.13, 918.43],\n  C5: [459.21, 649.13],\n  C6: [323.15, 459.21],\n  C7: [229.61, 323.15],\n  C8: [161.57, 229.61],\n  C9: [113.39, 161.57],\n  C10: [79.37, 113.39],\n  RA0: [2437.8, 3458.27],\n  RA1: [1729.13, 2437.8],\n  RA2: [1218.9, 1729.13],\n  RA3: [864.57, 1218.9],\n  RA4: [609.45, 864.57],\n  SRA0: [2551.18, 3628.35],\n  SRA1: [1814.17, 2551.18],\n  SRA2: [1275.59, 1814.17],\n  SRA3: [907.09, 1275.59],\n  SRA4: [637.8, 907.09],\n  EXECUTIVE: [521.86, 756.0],\n  FOLIO: [612.0, 936.0],\n  LEGAL: [612.0, 1008.0],\n  LETTER: [612.0, 792.0],\n  TABLOID: [792.0, 1224.0],\n  ID1: [153, 243]\n};\n/**\n * Transforms array into size object\n *\n * @param {Array} array\n * @returns {Object} size object with width and height\n */\n\nvar toSizeObject = function toSizeObject(v) {\n  return {\n    width: v[0],\n    height: v[1]\n  };\n};\n/**\n * Flip size object\n *\n * @param {Object} size object\n * @returns {Object} flipped size object\n */\n\n\nvar flipSizeObject = function flipSizeObject(v) {\n  return {\n    width: v.height,\n    height: v.width\n  };\n};\n/**\n * Adjust page size to passed DPI\n *\n * @param {Object} size object\n * @param {number} dpi\n * @returns {Object} adjusted size object\n */\n\n\nvar adjustDpi = function adjustDpi(v, dpi) {\n  return {\n    width: v.width ? v.width * dpi : v.width,\n    height: v.height ? v.height * dpi : v.height\n  };\n};\n/**\n * Returns size object from a given string\n *\n * @param {String} page size string\n * @returns {Object} size object with width and height\n */\n\n\nvar getStringSize = function getStringSize(v) {\n  return toSizeObject(PAGE_SIZES[v.toUpperCase()]);\n};\n/**\n * Returns size object from a single number\n *\n * @param {Number} page size number\n * @returns {Object} size object with width and height\n */\n\n\nvar getNumberSize = function getNumberSize(n) {\n  return toSizeObject([n]);\n};\n/**\n * Return page size in an object { width, height }\n *\n * @param {Object} page instance\n * @returns {Object} size object with width and height\n */\n\n\nvar getSize = function getSize(page) {\n  var _page$props, _page$props2;\n\n  var value = ((_page$props = page.props) === null || _page$props === void 0 ? void 0 : _page$props.size) || 'A4';\n  var dpi = parseFloat(((_page$props2 = page.props) === null || _page$props2 === void 0 ? void 0 : _page$props2.dpi) || 72);\n  var type = typeof value;\n  var size = value;\n\n  if (type === 'string') {\n    size = getStringSize(value);\n  } else if (Array.isArray(value)) {\n    size = toSizeObject(value);\n  } else if (type === 'number') {\n    size = getNumberSize(value);\n  }\n\n  size = adjustDpi(size, dpi / 72);\n  return isLandscape(page) ? flipSizeObject(size) : size;\n};\n\n/**\n * Resolves page size\n *\n * @param {Object} page\n * @returns {Object} page with resolved size in style attribute\n */\n\nvar resolvePageSize = function resolvePageSize(page) {\n  var size = getSize(page);\n  var style = flatten(page.style || {});\n  return _extends({}, page, {\n    style: _extends({}, style, size)\n  });\n};\n/**\n * Resolves page sizes\n *\n * @param {Object} document root\n * @returns {Object} document root with resolved page sizes\n */\n\nvar resolvePageSizes = function resolvePageSizes(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePageSize);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar isFixed = function isFixed(node) {\n  var _node$props;\n\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.fixed) === true;\n};\n\n/**\n * Get line index at given height\n *\n * @param {Object} node\n * @param {Number} height\n */\nvar lineIndexAtHeight = function lineIndexAtHeight(node, height) {\n  var y = 0;\n  if (!node.lines) return 0;\n\n  for (var i = 0; i < node.lines.length; i += 1) {\n    var line = node.lines[i];\n    if (y + line.box.height > height) return i;\n    y += line.box.height;\n  }\n\n  return node.lines.length;\n};\n\n/**\n * Get height for given text line index\n *\n * @param {Object} node\n * @param {Number} index\n */\nvar heightAtLineIndex = function heightAtLineIndex(node, index) {\n  var counter = 0;\n  if (!node.lines) return counter;\n\n  for (var i = 0; i < index; i += 1) {\n    var line = node.lines[i];\n    if (!line) break;\n    counter += line.box.height;\n  }\n\n  return counter;\n};\n\nvar getLineBreak = function getLineBreak(node, height) {\n  var top = get(node, ['box', 'top'], 0);\n  var widows = get(node, ['props', 'widows'], 2);\n  var orphans = get(node, ['props', 'orphans'], 2);\n  var linesQuantity = node.lines.length;\n  var slicedLine = lineIndexAtHeight(node, height - top);\n\n  if (slicedLine === 0) {\n    return 0;\n  }\n\n  if (linesQuantity < orphans) {\n    return linesQuantity;\n  }\n\n  if (slicedLine < orphans || linesQuantity < orphans + widows) {\n    return 0;\n  }\n\n  if (linesQuantity === orphans + widows) {\n    return orphans;\n  }\n\n  if (linesQuantity - slicedLine < widows) {\n    return linesQuantity - widows;\n  }\n\n  return slicedLine;\n}; // Also receives contentArea in case it's needed\n\n\nvar splitText = function splitText(node, height) {\n  var slicedLineIndex = getLineBreak(node, height);\n  var currentHeight = heightAtLineIndex(node, slicedLineIndex);\n  var nextHeight = node.box.height - currentHeight;\n  var current = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      height: currentHeight,\n      borderBottomWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginBottom: 0,\n      paddingBottom: 0,\n      borderBottomWidth: 0,\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0\n    }),\n    lines: node.lines.slice(0, slicedLineIndex)\n  });\n  var next = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      top: 0,\n      height: nextHeight,\n      borderTopWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginTop: 0,\n      paddingTop: 0,\n      borderTopWidth: 0,\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0\n    }),\n    lines: node.lines.slice(slicedLineIndex)\n  });\n  return [current, next];\n};\n\nvar getTop$1 = function getTop(node) {\n  var _node$box;\n\n  return ((_node$box = node.box) === null || _node$box === void 0 ? void 0 : _node$box.top) || 0;\n};\n\nvar hasFixedHeight = function hasFixedHeight(node) {\n  var _node$style;\n\n  return !isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.height);\n};\n\nvar splitNode = function splitNode(node, height) {\n  if (!node) return [null, null];\n  var nodeTop = getTop$1(node);\n  var current = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      borderBottomWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginBottom: 0,\n      paddingBottom: 0,\n      borderBottomWidth: 0,\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0\n    })\n  });\n  current.style.height = height - nodeTop;\n  var nextHeight = hasFixedHeight(node) ? node.box.height - (height - nodeTop) : null;\n  var next = Object.assign({}, node, {\n    box: _extends({}, node.box, {\n      top: 0,\n      borderTopWidth: 0\n    }),\n    style: _extends({}, node.style, {\n      marginTop: 0,\n      paddingTop: 0,\n      borderTopWidth: 0,\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0\n    })\n  });\n\n  if (nextHeight) {\n    next.style.height = nextHeight;\n  }\n\n  return [current, next];\n};\n\nvar NON_WRAP_TYPES = [P.Svg, P.Note, P.Image, P.Canvas];\n\nvar getWrap = function getWrap(node) {\n  var _node$props;\n\n  if (NON_WRAP_TYPES.includes(node.type)) return false;\n  return isNil((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.wrap) ? true : node.props.wrap;\n};\n\nvar getComputedPadding = function getComputedPadding(node, edge) {\n  var yogaNode = node._yogaNode;\n  return yogaNode ? yogaNode.getComputedPadding(edge) : null;\n};\n/**\n * Get Yoga computed paddings. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} paddings\n */\n\n\nvar getPadding = function getPadding(node) {\n  var style = node.style,\n      box = node.box;\n  var paddingTop = getComputedPadding(node, Yoga.EDGE_TOP) || (box === null || box === void 0 ? void 0 : box.paddingTop) || (style === null || style === void 0 ? void 0 : style.paddingTop) || (style === null || style === void 0 ? void 0 : style.paddingVertical) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingRight = getComputedPadding(node, Yoga.EDGE_RIGHT) || (box === null || box === void 0 ? void 0 : box.paddingRight) || (style === null || style === void 0 ? void 0 : style.paddingRight) || (style === null || style === void 0 ? void 0 : style.paddingHorizontal) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingBottom = getComputedPadding(node, Yoga.EDGE_BOTTOM) || (box === null || box === void 0 ? void 0 : box.paddingBottom) || (style === null || style === void 0 ? void 0 : style.paddingBottom) || (style === null || style === void 0 ? void 0 : style.paddingVertical) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  var paddingLeft = getComputedPadding(node, Yoga.EDGE_LEFT) || (box === null || box === void 0 ? void 0 : box.paddingLeft) || (style === null || style === void 0 ? void 0 : style.paddingLeft) || (style === null || style === void 0 ? void 0 : style.paddingHorizontal) || (style === null || style === void 0 ? void 0 : style.padding) || 0;\n  return {\n    paddingTop: paddingTop,\n    paddingRight: paddingRight,\n    paddingBottom: paddingBottom,\n    paddingLeft: paddingLeft\n  };\n};\n\nvar getWrapArea = function getWrapArea(page) {\n  var _page$style;\n\n  var _getPadding = getPadding(page),\n      paddingBottom = _getPadding.paddingBottom;\n\n  var height = (_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.height;\n  return height - paddingBottom;\n};\n\nvar getContentArea = function getContentArea(page) {\n  var _page$style;\n\n  var height = (_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.height;\n\n  var _getPadding = getPadding(page),\n      paddingTop = _getPadding.paddingTop,\n      paddingBottom = _getPadding.paddingBottom;\n\n  return height - paddingBottom - paddingTop;\n};\n\nvar _excluded = [\"style\", \"children\"];\n\nvar isString = function isString(value) {\n  return typeof value === 'string';\n};\n\nvar isNumber = function isNumber(value) {\n  return typeof value === 'number';\n};\n/**\n * Transforms a react element instance to internal element format\n *\n * @param {Object} React element\n * @returns {Object} parsed react element\n */\n\n\nvar createInstance = function createInstance(element) {\n  if (!element) return null;\n  if (isString(element) || isNumber(element)) return {\n    type: TextInstance,\n    value: \"\" + element\n  };\n  if (!isString(element.type)) return createInstance(element.type(element.props));\n\n  var type = element.type,\n      _element$props = element.props,\n      _element$props$style = _element$props.style,\n      style = _element$props$style === void 0 ? {} : _element$props$style,\n      _element$props$childr = _element$props.children,\n      children = _element$props$childr === void 0 ? [] : _element$props$childr,\n      props = _objectWithoutPropertiesLoose(_element$props, _excluded);\n\n  var nextChildren = castArray(children).map(createInstance);\n  return {\n    type: type,\n    style: style,\n    props: props,\n    box: {},\n    children: nextChildren\n  };\n};\n\n/**\n * Get many nodes height\n *\n * @param {Array} nodes\n * @return {number} nodes height\n */\nvar getNodesHeight = function getNodesHeight(nodes) {\n  var max = 0;\n  var min = Infinity;\n  if (!nodes || nodes.length === 0) return 0;\n\n  for (var i = 0; i < nodes.length; i += 1) {\n    var node = nodes[i];\n    min = Math.min(min, node.box.top);\n    max = Math.max(max, node.box.top + node.box.height);\n  }\n\n  return max - min;\n};\n\n/* eslint-disable no-continue */\n\nvar getBreak = function getBreak(node) {\n  var _node$props;\n\n  return ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.break) || false;\n};\n\nvar getMinPresenceAhead = function getMinPresenceAhead(node) {\n  var _node$props2;\n\n  return (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.minPresenceAhead;\n};\n\nvar defaultPresenceAhead = function defaultPresenceAhead(element) {\n  return function (height) {\n    return Math.min(element.box.height, height);\n  };\n};\n\nvar getPresenceAhead = function getPresenceAhead(elements, height) {\n  var result = 0;\n\n  for (var i = 0; i < elements.length; i += 1) {\n    var element = elements[i];\n    if (!element.box) continue;\n    var isElementInside = height > element.box.top;\n    var presenceAhead = element.props.presenceAhead || defaultPresenceAhead(element);\n\n    if (element && isElementInside) {\n      result += presenceAhead(height - element.box.top);\n    }\n  }\n\n  return result;\n};\n\nvar shouldBreak = function shouldBreak(child, futureElements, height) {\n  var minPresenceAhead = getMinPresenceAhead(child);\n  var presenceAhead = getPresenceAhead(futureElements, height);\n  var futureHeight = getNodesHeight(futureElements);\n  var shouldSplit = height < child.box.top + child.box.height;\n  var shouldWrap = getWrap(child);\n  return getBreak(child) || !shouldWrap && shouldSplit || minPresenceAhead < futureHeight && presenceAhead < minPresenceAhead;\n};\n\nvar IGNORABLE_CODEPOINTS = [8232, // LINE_SEPARATOR\n8233 // PARAGRAPH_SEPARATOR\n];\n\nvar buildSubsetForFont = function buildSubsetForFont(font) {\n  return IGNORABLE_CODEPOINTS.reduce(function (acc, codePoint) {\n    if (font && font.hasGlyphForCodePoint && font.hasGlyphForCodePoint(codePoint)) {\n      return acc;\n    }\n\n    return [].concat(acc, [String.fromCharCode(codePoint)]);\n  }, []);\n};\n\nvar ignoreChars = function ignoreChars(fragments) {\n  return fragments.map(function (fragment) {\n    var charSubset = buildSubsetForFont(fragment.attributes.font);\n    var subsetRegex = new RegExp(charSubset.join('|'));\n    return {\n      string: fragment.string.replace(subsetRegex, ''),\n      attributes: fragment.attributes\n    };\n  });\n};\n\nvar PREPROCESSORS = [ignoreChars, embedEmojis];\n\nvar isImage$1 = function isImage(node) {\n  return node.type === P.Image;\n};\n\nvar isTextInstance$2 = function isTextInstance(node) {\n  return node.type === P.TextInstance;\n};\n/**\n * Get textkit fragments of given node object\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Array} text fragments\n */\n\n\nvar getFragments = function getFragments(fontStore, instance, parentLink, level) {\n  var _instance$props, _instance$props2;\n\n  if (level === void 0) {\n    level = 0;\n  }\n\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$style = instance.style,\n      _instance$style$color = _instance$style.color,\n      color = _instance$style$color === void 0 ? 'black' : _instance$style$color,\n      _instance$style$fontF = _instance$style.fontFamily,\n      fontFamily = _instance$style$fontF === void 0 ? 'Helvetica' : _instance$style$fontF,\n      fontWeight = _instance$style.fontWeight,\n      fontStyle = _instance$style.fontStyle,\n      _instance$style$fontS = _instance$style.fontSize,\n      fontSize = _instance$style$fontS === void 0 ? 18 : _instance$style$fontS,\n      _instance$style$textA = _instance$style.textAlign,\n      textAlign = _instance$style$textA === void 0 ? 'left' : _instance$style$textA,\n      lineHeight = _instance$style.lineHeight,\n      textDecoration = _instance$style.textDecoration,\n      textDecorationColor = _instance$style.textDecorationColor,\n      textDecorationStyle = _instance$style.textDecorationStyle,\n      textTransform = _instance$style.textTransform,\n      letterSpacing = _instance$style.letterSpacing,\n      textIndent = _instance$style.textIndent,\n      opacity = _instance$style.opacity;\n  var opts = {\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  };\n  var obj = fontStore ? fontStore.getFont(opts) : null;\n  var font = obj ? obj.data : fontFamily; // Don't pass main background color to textkit. Will be rendered by the render package instead\n\n  var backgroundColor = level === 0 ? null : instance.style.backgroundColor;\n  var attributes = {\n    font: font,\n    color: color,\n    opacity: opacity,\n    fontSize: fontSize,\n    backgroundColor: backgroundColor,\n    align: textAlign,\n    indent: textIndent,\n    characterSpacing: letterSpacing,\n    strikeStyle: textDecorationStyle,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeColor: textDecorationColor || color,\n    underlineColor: textDecorationColor || color,\n    link: parentLink || ((_instance$props = instance.props) === null || _instance$props === void 0 ? void 0 : _instance$props.src) || ((_instance$props2 = instance.props) === null || _instance$props2 === void 0 ? void 0 : _instance$props2.href),\n    lineHeight: lineHeight ? lineHeight * fontSize : null\n  };\n\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n\n    if (isImage$1(child)) {\n      fragments.push({\n        string: String.fromCharCode(0xfffc),\n        attributes: _extends({}, attributes, {\n          attachment: {\n            width: child.style.width || fontSize,\n            height: child.style.height || fontSize,\n            image: child.image.data\n          }\n        })\n      });\n    } else if (isTextInstance$2(child)) {\n      fragments.push({\n        string: transformText(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      var _fragments;\n\n      (_fragments = fragments).push.apply(_fragments, getFragments(fontStore, child, attributes.link, level + 1));\n    }\n  }\n\n  for (var _i = 0; _i < PREPROCESSORS.length; _i += 1) {\n    var preprocessor = PREPROCESSORS[_i];\n    fragments = preprocessor(fragments);\n  }\n\n  return fragments;\n};\n/**\n * Get textkit attributed string from text node\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Object} attributed string\n */\n\n\nvar getAttributedString = function getAttributedString(fontStore, instance) {\n  var fragments = getFragments(fontStore, instance);\n  return fromFragments(fragments);\n};\n\nvar engines = {\n  linebreaker: linebreaker,\n  justification: justification,\n  textDecoration: decorationEngine,\n  scriptItemizer: scriptItemizer,\n  wordHyphenation: wordHyphenation,\n  fontSubstitution: fontSubstitution\n};\nvar engine = layoutEngine(engines);\n\nvar getMaxLines = function getMaxLines(node) {\n  var _node$style;\n\n  return (_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.maxLines;\n};\n\nvar getTextOverflow = function getTextOverflow(node) {\n  var _node$style2;\n\n  return (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.textOverflow;\n};\n/**\n * Get layout container for specific text node\n *\n * @param {Number} width\n * @param {Number} height\n * @param {Object} node\n * @returns {Object} layout container\n */\n\n\nvar getContainer = function getContainer(width, height, node) {\n  var maxLines = getMaxLines(node);\n  var textOverflow = getTextOverflow(node);\n  return {\n    x: 0,\n    y: 0,\n    width: width,\n    maxLines: maxLines,\n    height: height || Infinity,\n    truncateMode: textOverflow\n  };\n};\n/**\n * Get text layout options for specific text node\n *\n * @param {Object} node instance\n * @returns {Object} layout options\n */\n\n\nvar getLayoutOptions = function getLayoutOptions(fontStore, node) {\n  return {\n    hyphenationPenalty: node.props.hyphenationPenalty,\n    shrinkWhitespaceFactor: {\n      before: -0.5,\n      after: -0.5\n    },\n    hyphenationCallback: node.props.hyphenationCallback || (fontStore === null || fontStore === void 0 ? void 0 : fontStore.getHyphenationCallback()) || null\n  };\n};\n/**\n * Get text lines for given node\n *\n * @param {Object} node\n * @param {Number} container width\n * @param {Number} container height\n * @param {Number} fontStore font store\n * @returns {Array} layout lines\n */\n\n\nvar layoutText = function layoutText(node, width, height, fontStore) {\n  var attributedString = getAttributedString(fontStore, node);\n  var container = getContainer(width, height, node);\n  var options = getLayoutOptions(fontStore, node);\n  var lines = engine(attributedString, container, options);\n  return lines.reduce(function (acc, line) {\n    return [].concat(acc, line);\n  }, []);\n};\n\nvar isType$2 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\n\nvar isSvg$2 = isType$2(P.Svg);\nvar isText$3 = isType$2(P.Text);\n\nvar shouldIterate = function shouldIterate(node) {\n  return !isSvg$2(node) && !isText$3(node);\n};\n\nvar shouldLayoutText = function shouldLayoutText(node) {\n  return isText$3(node) && !node.lines;\n};\n/**\n * Performs text layout on text node if wasn't calculated before.\n * Text layout is usually performed on Yoga's layout process (via setMeasureFunc),\n * but we need to layout those nodes with fixed width and height.\n *\n * @param {Object} node\n * @returns {Object} layout node\n */\n\n\nvar resolveTextLayout = function resolveTextLayout(node, fontStore) {\n  if (shouldLayoutText(node)) {\n    var width = node.box.width - (node.box.paddingRight + node.box.paddingLeft);\n    var height = node.box.height - (node.box.paddingTop + node.box.paddingBottom); // eslint-disable-next-line no-param-reassign\n\n    node.lines = layoutText(node, width, height, fontStore);\n  }\n\n  if (shouldIterate(node)) {\n    if (!node.children) return node;\n\n    var mapChild = function mapChild(child) {\n      return resolveTextLayout(child, fontStore);\n    };\n\n    var children = node.children.map(mapChild);\n    return Object.assign({}, node, {\n      children: children\n    });\n  }\n\n  return node;\n};\n\nvar INHERITED_PROPERTIES = ['color', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'opacity', 'textDecoration', 'textTransform', 'lineHeight', 'textAlign', 'visibility', 'wordSpacing'];\n\nvar isSvg$1 = function isSvg(node) {\n  return node.type === P.Svg;\n}; // Merge style values\n\n\nvar mergeValues = function mergeValues(styleName, value, inheritedValue) {\n  switch (styleName) {\n    case 'textDecoration':\n      {\n        // merge not none and not false textDecoration values to one rule\n        return [inheritedValue, value].filter(function (v) {\n          return v && v !== 'none';\n        }).join(' ');\n      }\n\n    default:\n      return value;\n  }\n}; // Merge inherited and node styles\n\n\nvar merge = function merge(inheritedStyles, style) {\n  var mergedStyles = _extends({}, inheritedStyles);\n\n  Object.entries(style).forEach(function (_ref) {\n    var styleName = _ref[0],\n        value = _ref[1];\n    mergedStyles[styleName] = mergeValues(styleName, value, inheritedStyles[styleName]);\n  });\n  return mergedStyles;\n};\n/**\n * Merges styles with node\n *\n * @param {Object} style object\n * @param {Object} node\n * @returns {Object} node with styles merged\n */\n\n\nvar mergeStyles = function mergeStyles(inheritedStyles) {\n  return function (node) {\n    var style = merge(inheritedStyles, node.style || {});\n    return Object.assign({}, node, {\n      style: style\n    });\n  };\n};\n/**\n * Inherit style values from the root to the leafs\n *\n * @param {Object} document root\n * @returns {Object} document root with inheritance\n *\n */\n\n\nvar resolveInheritance = function resolveInheritance(node) {\n  if (isSvg$1(node)) return node;\n  if (!node.children) return node;\n  var inheritStyles = pick(INHERITED_PROPERTIES, node.style || {});\n  var resolveChild = compose(resolveInheritance, mergeStyles(inheritStyles));\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar getComputedMargin = function getComputedMargin(node, edge) {\n  var yogaNode = node._yogaNode;\n  return yogaNode ? yogaNode.getComputedMargin(edge) : null;\n};\n/**\n * Get Yoga computed magins. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} margins\n */\n\n\nvar getMargin = function getMargin(node) {\n  var style = node.style,\n      box = node.box;\n  var marginTop = getComputedMargin(node, Yoga.EDGE_TOP) || (box === null || box === void 0 ? void 0 : box.marginTop) || (style === null || style === void 0 ? void 0 : style.marginTop) || (style === null || style === void 0 ? void 0 : style.marginVertical) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginRight = getComputedMargin(node, Yoga.EDGE_RIGHT) || (box === null || box === void 0 ? void 0 : box.marginRight) || (style === null || style === void 0 ? void 0 : style.marginRight) || (style === null || style === void 0 ? void 0 : style.marginHorizontal) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginBottom = getComputedMargin(node, Yoga.EDGE_BOTTOM) || (box === null || box === void 0 ? void 0 : box.marginBottom) || (style === null || style === void 0 ? void 0 : style.marginBottom) || (style === null || style === void 0 ? void 0 : style.marginVertical) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  var marginLeft = getComputedMargin(node, Yoga.EDGE_LEFT) || (box === null || box === void 0 ? void 0 : box.marginLeft) || (style === null || style === void 0 ? void 0 : style.marginLeft) || (style === null || style === void 0 ? void 0 : style.marginHorizontal) || (style === null || style === void 0 ? void 0 : style.margin) || 0;\n  return {\n    marginTop: marginTop,\n    marginRight: marginRight,\n    marginBottom: marginBottom,\n    marginLeft: marginLeft\n  };\n};\n\n/**\n * Get Yoga computed position. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} position\n */\nvar getPosition = function getPosition(node) {\n  var yogaNode = node._yogaNode;\n  return {\n    top: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedTop()) || 0,\n    right: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedRight()) || 0,\n    bottom: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedBottom()) || 0,\n    left: (yogaNode === null || yogaNode === void 0 ? void 0 : yogaNode.getComputedLeft()) || 0\n  };\n};\n\nvar DEFAULT_DIMENSION = {\n  width: 0,\n  height: 0\n};\n/**\n * Get Yoga computed dimensions. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} dimensions\n */\n\nvar getDimension = function getDimension(node) {\n  var yogaNode = node._yogaNode;\n  if (!yogaNode) return DEFAULT_DIMENSION;\n  return {\n    width: yogaNode.getComputedWidth(),\n    height: yogaNode.getComputedHeight()\n  };\n};\n\nvar getComputedBorder = function getComputedBorder(yogaNode, edge) {\n  return yogaNode ? yogaNode.getComputedBorder(edge) : 0;\n};\n/**\n * Get Yoga computed border width. Zero otherwise\n *\n * @param {Object} node\n * @return {Object} border widths\n */\n\n\nvar getBorderWidth = function getBorderWidth(node) {\n  var yogaNode = node._yogaNode;\n  return {\n    borderTopWidth: getComputedBorder(yogaNode, Yoga.EDGE_TOP),\n    borderRightWidth: getComputedBorder(yogaNode, Yoga.EDGE_RIGHT),\n    borderBottomWidth: getComputedBorder(yogaNode, Yoga.EDGE_BOTTOM),\n    borderLeftWidth: getComputedBorder(yogaNode, Yoga.EDGE_LEFT)\n  };\n};\n\n/**\n * Set display attribute to node's Yoga instance\n *\n * @param {String} display\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setDisplay = function setDisplay(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (yogaNode) {\n      yogaNode.setDisplay(value === 'none' ? Yoga.DISPLAY_NONE : Yoga.DISPLAY_FLEX);\n    }\n\n    return node;\n  };\n};\n\nvar OVERFLOW = {\n  hidden: Yoga.OVERFLOW_HIDDEN,\n  scroll: Yoga.OVERFLOW_SCROLL\n};\n/**\n * Set overflow attribute to node's Yoga instance\n *\n * @param {String} overflow value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setOverflow = function setOverflow(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (!isNil(value) && yogaNode) {\n      var overflow = OVERFLOW[value] || Yoga.OVERFLOW_VISIBLE;\n      yogaNode.setOverflow(overflow);\n    }\n\n    return node;\n  };\n};\n\nvar FLEX_WRAP = {\n  wrap: Yoga.WRAP_WRAP,\n  'wrap-reverse': Yoga.WRAP_WRAP_REVERSE\n};\n/**\n * Set flex wrap attribute to node's Yoga instance\n *\n * @param {String} flex wrap value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setFlexWrap = function setFlexWrap(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (yogaNode) {\n      var flexWrap = FLEX_WRAP[value] || Yoga.WRAP_NO_WRAP;\n      yogaNode.setFlexWrap(flexWrap);\n    }\n\n    return node;\n  };\n};\n\n/* eslint-disable no-unused-expressions */\n/**\n * Set generic yoga attribute to node's Yoga instance, handing `auto`, edges and percentage cases\n *\n * @param {String} property\n * @param {Number} edge\n * @param {any} value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setYogaValue = function setYogaValue(attr, edge) {\n  return function (value) {\n    return function (node) {\n      var yogaNode = node._yogaNode;\n\n      if (!isNil(value) && yogaNode) {\n        var hasEdge = !isNil(edge);\n        var fixedMethod = \"set\" + upperFirst(attr);\n        var autoMethod = fixedMethod + \"Auto\";\n        var percentMethod = fixedMethod + \"Percent\";\n        var percent = matchPercent(value);\n\n        if (percent && !yogaNode[percentMethod]) {\n          throw new Error(\"You can't pass percentage values to \" + attr + \" property\");\n        }\n\n        if (percent) {\n          if (hasEdge) {\n            var _yogaNode$percentMeth;\n\n            (_yogaNode$percentMeth = yogaNode[percentMethod]) === null || _yogaNode$percentMeth === void 0 ? void 0 : _yogaNode$percentMeth.call(yogaNode, edge, percent.value);\n          } else {\n            var _yogaNode$percentMeth2;\n\n            (_yogaNode$percentMeth2 = yogaNode[percentMethod]) === null || _yogaNode$percentMeth2 === void 0 ? void 0 : _yogaNode$percentMeth2.call(yogaNode, percent.value);\n          }\n        } else if (value === 'auto') {\n          if (hasEdge) {\n            var _yogaNode$autoMethod;\n\n            (_yogaNode$autoMethod = yogaNode[autoMethod]) === null || _yogaNode$autoMethod === void 0 ? void 0 : _yogaNode$autoMethod.call(yogaNode, edge);\n          } else if (attr === 'flexBasis') {\n            // YogaNode.setFlexBasisAuto is missing (#766)\n            yogaNode.setFlexBasis(Yoga.UNIT_AUTO);\n          } else {\n            var _yogaNode$autoMethod2;\n\n            (_yogaNode$autoMethod2 = yogaNode[autoMethod]) === null || _yogaNode$autoMethod2 === void 0 ? void 0 : _yogaNode$autoMethod2.call(yogaNode);\n          }\n        } else if (hasEdge) {\n          var _yogaNode$fixedMethod;\n\n          (_yogaNode$fixedMethod = yogaNode[fixedMethod]) === null || _yogaNode$fixedMethod === void 0 ? void 0 : _yogaNode$fixedMethod.call(yogaNode, edge, value);\n        } else {\n          var _yogaNode$fixedMethod2;\n\n          (_yogaNode$fixedMethod2 = yogaNode[fixedMethod]) === null || _yogaNode$fixedMethod2 === void 0 ? void 0 : _yogaNode$fixedMethod2.call(yogaNode, value);\n        }\n      }\n\n      return node;\n    };\n  };\n};\n\n/**\n * Set flex grow attribute to node's Yoga instance\n *\n * @param {Number} flex grow value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setFlexGrow = function setFlexGrow(value) {\n  return function (node) {\n    return setYogaValue('flexGrow')(value || 0)(node);\n  };\n};\n\n/**\n * Set flex basis attribute to node's Yoga instance\n *\n * @param {Number} flex basis value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setFlexBasis = setYogaValue('flexBasis');\n\nvar ALIGN = {\n  'flex-start': Yoga.ALIGN_FLEX_START,\n  center: Yoga.ALIGN_CENTER,\n  'flex-end': Yoga.ALIGN_FLEX_END,\n  stretch: Yoga.ALIGN_STRETCH,\n  baseline: Yoga.ALIGN_BASELINE,\n  'space-between': Yoga.ALIGN_SPACE_BETWEEN,\n  'space-around': Yoga.ALIGN_SPACE_AROUND\n};\n/**\n * Set generic align attribute to node's Yoga instance\n *\n * @param {String} specific align property\n * @param {String} align value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setAlign = function setAlign(attr) {\n  return function (value) {\n    return function (node) {\n      var yogaNode = node._yogaNode;\n      var defaultValue = attr === 'items' ? Yoga.ALIGN_STRETCH : Yoga.ALIGN_AUTO;\n\n      if (yogaNode) {\n        var align = ALIGN[value] || defaultValue;\n        yogaNode[\"setAlign\" + upperFirst(attr)](align);\n      }\n\n      return node;\n    };\n  };\n};\n\n/**\n * Set align self attribute to node's Yoga instance\n *\n * @param {String} align value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setAlignSelf = setAlign('self');\n\n/**\n * Set align items attribute to node's Yoga instance\n *\n * @param {String} align value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setAlignItems = setAlign('items');\n\n/**\n * Set flex shrink attribute to node's Yoga instance\n *\n * @param {Number} flex shrink value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setFlexShrink = function setFlexShrink(value) {\n  return function (node) {\n    return setYogaValue('flexShrink')(value || 1)(node);\n  };\n};\n\n/**\n * Set aspect ratio attribute to node's Yoga instance\n *\n * @param {Number} ratio\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setAspectRatio = function setAspectRatio(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (!isNil(value) && yogaNode) {\n      yogaNode.setAspectRatio(value);\n    }\n\n    return node;\n  };\n};\n\n/**\n * Set align content attribute to node's Yoga instance\n *\n * @param {String} align value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setAlignContent = setAlign('content');\n\n/**\n * Set position type attribute to node's Yoga instance\n *\n * @param {String} position type\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionType = function setPositionType(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (!isNil(value) && yogaNode) {\n      yogaNode.setPositionType(value === 'absolute' ? Yoga.POSITION_TYPE_ABSOLUTE : Yoga.POSITION_TYPE_RELATIVE);\n    }\n\n    return node;\n  };\n};\n\nvar FLEX_DIRECTIONS = {\n  row: Yoga.FLEX_DIRECTION_ROW,\n  'row-reverse': Yoga.FLEX_DIRECTION_ROW_REVERSE,\n  'column-reverse': Yoga.FLEX_DIRECTION_COLUMN_REVERSE\n};\n/**\n * Set flex direction attribute to node's Yoga instance\n *\n * @param {String} flex direction value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setFlexDirection = function setFlexDirection(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (yogaNode) {\n      var flexDirection = FLEX_DIRECTIONS[value] || Yoga.FLEX_DIRECTION_COLUMN;\n      yogaNode.setFlexDirection(flexDirection);\n    }\n\n    return node;\n  };\n};\n\nvar JUSTIFY_CONTENT = {\n  center: Yoga.JUSTIFY_CENTER,\n  'flex-end': Yoga.JUSTIFY_FLEX_END,\n  'space-between': Yoga.JUSTIFY_SPACE_BETWEEN,\n  'space-around': Yoga.JUSTIFY_SPACE_AROUND,\n  'space-evenly': Yoga.JUSTIFY_SPACE_EVENLY\n};\n/**\n * Set justify content attribute to node's Yoga instance\n *\n * @param {String} justify content value\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setJustifyContent = function setJustifyContent(value) {\n  return function (node) {\n    var yogaNode = node._yogaNode;\n\n    if (!isNil(value) && yogaNode) {\n      var justifyContent = JUSTIFY_CONTENT[value] || Yoga.JUSTIFY_FLEX_START;\n      yogaNode.setJustifyContent(justifyContent);\n    }\n\n    return node;\n  };\n};\n\n/**\n * Set margin top attribute to node's Yoga instance\n *\n * @param {Number} margin top\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMarginTop = setYogaValue('margin', Yoga.EDGE_TOP);\n/**\n * Set margin right attribute to node's Yoga instance\n *\n * @param {Number} margin right\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMarginRight = setYogaValue('margin', Yoga.EDGE_RIGHT);\n/**\n * Set margin bottom attribute to node's Yoga instance\n *\n * @param {Number} margin bottom\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMarginBottom = setYogaValue('margin', Yoga.EDGE_BOTTOM);\n/**\n * Set margin left attribute to node's Yoga instance\n *\n * @param {Number} margin left\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMarginLeft = setYogaValue('margin', Yoga.EDGE_LEFT);\n\n/**\n * Set padding top attribute to node's Yoga instance\n *\n * @param {Number} padding top\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPaddingTop = setYogaValue('padding', Yoga.EDGE_TOP);\n/**\n * Set padding right attribute to node's Yoga instance\n *\n * @param {Number} padding right\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPaddingRight = setYogaValue('padding', Yoga.EDGE_RIGHT);\n/**\n * Set padding bottom attribute to node's Yoga instance\n *\n * @param {Number} padding bottom\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPaddingBottom = setYogaValue('padding', Yoga.EDGE_BOTTOM);\n/**\n * Set padding left attribute to node's Yoga instance\n *\n * @param {Number} padding left\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPaddingLeft = setYogaValue('padding', Yoga.EDGE_LEFT);\n\n/**\n * Set border top attribute to node's Yoga instance\n *\n * @param {Number} border top width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setBorderTop = setYogaValue('border', Yoga.EDGE_TOP);\n/**\n * Set border right attribute to node's Yoga instance\n *\n * @param {Number} border right width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setBorderRight = setYogaValue('border', Yoga.EDGE_RIGHT);\n/**\n * Set border bottom attribute to node's Yoga instance\n *\n * @param {Number} border bottom width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setBorderBottom = setYogaValue('border', Yoga.EDGE_BOTTOM);\n/**\n * Set border left attribute to node's Yoga instance\n *\n * @param {Number} border left width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setBorderLeft = setYogaValue('border', Yoga.EDGE_LEFT);\n\n/**\n * Set position top attribute to node's Yoga instance\n *\n * @param {Number} position top\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionTop = setYogaValue('position', Yoga.EDGE_TOP);\n/**\n * Set position right attribute to node's Yoga instance\n *\n * @param {Number} position right\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionRight = setYogaValue('position', Yoga.EDGE_RIGHT);\n/**\n * Set position bottom attribute to node's Yoga instance\n *\n * @param {Number} position bottom\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionBottom = setYogaValue('position', Yoga.EDGE_BOTTOM);\n/**\n * Set position left attribute to node's Yoga instance\n *\n * @param {Number} position left\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setPositionLeft = setYogaValue('position', Yoga.EDGE_LEFT);\n\n/**\n * Set width to node's Yoga instance\n *\n * @param {Number} width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setWidth = setYogaValue('width');\n/**\n * Set min width to node's Yoga instance\n *\n * @param {Number} min width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMinWidth = setYogaValue('minWidth');\n/**\n * Set max width to node's Yoga instance\n *\n * @param {Number} max width\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMaxWidth = setYogaValue('maxWidth');\n/**\n * Set height to node's Yoga instance\n *\n * @param {Number} height\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setHeight = setYogaValue('height');\n/**\n * Set min height to node's Yoga instance\n *\n * @param {Number} min height\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMinHeight = setYogaValue('minHeight');\n/**\n * Set max height to node's Yoga instance\n *\n * @param {Number} max height\n * @param {Object} node instance\n * @return {Object} node instance\n */\n\nvar setMaxHeight = setYogaValue('maxHeight');\n\nvar getAspectRatio = function getAspectRatio(viewbox) {\n  if (!viewbox) return null;\n  return (viewbox.maxX - viewbox.minX) / (viewbox.maxY - viewbox.minY);\n};\n/**\n * Yoga svg measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Number} width\n * @param {Number} widthMode\n * @param {Number} height\n * @param {Number} heightMode\n * @returns {Object} canvas width and height\n */\n\n\nvar measureCanvas$1 = function measureCanvas(page, node) {\n  return function (width, widthMode, height, heightMode) {\n    var aspectRatio = getAspectRatio(node.props.viewBox) || 1;\n\n    if (widthMode === Yoga.MEASURE_MODE_EXACTLY || widthMode === Yoga.MEASURE_MODE_AT_MOST) {\n      return {\n        width: width,\n        height: width / aspectRatio\n      };\n    }\n\n    if (heightMode === Yoga.MEASURE_MODE_EXACTLY) {\n      return {\n        width: height * aspectRatio\n      };\n    }\n\n    return {};\n  };\n};\n\n/**\n * Get lines width (if any)\n *\n * @param {Object} node\n * @returns {Number} lines width\n */\n\nvar linesWidth = function linesWidth(node) {\n  if (!node.lines) return 0;\n  return Math.max.apply(Math, [0].concat(node.lines.map(function (line) {\n    return advanceWidth(line);\n  })));\n};\n\n/**\n * Get lines height (if any)\n *\n * @param {Object} node\n * @returns {Number} lines height\n */\nvar linesHeight = function linesHeight(node) {\n  if (!node.lines) return -1;\n  return node.lines.reduce(function (acc, line) {\n    return acc + line.box.height;\n  }, 0);\n};\n\n/* eslint-disable no-param-reassign */\nvar ALIGNMENT_FACTORS = {\n  center: 0.5,\n  right: 1\n};\n/**\n * Yoga text measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Number} width\n * @param {Number} widthMode\n * @param {Number} height\n * @param {Number} heightMode\n * @returns {Object} text width and height\n */\n\nvar measureText = function measureText(page, node, fontStore) {\n  return function (width, widthMode, height) {\n    if (widthMode === Yoga.MEASURE_MODE_EXACTLY) {\n      if (!node.lines) node.lines = layoutText(node, width, height, fontStore);\n      return {\n        height: linesHeight(node)\n      };\n    }\n\n    if (widthMode === Yoga.MEASURE_MODE_AT_MOST) {\n      var _node$style;\n\n      var alignFactor = ALIGNMENT_FACTORS[(_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.textAlign] || 0;\n\n      if (!node.lines) {\n        node.lines = layoutText(node, width, height, fontStore);\n        node.alignOffset = (width - linesWidth(node)) * alignFactor; // Compensate align in variable width containers\n      }\n\n      return {\n        height: linesHeight(node),\n        width: Math.min(width, linesWidth(node))\n      };\n    }\n\n    return {};\n  };\n};\n\n/**\n * Get image ratio\n *\n * @param {Object} image node\n * @returns {Number} image ratio\n */\nvar getRatio = function getRatio(node) {\n  var _node$image;\n\n  return (_node$image = node.image) !== null && _node$image !== void 0 && _node$image.data ? node.image.width / node.image.height : 1;\n};\n\n/**\n * Checks if page has auto height\n *\n * @param {Object} page\n * @returns {Boolean} is page height auto\n */\n\nvar isHeightAuto = function isHeightAuto(page) {\n  var _page$box;\n\n  return isNil((_page$box = page.box) === null || _page$box === void 0 ? void 0 : _page$box.height);\n};\n\nvar SAFETY_HEIGHT$1 = 10;\n/**\n * Yoga image measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Number} width\n * @param {Number} widthMode\n * @param {Number} height\n * @param {Number} heightMode\n * @returns {Object} image width and height\n */\n\nvar measureImage = function measureImage(page, node) {\n  return function (width, widthMode, height, heightMode) {\n    var imageRatio = getRatio(node);\n    var imageMargin = getMargin(node);\n    var pagePadding = getPadding(page);\n    var pageArea = isHeightAuto(page) ? Infinity : page.box.height - pagePadding.paddingTop - pagePadding.paddingBottom - imageMargin.marginTop - imageMargin.marginBottom - SAFETY_HEIGHT$1; // Skip measure if image data not present yet\n\n    if (!node.image) return {\n      width: 0,\n      height: 0\n    };\n\n    if (widthMode === Yoga.MEASURE_MODE_EXACTLY && heightMode === Yoga.MEASURE_MODE_UNDEFINED) {\n      var scaledHeight = width / imageRatio;\n      return {\n        height: Math.min(pageArea, scaledHeight)\n      };\n    }\n\n    if (heightMode === Yoga.MEASURE_MODE_EXACTLY && (widthMode === Yoga.MEASURE_MODE_AT_MOST || widthMode === Yoga.MEASURE_MODE_UNDEFINED)) {\n      return {\n        width: Math.min(height * imageRatio, width)\n      };\n    }\n\n    if (widthMode === Yoga.MEASURE_MODE_EXACTLY && heightMode === Yoga.MEASURE_MODE_AT_MOST) {\n      var _scaledHeight = width / imageRatio;\n\n      return {\n        height: Math.min(height, pageArea, _scaledHeight)\n      };\n    }\n\n    if (widthMode === Yoga.MEASURE_MODE_AT_MOST && heightMode === Yoga.MEASURE_MODE_AT_MOST) {\n      if (imageRatio > 1) {\n        return {\n          width: width,\n          height: Math.min(width / imageRatio, height)\n        };\n      }\n\n      return {\n        height: height,\n        width: Math.min(height * imageRatio, width)\n      };\n    }\n\n    return {\n      height: height,\n      width: width\n    };\n  };\n};\n\n/* eslint-disable no-param-reassign */\nvar SAFETY_HEIGHT = 10;\n\nvar getMax = function getMax(values) {\n  return Math.max.apply(Math, [-Infinity].concat(values));\n};\n/**\n * Helper object to predict canvas size\n * TODO: Implement remaining functions (as close as possible);\n */\n\n\nvar measureCtx = function measureCtx() {\n  var ctx = {};\n  var points = [];\n\n  var nil = function nil() {\n    return ctx;\n  };\n\n  var addPoint = function addPoint(x, y) {\n    return points.push([x, y]);\n  };\n\n  var moveTo = function moveTo() {\n    addPoint.apply(void 0, arguments);\n    return ctx;\n  };\n\n  var rect = function rect(x, y, w, h) {\n    addPoint(x, y);\n    addPoint(x + w, y);\n    addPoint(x, y + h);\n    addPoint(x + w, y + h);\n    return ctx;\n  };\n\n  var ellipse = function ellipse(x, y, rx, ry) {\n    ry = ry || rx;\n    addPoint(x - rx, y - ry);\n    addPoint(x + rx, y - ry);\n    addPoint(x + rx, y + ry);\n    addPoint(x - rx, y + ry);\n    return ctx;\n  };\n\n  var polygon = function polygon() {\n    points.push.apply(points, arguments);\n    return ctx;\n  }; // Change dimensions\n\n\n  ctx.rect = rect;\n  ctx.moveTo = moveTo;\n  ctx.lineTo = moveTo;\n  ctx.circle = ellipse;\n  ctx.polygon = polygon;\n  ctx.ellipse = ellipse;\n  ctx.roundedRect = rect; // To be implemented\n\n  ctx.text = nil;\n  ctx.path = nil;\n  ctx.lineWidth = nil;\n  ctx.bezierCurveTo = nil;\n  ctx.quadraticCurveTo = nil;\n  ctx.scale = nil;\n  ctx.rotate = nil;\n  ctx.translate = nil; // These don't change dimensions\n\n  ctx.dash = nil;\n  ctx.clip = nil;\n  ctx.save = nil;\n  ctx.fill = nil;\n  ctx.font = nil;\n  ctx.stroke = nil;\n  ctx.lineCap = nil;\n  ctx.opacity = nil;\n  ctx.restore = nil;\n  ctx.lineJoin = nil;\n  ctx.fontSize = nil;\n  ctx.fillColor = nil;\n  ctx.miterLimit = nil;\n  ctx.strokeColor = nil;\n  ctx.fillOpacity = nil;\n  ctx.strokeOpacity = nil;\n  ctx.linearGradient = nil;\n  ctx.radialGradient = nil;\n\n  ctx.getWidth = function () {\n    return getMax(points.map(function (p) {\n      return p[0];\n    }));\n  };\n\n  ctx.getHeight = function () {\n    return getMax(points.map(function (p) {\n      return p[1];\n    }));\n  };\n\n  return ctx;\n};\n/**\n * Yoga canvas measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Number} width\n * @param {Number} widthMode\n * @param {Number} height\n * @param {Number} heightMode\n * @returns {Object} canvas width and height\n */\n\n\nvar measureCanvas = function measureCanvas(page, node) {\n  return function () {\n    var imageMargin = getMargin(node);\n    var pagePadding = getPadding(page);\n    var pageArea = isHeightAuto(page) ? Infinity : page.box.height - pagePadding.paddingTop - pagePadding.paddingBottom - imageMargin.marginTop - imageMargin.marginBottom - SAFETY_HEIGHT;\n    var ctx = measureCtx();\n    node.props.paint(ctx);\n    var width = ctx.getWidth();\n    var height = Math.min(pageArea, ctx.getHeight());\n    return {\n      height: height,\n      width: width\n    };\n  };\n};\n\nvar YOGA_NODE = '_yogaNode';\nvar YOGA_CONFIG = Yoga.Config.create();\nYOGA_CONFIG.setPointScaleFactor(0);\n\nvar isType$1 = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\n\nvar isSvg = isType$1(P.Svg);\nvar isText$2 = isType$1(P.Text);\nvar isNote = isType$1(P.Note);\nvar isPage = isType$1(P.Page);\nvar isImage = isType$1(P.Image);\nvar isCanvas = isType$1(P.Canvas);\nvar isTextInstance$1 = isType$1(P.TextInstance);\n\nvar setNodeHeight = function setNodeHeight(node) {\n  var value = isPage(node) ? node.box.height : node.style.height;\n  return setHeight(value);\n};\n/**\n * Set styles valeus into yoga node before layout calculation\n *\n * @param {Object} node\n * @returns {Object} node\n */\n\n\nvar setYogaValues = function setYogaValues(node) {\n  compose(setNodeHeight(node), setWidth(node.style.width), setMinWidth(node.style.minWidth), setMaxWidth(node.style.maxWidth), setMinHeight(node.style.minHeight), setMaxHeight(node.style.maxHeight), setMarginTop(node.style.marginTop), setMarginRight(node.style.marginRight), setMarginBottom(node.style.marginBottom), setMarginLeft(node.style.marginLeft), setPaddingTop(node.style.paddingTop), setPaddingRight(node.style.paddingRight), setPaddingBottom(node.style.paddingBottom), setPaddingLeft(node.style.paddingLeft), setPositionType(node.style.position), setPositionTop(node.style.top), setPositionRight(node.style.right), setPositionBottom(node.style.bottom), setPositionLeft(node.style.left), setBorderTop(node.style.borderTopWidth), setBorderRight(node.style.borderRightWidth), setBorderBottom(node.style.borderBottomWidth), setBorderLeft(node.style.borderLeftWidth), setDisplay(node.style.display), setFlexDirection(node.style.flexDirection), setAlignSelf(node.style.alignSelf), setAlignContent(node.style.alignContent), setAlignItems(node.style.alignItems), setJustifyContent(node.style.justifyContent), setFlexWrap(node.style.flexWrap), setOverflow(node.style.overflow), setAspectRatio(node.style.aspectRatio), setFlexBasis(node.style.flexBasis), setFlexGrow(node.style.flexGrow), setFlexShrink(node.style.flexShrink))(node);\n};\n/**\n * Inserts child into parent' yoga node\n *\n * @param {Object} parent\n * @param {Object} node\n * @param {Object} node\n */\n\n\nvar insertYogaNodes = function insertYogaNodes(parent) {\n  return function (child) {\n    parent.insertChild(child[YOGA_NODE], parent.getChildCount());\n    return child;\n  };\n};\n\nvar setMeasureFunc = function setMeasureFunc(node, page, fontStore) {\n  var yogaNode = node[YOGA_NODE];\n\n  if (isText$2(node)) {\n    yogaNode.setMeasureFunc(measureText(page, node, fontStore));\n  }\n\n  if (isImage(node)) {\n    yogaNode.setMeasureFunc(measureImage(page, node));\n  }\n\n  if (isCanvas(node)) {\n    yogaNode.setMeasureFunc(measureCanvas(page, node));\n  }\n\n  if (isSvg(node)) {\n    yogaNode.setMeasureFunc(measureCanvas$1(page, node));\n  }\n\n  return node;\n};\n\nvar isLayoutElement = function isLayoutElement(node) {\n  return !isText$2(node) && !isNote(node) && !isSvg(node);\n};\n/**\n * Creates and add yoga node to document tree\n * Handles measure function for text and image nodes\n *\n * @param {Object} node\n * @returns {Object} node with appended yoga node\n */\n\n\nvar createYogaNodes = function createYogaNodes(page, fontStore) {\n  return function (node) {\n    var yogaNode = Yoga.Node.createWithConfig(YOGA_CONFIG);\n    var result = Object.assign({}, node);\n    result[YOGA_NODE] = yogaNode;\n    setYogaValues(result);\n\n    if (isLayoutElement(node) && node.children) {\n      var resolveChild = compose(insertYogaNodes(yogaNode), createYogaNodes(page, fontStore));\n      result.children = node.children.map(resolveChild);\n    }\n\n    setMeasureFunc(result, page, fontStore);\n    return result;\n  };\n};\n/**\n * Performs yoga calculation\n *\n * @param {Object} node\n * @returns {Object} node\n */\n\n\nvar calculateLayout = function calculateLayout(page) {\n  page[YOGA_NODE].calculateLayout();\n  return page;\n};\n/**\n * Saves Yoga layout result into 'box' attribute of node\n *\n * @param {Object} node\n * @returns {Object} node with box data\n */\n\n\nvar persistDimensions = function persistDimensions(node) {\n  if (isTextInstance$1(node)) return node;\n  var box = Object.assign(getPadding(node), getMargin(node), getBorderWidth(node), getPosition(node), getDimension(node));\n  var newNode = Object.assign({}, node, {\n    box: box\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(persistDimensions);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n/**\n * Removes yoga node from document tree\n *\n * @param {Object} node\n * @returns {Object} node without yoga node\n */\n\n\nvar destroyYogaNodes = function destroyYogaNodes(node) {\n  var newNode = Object.assign({}, node);\n  delete newNode[YOGA_NODE];\n  if (!node.children) return newNode;\n  var children = node.children.map(destroyYogaNodes);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n/**\n * Free yoga node from document tree\n *\n * @param {Object} node\n * @returns {Object} node without yoga node\n */\n\n\nvar freeYogaNodes = function freeYogaNodes(node) {\n  if (node[YOGA_NODE]) node[YOGA_NODE].freeRecursive();\n  return node;\n};\n/**\n * Calculates page object layout using Yoga.\n * Takes node values from 'box' and 'style' attributes, and persist them back into 'box'\n * Destroy yoga values at the end.\n *\n * @param {Object} page object\n * @returns {Object} page object with correct 'box' layout attributes\n */\n\n\nvar resolvePageDimensions = function resolvePageDimensions(page, fontStore) {\n  if (isNil(page)) return null;\n  return compose(destroyYogaNodes, freeYogaNodes, persistDimensions, calculateLayout, createYogaNodes(page, fontStore))(page);\n};\n/**\n * Calculates root object layout using Yoga.\n *\n * @param {Object} root object\n * @returns {Object} root object with correct 'box' layout attributes\n */\n\nvar resolveDimensions = function resolveDimensions(node, fontStore) {\n  if (!node.children) return node;\n\n  var resolveChild = function resolveChild(child) {\n    return resolvePageDimensions(child, fontStore);\n  };\n\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar isText$1 = function isText(node) {\n  return node.type === P.Text;\n}; // Prevent splitting elements by low decimal numbers\n\n\nvar SAFTY_THRESHOLD = 0.001;\n\nvar assingChildren = function assingChildren(children, node) {\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar getTop = function getTop(node) {\n  var _node$box;\n\n  return ((_node$box = node.box) === null || _node$box === void 0 ? void 0 : _node$box.top) || 0;\n};\n\nvar allFixed = function allFixed(nodes) {\n  return nodes.every(isFixed);\n};\n\nvar isDynamic = function isDynamic(node) {\n  var _node$props;\n\n  return !isNil((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.render);\n};\n\nvar relayoutPage = compose(resolveTextLayout, resolveInheritance, resolvePageDimensions);\n\nvar warnUnavailableSpace = function warnUnavailableSpace(node) {\n  console.warn(\"Node of type \" + node.type + \" can't wrap between pages and it's bigger than available page height\");\n};\n\nvar splitNodes = function splitNodes(height, contentArea, nodes) {\n  var currentChildren = [];\n  var nextChildren = [];\n\n  for (var i = 0; i < nodes.length; i += 1) {\n    var child = nodes[i];\n    var futureNodes = nodes.slice(i + 1);\n    var futureFixedNodes = futureNodes.filter(isFixed);\n    var nodeTop = getTop(child);\n    var nodeHeight = child.box.height;\n    var isOutside = height <= nodeTop;\n    var shouldBreak$1 = shouldBreak(child, futureNodes, height);\n    var shouldSplit = height + SAFTY_THRESHOLD < nodeTop + nodeHeight;\n    var canWrap = getWrap(child);\n    var fitsInsidePage = nodeHeight <= contentArea;\n\n    if (isFixed(child)) {\n      nextChildren.push(child);\n      currentChildren.push(child);\n      continue;\n    }\n\n    if (isOutside) {\n      var box = Object.assign({}, child.box, {\n        top: child.box.top - height\n      });\n      var next = Object.assign({}, child, {\n        box: box\n      });\n      nextChildren.push(next);\n      continue;\n    }\n\n    if (!fitsInsidePage && !canWrap) {\n      currentChildren.push(child);\n      nextChildren.push.apply(nextChildren, futureNodes);\n      warnUnavailableSpace(child);\n      break;\n    }\n\n    if (shouldBreak$1) {\n      var _box = Object.assign({}, child.box, {\n        top: child.box.top - height\n      });\n\n      var props = Object.assign({}, child.props, {\n        wrap: true,\n        break: false\n      });\n\n      var _next = Object.assign({}, child, {\n        box: _box,\n        props: props\n      });\n\n      currentChildren.push.apply(currentChildren, futureFixedNodes);\n      nextChildren.push.apply(nextChildren, [_next].concat(futureNodes));\n      break;\n    }\n\n    if (shouldSplit) {\n      var _split = split(child, height, contentArea),\n          currentChild = _split[0],\n          nextChild = _split[1];\n\n      if (currentChild) currentChildren.push(currentChild);\n      if (nextChild) nextChildren.push(nextChild);\n      continue;\n    }\n\n    currentChildren.push(child);\n  }\n\n  return [currentChildren, nextChildren];\n};\n\nvar splitChildren = function splitChildren(height, contentArea, node) {\n  var children = node.children || [];\n  var availableHeight = height - getTop(node);\n  return splitNodes(availableHeight, contentArea, children);\n};\n\nvar splitView = function splitView(node, height, contentArea) {\n  var _splitNode = splitNode(node, height),\n      currentNode = _splitNode[0],\n      nextNode = _splitNode[1];\n\n  var _splitChildren = splitChildren(height, contentArea, node),\n      currentChilds = _splitChildren[0],\n      nextChildren = _splitChildren[1];\n\n  return [assingChildren(currentChilds, currentNode), assingChildren(nextChildren, nextNode)];\n};\n\nvar split = function split(node, height, contentArea) {\n  return isText$1(node) ? splitText(node, height) : splitView(node, height, contentArea);\n};\n\nvar shouldResolveDynamicNodes = function shouldResolveDynamicNodes(node) {\n  var children = node.children || [];\n  return isDynamic(node) || children.some(shouldResolveDynamicNodes);\n};\n\nvar resolveDynamicNodes = function resolveDynamicNodes(props, node) {\n  var isNodeDynamic = isDynamic(node); // Call render prop on dynamic nodes and append result to children\n\n  var resolveChildren = function resolveChildren(children) {\n    if (children === void 0) {\n      children = [];\n    }\n\n    if (isNodeDynamic) {\n      var res = node.props.render(props);\n      return [createInstance(res)].filter(Boolean);\n    }\n\n    return children.map(function (c) {\n      return resolveDynamicNodes(props, c);\n    });\n  }; // We reset dynamic text box so it can be computed again later on\n\n\n  var resetHeight = isNodeDynamic && isText$1(node);\n  var box = resetHeight ? _extends({}, node.box, {\n    height: 0\n  }) : node.box;\n  var children = resolveChildren(node.children);\n  var lines = isNodeDynamic ? null : node.lines;\n  return Object.assign({}, node, {\n    box: box,\n    lines: lines,\n    children: children\n  });\n};\n\nvar resolveDynamicPage = function resolveDynamicPage(props, page, fontStore) {\n  if (shouldResolveDynamicNodes(page)) {\n    var resolvedPage = resolveDynamicNodes(props, page);\n    return relayoutPage(resolvedPage, fontStore);\n  }\n\n  return page;\n};\n\nvar splitPage = function splitPage(page, pageNumber, fontStore) {\n  var wrapArea = getWrapArea(page);\n  var contentArea = getContentArea(page);\n  var dynamicPage = resolveDynamicPage({\n    pageNumber: pageNumber\n  }, page, fontStore);\n  var height = page.style.height;\n\n  var _splitNodes = splitNodes(wrapArea, contentArea, dynamicPage.children),\n      currentChilds = _splitNodes[0],\n      nextChilds = _splitNodes[1];\n\n  var relayout = function relayout(node) {\n    return relayoutPage(node, fontStore);\n  };\n\n  var currentBox = _extends({}, page.box, {\n    height: height\n  });\n\n  var currentPage = relayout(Object.assign({}, page, {\n    box: currentBox,\n    children: currentChilds\n  }));\n  if (nextChilds.length === 0 || allFixed(nextChilds)) return [currentPage, null];\n  var nextBox = omit('height', page.box);\n  var nextProps = omit('bookmark', page.props);\n  var nextPage = relayout(Object.assign({}, page, {\n    props: nextProps,\n    box: nextBox,\n    children: nextChilds\n  }));\n  return [currentPage, nextPage];\n};\n\nvar resolvePageIndices = function resolvePageIndices(fontStore, page, pageNumber, pages) {\n  var totalPages = pages.length;\n  var props = {\n    totalPages: totalPages,\n    pageNumber: pageNumber + 1,\n    subPageNumber: page.subPageNumber + 1,\n    subPageTotalPages: page.subPageTotalPages\n  };\n  return resolveDynamicPage(props, page, fontStore);\n};\n\nvar assocSubPageData = function assocSubPageData(subpages) {\n  return subpages.map(function (page, i) {\n    return _extends({}, page, {\n      subPageNumber: i,\n      subPageTotalPages: subpages.length\n    });\n  });\n};\n\nvar dissocSubPageData = function dissocSubPageData(page) {\n  return omit(['subPageNumber', 'subPageTotalPages'], page);\n};\n\nvar paginate = function paginate(page, pageNumber, fontStore) {\n  if (!page) return [];\n  var splittedPage = splitPage(page, pageNumber, fontStore);\n  var pages = [splittedPage[0]];\n  var nextPage = splittedPage[1];\n\n  while (nextPage !== null) {\n    splittedPage = splitPage(nextPage, pageNumber + pages.length, fontStore);\n    pages.push(splittedPage[0]);\n    nextPage = splittedPage[1];\n  }\n\n  return pages;\n};\n/**\n * Performs pagination. This is the step responsible of breaking the whole document\n * into pages following pagiation rules, such as `fixed`, `break` and dynamic nodes.\n *\n * @param {Object} node\n * @param {Object} fontStore font store\n * @returns {Object} layout node\n */\n\n\nvar resolvePagination = function resolvePagination(doc, fontStore) {\n  var pages = [];\n  var pageNumber = 1;\n\n  for (var i = 0; i < doc.children.length; i += 1) {\n    var page = doc.children[i];\n    var subpages = paginate(page, pageNumber, fontStore);\n    subpages = assocSubPageData(subpages);\n    pageNumber += subpages.length;\n    pages = pages.concat(subpages);\n  }\n\n  pages = pages.map(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return dissocSubPageData(resolvePageIndices.apply(void 0, [fontStore].concat(args)));\n  });\n  return assingChildren(pages, doc);\n};\n\n/*\n * Translates page percentage horizontal paddings in fixed ones\n *\n * @param {Object} page container\n * @param {String} padding value\n * @returns {Object} translated padding value\n */\n\nvar resolvePageHorizontalPadding = function resolvePageHorizontalPadding(container) {\n  return function (value) {\n    var match = matchPercent(value);\n    return match ? match.percent * container.width : value;\n  };\n};\n/**\n * Translates page percentage vertical paddings in fixed ones\n *\n * @param {Object} page container\n * @param {String} padding value\n * @returns {Object} translated padding value\n */\n\n\nvar resolvePageVerticalPadding = function resolvePageVerticalPadding(container) {\n  return function (value) {\n    var match = matchPercent(value);\n    return match ? match.percent * container.height : value;\n  };\n};\n/**\n * Translates page percentage paddings in fixed ones\n *\n * @param {Object} page\n * @returns {Object} page with fixed paddings\n */\n\n\nvar resolvePagePaddings = function resolvePagePaddings(page) {\n  var container = page.style;\n  var style = evolve({\n    paddingTop: resolvePageVerticalPadding(container),\n    paddingLeft: resolvePageHorizontalPadding(container),\n    paddingRight: resolvePageHorizontalPadding(container),\n    paddingBottom: resolvePageVerticalPadding(container)\n  }, page.style);\n  return Object.assign({}, page, {\n    style: style\n  });\n};\n/**\n * Translates all pages percentage paddings in fixed ones\n * This has to be computed from pages calculated size and not by Yoga\n * because at this point we didn't performed pagination yet.\n *\n * @param {Object} document root\n * @returns {Object} document root with translated page paddings\n */\n\n\nvar resolvePagesPaddings = function resolvePagesPaddings(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePagePaddings);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\n/**\n *\n * @param {Object} container width and height\n * @param {String | Number} value border radius value\n * @returns {Number} fixed border radius value\n */\n\nvar resolveRadius = function resolveRadius(container) {\n  return function (value) {\n    if (!value) return undefined;\n    var match = matchPercent(value);\n    return match ? match.percent * Math.min(container.width, container.height) : value;\n  };\n};\n/**\n * Transforms percent border radius into fixed values\n *\n * @param {Object} node\n * @returns {Object} node\n */\n\n\nvar resolvePercentRadius = function resolvePercentRadius(node) {\n  var style = evolve({\n    borderTopLeftRadius: resolveRadius(node.box),\n    borderTopRightRadius: resolveRadius(node.box),\n    borderBottomRightRadius: resolveRadius(node.box),\n    borderBottomLeftRadius: resolveRadius(node.box)\n  }, node.style || {});\n  var newNode = Object.assign({}, node, {\n    style: style\n  });\n  if (!node.children) return newNode;\n  var children = node.children.map(resolvePercentRadius);\n  return Object.assign({}, newNode, {\n    children: children\n  });\n};\n\n/**\n * Transform percent height into fixed\n *\n * @param {String | number} height\n * @return {number} height\n */\n\nvar transformHeight = function transformHeight(pageArea, height) {\n  var match = matchPercent(height);\n  return match ? match.percent * pageArea : height;\n};\n/**\n * Get page area (height minus paddings)\n *\n * @param {Object} page\n * @return {number} page area\n */\n\n\nvar getPageArea = function getPageArea(page) {\n  var _page$style, _page$style2;\n\n  var pageHeight = page.style.height;\n  var pagePaddingTop = ((_page$style = page.style) === null || _page$style === void 0 ? void 0 : _page$style.paddingTop) || 0;\n  var pagePaddingBottom = ((_page$style2 = page.style) === null || _page$style2 === void 0 ? void 0 : _page$style2.paddingBottom) || 0;\n  return pageHeight - pagePaddingTop - pagePaddingBottom;\n};\n/**\n * Transform node percent height to fixed\n *\n * @param {Object} page\n * @param {Object} node\n * @return {Object} transformed node\n */\n\n\nvar resolveNodePercentHeight = function resolveNodePercentHeight(page, node) {\n  var _page$style3, _node$style;\n\n  if (isNil((_page$style3 = page.style) === null || _page$style3 === void 0 ? void 0 : _page$style3.height)) return node;\n  if (isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.height)) return node;\n  var pageArea = getPageArea(page);\n  var height = transformHeight(pageArea, node.style.height);\n  var style = Object.assign({}, node.style, {\n    height: height\n  });\n  return Object.assign({}, node, {\n    style: style\n  });\n};\n/**\n * Transform page immediate children with percent height to fixed\n *\n * @param {Object} page\n * @return {Object} transformed page\n */\n\n\nvar resolvePagePercentHeight = function resolvePagePercentHeight(page) {\n  if (!page.children) return page;\n\n  var resolveChild = function resolveChild(child) {\n    return resolveNodePercentHeight(page, child);\n  };\n\n  var children = page.children.map(resolveChild);\n  return Object.assign({}, page, {\n    children: children\n  });\n};\n/**\n * Transform all page immediate children with percent height to fixed.\n * This is needed for computing correct dimensions on pre-pagination layout.\n *\n * @param {Object} document root\n * @return {Object} transformed document root\n */\n\n\nvar resolvePercentHeight = function resolvePercentHeight(root) {\n  if (!root.children) return root;\n  var children = root.children.map(resolvePagePercentHeight);\n  return Object.assign({}, root, {\n    children: children\n  });\n};\n\nvar isType = function isType(type) {\n  return function (node) {\n    return node.type === type;\n  };\n};\n\nvar isLink = isType(P.Link);\nvar isText = isType(P.Text);\nvar isTextInstance = isType(P.TextInstance);\n/**\n * Checks if node has render prop\n *\n * @param {Object} node\n * @returns {Boolean} has render prop?\n */\n\nvar hasRenderProp = function hasRenderProp(node) {\n  var _node$props;\n\n  return !!((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.render);\n};\n/**\n * Checks if node is text type (Text or TextInstance)\n *\n * @param {Object} node\n * @returns {Boolean} are all children text instances?\n */\n\n\nvar isTextType = function isTextType(node) {\n  return isText(node) || isTextInstance(node);\n};\n/**\n * Checks if is tet link that needs to be wrapped in Text\n *\n * @param {Object} node\n * @returns {Boolean} are all children text instances?\n */\n\n\nvar isTextLink = function isTextLink(node) {\n  var children = node.children || []; // Text string inside a Link\n\n  if (children.every(isTextInstance)) return true; // Text node inside a Link\n\n  if (children.every(isText)) return false;\n  return children.every(isTextType);\n};\n/**\n * Wraps node children inside Text node\n *\n * @param {Object} node\n * @returns {Boolean} node with intermediate Text child\n */\n\n\nvar wrapText = function wrapText(node) {\n  var textElement = {\n    type: P.Text,\n    props: {},\n    style: {},\n    box: {},\n    children: node.children\n  };\n  return Object.assign({}, node, {\n    children: [textElement]\n  });\n};\n\nvar transformLink = function transformLink(node) {\n  if (!isLink(node)) return node; // If has render prop substitute the instance by a Text, that will\n  // ultimately render the inline Link via the textkit PDF renderer.\n\n  if (hasRenderProp(node)) return Object.assign({}, node, {\n    type: P.Text\n  }); // If is a text link (either contains Text or TextInstalce), wrap it\n  // inside a Text element so styles are applied correctly\n\n  if (isTextLink(node)) return wrapText(node);\n  return node;\n};\n/**\n * Transforms Link layout to correctly render text and dynamic rendered links\n *\n * @param {Object} node\n * @returns {Object} node with link substitution\n */\n\n\nvar resolveLinkSubstitution = function resolveLinkSubstitution(node) {\n  if (!node.children) return node;\n  var resolveChild = compose(transformLink, resolveLinkSubstitution);\n  var children = node.children.map(resolveChild);\n  return Object.assign({}, node, {\n    children: children\n  });\n};\n\nvar layout = asyncCompose(resolveZIndex, resolveOrigin, resolvePagination, resolveTextLayout, resolvePercentRadius, resolveDimensions, resolveSvg, resolveAssets, resolveInheritance, resolvePercentHeight, resolvePagesPaddings, resolveStyles, resolveLinkSubstitution, resolveBookmarks, resolvePageSizes);\n\nexport { layout as default };\n"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,UAArB,EAAiCC,IAAjC,EAAuCC,IAAvC,EAA6CC,OAA7C,EAAsDC,SAAtD,EAAiEC,YAAjE,EAA+EC,MAA/E,EAAuFC,KAAvF,EAA8FC,GAA9F,EAAmGC,SAAnG,EAA8GC,IAA9G,EAAoHC,YAApH,QAAwI,gBAAxI;AACA,OAAO,KAAKC,CAAZ,MAAmB,uBAAnB;AACA,SAASC,YAAT,QAA6B,uBAA7B;AACA,OAAOC,UAAP,IAAqBC,cAArB,EAAqCC,gBAArC,QAA6D,uBAA7D;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,OAAOC,WAAP,MAAwB,4CAAxB;AACA,OAAOC,aAAP,MAA0B,8CAA1B;AACA,OAAOC,cAAP,MAA2B,+CAA3B;AACA,OAAOC,eAAP,MAA4B,gDAA5B;AACA,OAAOC,gBAAP,MAA6B,+CAA7B;AACA,OAAOC,aAAP,MAA0B,uDAA1B;AACA,OAAOC,YAAP,MAAyB,oCAAzB;AACA,SAASC,OAAT,QAAwB,mBAAxB;AACA,OAAOC,iBAAP,MAA8B,yCAA9B;AACA,OAAOC,mBAAP,MAAgC,4BAAhC;AACA,OAAOC,QAAP,MAAqB,gCAArB;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,OAAOC,YAAP,MAAyB,kBAAzB;AACA,OAAOC,OAAP,MAAoB,mCAApB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,OAAOC,6BAAP,MAA0C,qDAA1C;AACA,OAAOC,YAAP,MAAyB,sDAAzB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,aAAa,GAAG,SAASA,aAAT,CAAuBC,IAAvB,EAA6BC,cAA7B,EAA6C;EAC/D,QAAQA,cAAR;IACE,KAAK,WAAL;MACE,OAAOD,IAAI,CAACE,WAAL,EAAP;;IAEF,KAAK,WAAL;MACE,OAAOF,IAAI,CAACG,WAAL,EAAP;;IAEF,KAAK,YAAL;MACE,OAAOvC,UAAU,CAACoC,IAAD,CAAjB;;IAEF,KAAK,YAAL;MACE,OAAOrC,UAAU,CAACqC,IAAD,CAAjB;;IAEF;MACE,OAAOA,IAAP;EAdJ;AAgBD,CAjBD;;AAmBA,IAAII,YAAY,GAAG,aAAa,YAAY;EAC1C,SAASA,YAAT,CAAsBC,GAAtB,EAA2B;IACzB,KAAKC,IAAL,GAAYD,GAAZ;IACA,KAAKA,GAAL,GAAWhB,OAAO,CAACkB,IAAR,CAAa,IAAb,EAAmBF,GAAnB,CAAX;EACD;;EAED,IAAIG,MAAM,GAAGJ,YAAY,CAACK,SAA1B;;EAEAD,MAAM,CAACE,MAAP,GAAgB,SAASA,MAAT,CAAgBC,GAAhB,EAAqB;IACnC,OAAO,KAAKN,GAAL,CAASK,MAAT,CAAgBC,GAAhB,CAAP;EACD,CAFD;;EAIAH,MAAM,CAACI,MAAP,GAAgB,SAASA,MAAT,CAAgBD,GAAhB,EAAqB;IACnC,IAAIE,KAAK,GAAG,IAAZ;;IAEA,IAAIC,YAAY,GAAG,KAAKJ,MAAL,CAAYC,GAAZ,CAAnB;IAAA,IACII,OAAO,GAAGD,YAAY,CAAC,CAAD,CAD1B;IAAA,IAEIE,SAAS,GAAGF,YAAY,CAAC,CAAD,CAF5B;;IAIA,OAAO;MACLE,SAAS,EAAEA,SADN;MAELC,aAAa,EAAED,SAAS,CAACE,GAAV,CAAc,UAAUC,CAAV,EAAaC,CAAb,EAAgB;QAC3C,OAAOA,CAAP;MACD,CAFc,CAFV;MAKLC,MAAM,EAAEN,OAAO,CAACG,GAAR,CAAY,UAAUI,CAAV,EAAaF,CAAb,EAAgB;QAClC,IAAIG,KAAK,GAAGV,KAAK,CAACW,QAAN,CAAeC,QAAQ,CAACH,CAAD,EAAI,EAAJ,CAAvB,CAAZ;;QAEAC,KAAK,CAACzB,YAAN,GAAqBkB,SAAS,CAACI,CAAD,CAAT,CAAatB,YAAlC;QACA,OAAOyB,KAAP;MACD,CALO;IALH,CAAP;EAYD,CAnBD;;EAqBAf,MAAM,CAACkB,iBAAP,GAA2B,SAASA,iBAAT,CAA2BC,SAA3B,EAAsC;IAC/D,IAAIJ,KAAK,GAAG,KAAKC,QAAL,CAAcG,SAAd,CAAZ;IACAJ,KAAK,CAACzB,YAAN,GAAqB,GAArB;IACA,OAAOyB,KAAP;EACD,CAJD;;EAMAf,MAAM,CAACgB,QAAP,GAAkB,SAASA,QAAT,CAAkBI,EAAlB,EAAsB;IACtC,OAAO;MACLA,EAAE,EAAEA,EADC;MAELC,KAAK,EAAE,KAAKxB,GAFP;MAGLyB,UAAU,EAAE,CAACF,EAAD,CAHP;MAILG,UAAU,EAAE,KAJP;MAKLzB,IAAI,EAAE,KAAKD,GAAL,CAAS2B,IAAT,CAAcC,gBAAd,CAA+BL,EAA/B;IALD,CAAP;EAOD,CARD;;EAUApB,MAAM,CAAC0B,oBAAP,GAA8B,SAASA,oBAAT,CAA8BP,SAA9B,EAAyC;IACrE,OAAO,KAAKtB,GAAL,CAAS2B,IAAT,CAAcC,gBAAd,CAA+BN,SAA/B,MAA8C,SAArD;EACD,CAFD,CAEE;EAFF;;EAKAvC,YAAY,CAACgB,YAAD,EAAe,CAAC;IAC1B+B,GAAG,EAAE,QADqB;IAE1B/D,GAAG,EAAE,SAASA,GAAT,GAAe;MAClB,OAAO,GAAP;IACD,CAJyB,CAIxB;;EAJwB,CAAD,EAMxB;IACD+D,GAAG,EAAE,WADJ;IAED/D,GAAG,EAAE,SAASA,GAAT,GAAe;MAClB,QAAQ,KAAKkC,IAAb;QACE,KAAK,aAAL;QACA,KAAK,YAAL;QACA,KAAK,cAAL;QACA,KAAK,kBAAL;UACE,OAAO,GAAP;;QAEF,KAAK,SAAL;QACA,KAAK,cAAL;QACA,KAAK,iBAAL;QACA,KAAK,qBAAL;UACE,OAAO,GAAP;;QAEF;UACE,OAAO,GAAP;MAdJ;IAgBD,CAnBA,CAmBC;;EAnBD,CANwB,EA2BxB;IACD6B,GAAG,EAAE,SADJ;IAED/D,GAAG,EAAE,SAASA,GAAT,GAAe;MAClB,QAAQ,KAAKkC,IAAb;QACE,KAAK,aAAL;QACA,KAAK,YAAL;QACA,KAAK,cAAL;QACA,KAAK,kBAAL;UACE,OAAO,GAAP;;QAEF,KAAK,SAAL;QACA,KAAK,cAAL;QACA,KAAK,iBAAL;QACA,KAAK,qBAAL;UACE,OAAO,GAAP;;QAEF;UACE,OAAO,GAAP;MAdJ;IAgBD,CAnBA,CAmBC;;EAnBD,CA3BwB,EAgDxB;IACD6B,GAAG,EAAE,SADJ;IAED/D,GAAG,EAAE,SAASA,GAAT,GAAe;MAClB,QAAQ,KAAKkC,IAAb;QACE,KAAK,aAAL;QACA,KAAK,YAAL;QACA,KAAK,cAAL;QACA,KAAK,kBAAL;UACE,OAAO,CAAC,GAAR;;QAEF,KAAK,SAAL;QACA,KAAK,cAAL;QACA,KAAK,iBAAL;QACA,KAAK,qBAAL;UACE,OAAO,CAAC,GAAR;;QAEF;UACE,OAAO,CAAC,GAAR;MAdJ;IAgBD;EAnBA,CAhDwB,EAoExB;IACD6B,GAAG,EAAE,SADJ;IAED/D,GAAG,EAAE,SAASA,GAAT,GAAe;MAClB,OAAO,CAAP;IACD;EAJA,CApEwB,EAyExB;IACD+D,GAAG,EAAE,YADJ;IAED/D,GAAG,EAAE,SAASA,GAAT,GAAe;MAClB,OAAO,IAAP;IACD;EAJA,CAzEwB,CAAf,CAAZ;;EAgFA,OAAOgC,YAAP;AACD,CAvI+B,EAAhC;;AAyIA,IAAIgC,SAAS,GAAG,EAAhB;AACA,IAAIC,mBAAmB,GAAG,CAAC,GAAD,CAA1B;;AAEA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBC,IAArB,EAA2B;EAC3C,OAAOA,IAAI,CAACC,UAAL,CAAgBC,QAAhB,IAA4B,EAAnC;AACD,CAFD;;AAIA,IAAIC,eAAe,GAAG,SAASA,eAAT,CAAyBpC,IAAzB,EAA+B;EACnD,IAAI8B,SAAS,CAAC9B,IAAD,CAAb,EAAqB,OAAO8B,SAAS,CAAC9B,IAAD,CAAhB;EACrB,IAAI0B,IAAI,GAAG,IAAI5B,YAAJ,CAAiBE,IAAjB,CAAX;EACA8B,SAAS,CAAC9B,IAAD,CAAT,GAAkB0B,IAAlB;EACA,OAAOA,IAAP;AACD,CALD;;AAOA,IAAIW,eAAe,GAAG,SAASA,eAAT,GAA2B;EAC/C,OAAOD,eAAe,CAAC,WAAD,CAAtB;AACD,CAFD;;AAIA,IAAIE,oBAAoB,GAAG,SAASA,oBAAT,CAA8BjB,SAA9B,EAAyCK,IAAzC,EAA+C;EACxE,OAAO,CAACA,IAAD,IAAS,CAACK,mBAAmB,CAACQ,QAApB,CAA6BlB,SAA7B,CAAD,IAA4C,CAACK,IAAI,CAACE,oBAAL,CAA0BP,SAA1B,CAA7C,IAAqFgB,eAAe,GAAGT,oBAAlB,CAAuCP,SAAvC,CAArG;AACD,CAFD;;AAIA,IAAImB,gBAAgB,GAAG,SAASA,gBAAT,GAA4B;EACjD,OAAO,UAAUC,IAAV,EAAgB;IACrB,IAAIC,MAAM,GAAGD,IAAI,CAACC,MAAlB;IAAA,IACIC,IAAI,GAAGF,IAAI,CAACE,IADhB;IAEA,IAAIC,QAAQ,GAAG,IAAf;IACA,IAAIC,YAAY,GAAG,IAAnB;IACA,IAAIC,SAAS,GAAG,CAAhB;IACA,IAAIC,KAAK,GAAG,CAAZ;IACA,IAAIC,GAAG,GAAG,EAAV;;IAEA,KAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6B,IAAI,CAACM,MAAzB,EAAiCnC,CAAC,IAAI,CAAtC,EAAyC;MACvC,IAAIoC,GAAG,GAAGP,IAAI,CAAC7B,CAAD,CAAd;MACA,IAAIqC,WAAW,GAAG,OAAOD,GAAG,CAAChB,UAAJ,CAAeR,IAAtB,KAA+B,QAA/B,GAA0CU,eAAe,CAACc,GAAG,CAAChB,UAAJ,CAAeR,IAAhB,CAAzD,GAAiFwB,GAAG,CAAChB,UAAJ,CAAeR,IAAlH;;MAEA,IAAIgB,MAAM,CAACO,MAAP,KAAkB,CAAtB,EAAyB;QACvBD,GAAG,CAACI,IAAJ,CAAS;UACPC,KAAK,EAAE,CADA;UAEPC,GAAG,EAAE,CAFE;UAGPpB,UAAU,EAAE;YACVR,IAAI,EAAEyB;UADI;QAHL,CAAT;QAOA;MACD;;MAED,IAAII,KAAK,GAAGb,MAAM,CAACc,KAAP,CAAaN,GAAG,CAACG,KAAjB,EAAwBH,GAAG,CAACI,GAA5B,CAAZ;;MAEA,KAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACN,MAA1B,EAAkCQ,CAAC,IAAI,CAAvC,EAA0C;QACxC,IAAIC,IAAI,GAAGH,KAAK,CAACE,CAAD,CAAhB;QACA,IAAIpC,SAAS,GAAGqC,IAAI,CAACC,WAAL,EAAhB;QACA,IAAIC,cAAc,GAAGtB,oBAAoB,CAACjB,SAAD,EAAY8B,WAAZ,CAAzC,CAHwC,CAG2B;;QAEnE,IAAIzB,IAAI,GAAGkC,cAAc,GAAGvB,eAAe,EAAlB,GAAuBc,WAAhD;QACA,IAAIhB,QAAQ,GAAGH,WAAW,CAACkB,GAAD,CAA1B,CANwC,CAMP;;QAEjC,IAAIxB,IAAI,KAAKkB,QAAT,IAAqBT,QAAQ,KAAKU,YAAlC,IAAkDnB,IAAI,CAACmC,UAAL,KAAoBjB,QAAQ,CAACiB,UAAnF,EAA+F;UAC7F,IAAIjB,QAAJ,EAAc;YACZI,GAAG,CAACI,IAAJ,CAAS;cACPC,KAAK,EAAEP,SADA;cAEPQ,GAAG,EAAEP,KAFE;cAGPb,UAAU,EAAE;gBACVR,IAAI,EAAEkB,QADI;gBAEVkB,KAAK,EAAEjB,YAAY,GAAGD,QAAQ,CAACiB;cAFrB;YAHL,CAAT;UAQD;;UAEDjB,QAAQ,GAAGlB,IAAX;UACAmB,YAAY,GAAGV,QAAf;UACAW,SAAS,GAAGC,KAAZ;QACD;;QAEDA,KAAK,IAAIW,IAAI,CAACT,MAAd;MACD;IACF;;IAED,IAAIH,SAAS,GAAGJ,MAAM,CAACO,MAAvB,EAA+B;MAC7B,IAAIc,SAAS,GAAG/B,WAAW,CAACzE,IAAI,CAACoF,IAAD,CAAL,CAA3B;;MAEAK,GAAG,CAACI,IAAJ,CAAS;QACPC,KAAK,EAAEP,SADA;QAEPQ,GAAG,EAAEZ,MAAM,CAACO,MAFL;QAGPf,UAAU,EAAE;UACVR,IAAI,EAAEkB,QADI;UAEVkB,KAAK,EAAEC,SAAS,GAAGnB,QAAQ,CAACiB;QAFlB;MAHL,CAAT;IAQD;;IAED,OAAO;MACLnB,MAAM,EAAEA,MADH;MAELC,IAAI,EAAEK;IAFD,CAAP;EAID,CAxED;AAyED,CA1ED;;AA4EA,IAAIgB,gBAAgB,GAAG,SAASC,cAAT,CAAwBhC,IAAxB,EAA8B;EACnD,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAACC,YAAvB;AACD,CAFD;;AAIA,IAAIgG,SAAS,GAAG;EACd3F,WAAW,EAAEA,WADC;EAEdC,aAAa,EAAEA,aAFD;EAGdC,cAAc,EAAEA,cAHF;EAIdC,eAAe,EAAEA,eAJH;EAKd6D,gBAAgB,EAAEA,gBALJ;EAMd4B,cAAc,EAAExF;AANF,CAAhB;AAQA,IAAIyF,QAAQ,GAAG9F,YAAY,CAAC4F,SAAD,CAA3B;;AAEA,IAAIG,cAAc,GAAG,SAASC,YAAT,CAAsBC,SAAtB,EAAiCC,QAAjC,EAA2C;EAC9D,IAAI,CAACA,QAAL,EAAe,OAAO,CAAC;IACrB/B,MAAM,EAAE;EADa,CAAD,CAAP;EAGf,IAAIgC,SAAS,GAAG,EAAhB;EACA,IAAIC,eAAe,GAAGF,QAAQ,CAACG,KAA/B;EAAA,IACIC,oBAAoB,GAAGF,eAAe,CAACG,IAD3C;EAAA,IAEIA,IAAI,GAAGD,oBAAoB,KAAK,KAAK,CAA9B,GAAkC,OAAlC,GAA4CA,oBAFvD;EAAA,IAGIE,qBAAqB,GAAGJ,eAAe,CAACK,UAH5C;EAAA,IAIIA,UAAU,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,WAAnC,GAAiDA,qBAJlE;EAAA,IAKIE,UAAU,GAAGN,eAAe,CAACM,UALjC;EAAA,IAMIC,SAAS,GAAGP,eAAe,CAACO,SANhC;EAAA,IAOIC,qBAAqB,GAAGR,eAAe,CAACxC,QAP5C;EAAA,IAQIA,QAAQ,GAAGgD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBARvD;EAAA,IASIf,cAAc,GAAGO,eAAe,CAACP,cATrC;EAAA,IAUIgB,mBAAmB,GAAGT,eAAe,CAACS,mBAV1C;EAAA,IAWIC,mBAAmB,GAAGV,eAAe,CAACU,mBAX1C;EAAA,IAYIC,aAAa,GAAGX,eAAe,CAACW,aAZpC;EAAA,IAaIC,OAAO,GAAGZ,eAAe,CAACY,OAb9B;EAcA,IAAIC,GAAG,GAAGhB,SAAS,GAAGA,SAAS,CAACiB,OAAV,CAAkB;IACtCT,UAAU,EAAEA,UAD0B;IAEtCC,UAAU,EAAEA,UAF0B;IAGtCC,SAAS,EAAEA;EAH2B,CAAlB,CAAH,GAId,IAJL;EAKA,IAAIxD,IAAI,GAAG8D,GAAG,GAAGA,GAAG,CAACE,IAAP,GAAcV,UAA5B;EACA,IAAI9C,UAAU,GAAG;IACfR,IAAI,EAAEA,IADS;IAEf6D,OAAO,EAAEA,OAFM;IAGfpD,QAAQ,EAAEA,QAHK;IAIfwD,KAAK,EAAEb,IAJQ;IAKfc,cAAc,EAAEP,mBALD;IAMfQ,SAAS,EAAEzB,cAAc,KAAK,WAAnB,IAAkCA,cAAc,KAAK,wBAArD,IAAiFA,cAAc,KAAK,wBANhG;IAOf0B,cAAc,EAAEV,mBAAmB,IAAIN,IAPxB;IAQfiB,MAAM,EAAE3B,cAAc,KAAK,cAAnB,IAAqCA,cAAc,KAAK,wBAAxD,IAAoFA,cAAc,KAAK,wBARhG;IASf4B,WAAW,EAAEX,mBATE;IAUfY,WAAW,EAAEb,mBAAmB,IAAIN;EAVrB,CAAjB;;EAaA,KAAK,IAAIhE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2D,QAAQ,CAACyB,QAAT,CAAkBjD,MAAtC,EAA8CnC,CAAC,IAAI,CAAnD,EAAsD;IACpD,IAAIqF,KAAK,GAAG1B,QAAQ,CAACyB,QAAT,CAAkBpF,CAAlB,CAAZ;;IAEA,IAAIkD,gBAAgB,CAACmC,KAAD,CAApB,EAA6B;MAC3BzB,SAAS,CAACtB,IAAV,CAAe;QACbV,MAAM,EAAEjD,aAAa,CAAC0G,KAAK,CAACC,KAAP,EAAcd,aAAd,CADR;QAEbpD,UAAU,EAAEA;MAFC,CAAf;IAID,CALD,MAKO,IAAIiE,KAAJ,EAAW;MAChBzB,SAAS,CAACtB,IAAV,CAAeiD,KAAf,CAAqB3B,SAArB,EAAgCH,YAAY,CAAC4B,KAAD,CAA5C;IACD;EACF;;EAED,OAAOzB,SAAP;AACD,CApDD;;AAsDA,IAAI4B,qBAAqB,GAAG,SAASC,mBAAT,CAA6B/B,SAA7B,EAAwCC,QAAxC,EAAkD;EAC5E,OAAO5F,aAAa,CAACyF,cAAc,CAACE,SAAD,EAAYC,QAAZ,CAAf,CAApB;AACD,CAFD;;AAIA,IAAI+B,cAAc,GAAG,YAArB;AACA,IAAIC,sBAAsB,GAAG;EAC3BC,MAAM,EAAE,CAAC,GADkB;EAE3BC,KAAK,EAAE,CAAC;AAFmB,CAA7B;;AAKA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBpC,SAArB,EAAgC;EAChD,OAAO,UAAUvC,IAAV,EAAgB;IACrB,IAAI4E,WAAJ,EAAiBC,YAAjB;;IAEA,IAAIC,gBAAgB,GAAGT,qBAAqB,CAAC9B,SAAD,EAAYvC,IAAZ,CAA5C;IACA,IAAI+E,CAAC,GAAG,CAAC,CAACH,WAAW,GAAG5E,IAAI,CAAC2C,KAApB,MAA+B,IAA/B,IAAuCiC,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACG,CAAtF,KAA4F,CAApG;IACA,IAAIC,CAAC,GAAG,CAAC,CAACH,YAAY,GAAG7E,IAAI,CAAC2C,KAArB,MAAgC,IAAhC,IAAwCkC,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAACG,CAAzF,KAA+F,CAAvG;IACA,IAAIC,SAAS,GAAG;MACdF,CAAC,EAAEA,CADW;MAEdC,CAAC,EAAEA,CAFW;MAGdE,KAAK,EAAEX,cAHO;MAIdY,MAAM,EAAEZ;IAJM,CAAhB;IAMA,IAAIa,mBAAmB,GAAGpF,IAAI,CAAC2C,KAAL,CAAWyC,mBAAX,KAAmC7C,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAAC8C,sBAAV,EAAzF,KAAgI,IAA1J;IACA,IAAIC,aAAa,GAAG;MAClBF,mBAAmB,EAAEA,mBADH;MAElBZ,sBAAsB,EAAEA;IAFN,CAApB;IAIA,IAAIe,KAAK,GAAGnD,QAAQ,CAAC0C,gBAAD,EAAmBG,SAAnB,EAA8BK,aAA9B,CAAR,CAAqDE,IAArD,EAAZ;IACA,OAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;MAC7BuF,KAAK,EAAEA;IADsB,CAAxB,CAAP;EAGD,CArBD;AAsBD,CAvBD;;AAyBA,IAAII,YAAY,GAAG,SAASC,UAAT,CAAoBrD,SAApB,EAA+BvC,IAA/B,EAAqC;EACtD,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;EACpB,IAAIiE,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBgG,WAAW,CAACpC,SAAD,CAA7B,CAAf;EACA,OAAOkD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAND;;AAQA,IAAI4B,MAAM,GAAG,SAASA,MAAT,CAAgB7F,IAAhB,EAAsB;EACjC,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAAC6J,IAAvB;AACD,CAFD;;AAIA,IAAIC,OAAO,GAAG,SAASA,OAAT,CAAiB/F,IAAjB,EAAuB;EACnC,IAAIiE,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,IAAiB,EAAhC;EACA,IAAI+B,IAAI,GAAG/B,QAAQ,CAACgC,IAAT,CAAcJ,MAAd,KAAyB,EAApC;EACA,IAAIK,MAAM,GAAGF,IAAI,CAAC/B,QAAL,IAAiB,EAA9B;EACA,OAAOiC,MAAM,CAACC,MAAP,CAAc,UAAUC,GAAV,EAAejC,KAAf,EAAsB;IACzC,IAAIkC,YAAJ;;IAEA,IAAIhH,EAAE,GAAG,CAACgH,YAAY,GAAGlC,KAAK,CAACxB,KAAtB,MAAiC,IAAjC,IAAyC0D,YAAY,KAAK,KAAK,CAA/D,GAAmE,KAAK,CAAxE,GAA4EA,YAAY,CAAChH,EAAlG;IACA,IAAIA,EAAJ,EAAQ+G,GAAG,CAAC/G,EAAD,CAAH,GAAU8E,KAAV;IACR,OAAOiC,GAAP;EACD,CANM,EAMJ,EANI,CAAP;AAOD,CAXD;;AAaA,IAAIE,SAAS,GAAG,SAASA,SAAT,CAAmBtG,IAAnB,EAAyB;EACvC,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAAC6J,IAAvB;AACD,CAFD;;AAIA,IAAIS,UAAU,GAAG,SAASA,UAAT,CAAoBvG,IAApB,EAA0B;EACzC,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;EACpB,IAAIiE,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAAcuC,MAAd,CAAqBF,SAArB,CAAf;EACA,OAAOb,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAND;;AAQA,IAAIwC,SAAS,GAAG,4BAAhB;;AAEA,IAAIC,UAAU,GAAG,SAASA,UAAT,CAAoBV,IAApB,EAA0B7B,KAA1B,EAAiC;EAChD,IAAI,CAACA,KAAL,EAAY,OAAOwC,SAAP;EACZ,IAAI,CAACF,SAAS,CAACG,IAAV,CAAezC,KAAf,CAAL,EAA4B,OAAOA,KAAP;EAC5B,IAAI0C,KAAK,GAAG1C,KAAK,CAAC0C,KAAN,CAAYJ,SAAZ,CAAZ;EACA,OAAOT,IAAI,CAACa,KAAK,CAAC,CAAD,CAAN,CAAX;AACD,CALD;;AAOA,IAAIC,aAAa,GAAG,SAASA,aAAT,CAAuBd,IAAvB,EAA6B;EAC/C,OAAO,UAAUhG,IAAV,EAAgB;IACrB,IAAI4E,WAAJ,EAAiBC,YAAjB;;IAEA,IAAIhC,IAAI,GAAG6D,UAAU,CAACV,IAAD,EAAO,CAACpB,WAAW,GAAG5E,IAAI,CAAC2C,KAApB,MAA+B,IAA/B,IAAuCiC,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAAC/B,IAA5F,CAArB;IACA,IAAIkE,QAAQ,GAAGL,UAAU,CAACV,IAAD,EAAO,CAACnB,YAAY,GAAG7E,IAAI,CAAC2C,KAArB,MAAgC,IAAhC,IAAwCkC,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAACkC,QAA/F,CAAzB;IACA,IAAIpE,KAAK,GAAG8C,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAI,CAAC2C,KAAvB,EAA8B;MACxCE,IAAI,EAAEA,IADkC;MAExCkE,QAAQ,EAAEA;IAF8B,CAA9B,CAAZ;IAIA,IAAI9C,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,GAAgBjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBmI,aAAa,CAACd,IAAD,CAA/B,CAAhB,GAAyDW,SAAxE;IACA,OAAOlB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;MAC7B2C,KAAK,EAAEA,KADsB;MAE7BsB,QAAQ,EAAEA;IAFmB,CAAxB,CAAP;EAID,CAdD;AAeD,CAhBD;;AAkBA,IAAI+C,SAAS,GAAG,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;EACvC,IAAI,CAACA,IAAI,CAAChD,QAAV,EAAoB,OAAOgD,IAAP;EACpB,IAAIjB,IAAI,GAAGD,OAAO,CAACkB,IAAD,CAAlB;EACA,IAAIhD,QAAQ,GAAGgD,IAAI,CAAChD,QAAL,CAActF,GAAd,CAAkBmI,aAAa,CAACd,IAAD,CAA/B,CAAf;EACA,OAAOP,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuB,IAAlB,EAAwB;IAC7BhD,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAPD;;AASA,IAAIiD,WAAW,GAAG,SAASA,WAAT,CAAqBlH,IAArB,EAA2B;EAC3C,OAAOuG,UAAU,CAACS,SAAS,CAAChH,IAAD,CAAV,CAAjB;AACD,CAFD;;AAIA,IAAImH,YAAY,GAAG,SAASA,YAAT,CAAsBhD,KAAtB,EAA6B;EAC9C,IAAI,CAACA,KAAL,EAAY,OAAO,IAAP;EACZ,IAAI+B,MAAM,GAAG/B,KAAK,CAACiD,KAAN,CAAY,QAAZ,EAAsBzI,GAAtB,CAA0B0I,UAA1B,CAAb;EACA,IAAInB,MAAM,CAAClF,MAAP,KAAkB,CAAtB,EAAyB,OAAO,IAAP;EACzB,OAAO;IACLsG,IAAI,EAAEpB,MAAM,CAAC,CAAD,CADP;IAELqB,IAAI,EAAErB,MAAM,CAAC,CAAD,CAFP;IAGLsB,IAAI,EAAEtB,MAAM,CAAC,CAAD,CAHP;IAILuB,IAAI,EAAEvB,MAAM,CAAC,CAAD;EAJP,CAAP;AAMD,CAVD;;AAYA,IAAIwB,cAAc,GAAG,SAASC,YAAT,CAAsB3H,IAAtB,EAA4B;EAC/C,IAAI4H,OAAO,GAAGT,YAAY,CAACnH,IAAI,CAAC2C,KAAL,CAAWkF,OAAZ,CAA1B;;EAEA,IAAID,OAAJ,EAAa;IACX,OAAO;MACL1C,KAAK,EAAE0C,OAAO,CAACJ,IADV;MAELrC,MAAM,EAAEyC,OAAO,CAACH;IAFX,CAAP;EAID;;EAED,IAAIzH,IAAI,CAAC2C,KAAL,CAAWuC,KAAX,IAAoBlF,IAAI,CAAC2C,KAAL,CAAWwC,MAAnC,EAA2C;IACzC,OAAO;MACLD,KAAK,EAAEmC,UAAU,CAACrH,IAAI,CAAC2C,KAAL,CAAWuC,KAAZ,CADZ;MAELC,MAAM,EAAEkC,UAAU,CAACrH,IAAI,CAAC2C,KAAL,CAAWwC,MAAZ;IAFb,CAAP;EAID;;EAED,OAAO;IACLD,KAAK,EAAE,CADF;IAELC,MAAM,EAAE;EAFH,CAAP;AAID,CArBD;;AAuBA,IAAI2C,mBAAmB,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,UAAX,EAAuB,UAAvB,EAAmC,SAAnC,EAA8C,MAA9C,EAAsD,aAAtD,EAAqE,UAArE,EAAiF,QAAjF,EAA2F,eAA3F,EAA4G,gBAA5G,EAA8H,eAA9H,EAA+I,aAA/I,EAA8J,YAA9J,EAA4K,kBAA5K,EAAgM,OAAhM,EAAyM,YAAzM,EAAuN,UAAvN,EAAmO,WAAnO,EAAgP,YAAhP,EAA8P,eAA9P,EAA+Q,SAA/Q,EAA0R,gBAA1R,EAA4S,YAA5S,EAA0T,WAA1T,EAAuU,YAAvU,EAAqV,aAArV,CAA1B;;AAEA,IAAIC,eAAe,GAAG,SAASA,eAAT,CAAyB/H,IAAzB,EAA+B;EACnD,IAAI2C,KAAK,GAAG3C,IAAI,CAAC2C,KAAL,IAAc,EAA1B;EACA,OAAOpH,IAAI,CAACuM,mBAAD,EAAsBnF,KAAtB,CAAX;AACD,CAHD;;AAKA,IAAIqF,YAAY,GAAG,SAASA,YAAT,CAAsBhI,IAAtB,EAA4B;EAC7C,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;EACpB,IAAIiI,cAAc,GAAGF,eAAe,CAAC/H,IAAD,CAApC;EACA,IAAIiE,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkB,UAAUuF,KAAV,EAAiB;IAChD,IAAIvB,KAAK,GAAG8C,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuC,cAAlB,EAAkC/D,KAAK,CAACvB,KAAN,IAAe,EAAjD,CAAZ;IACA,IAAIuF,QAAQ,GAAGzC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBxB,KAAlB,EAAyB;MACtCvB,KAAK,EAAEA;IAD+B,CAAzB,CAAf;IAGA,OAAOqF,YAAY,CAACE,QAAD,CAAnB;EACD,CANc,CAAf;EAOA,OAAOzC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAbD;;AAeA,IAAIkE,gBAAgB,GAAG,SAASA,gBAAT,CAA0BhE,KAA1B,EAAiC;EACtD,IAAI0C,KAAK,GAAG1C,KAAK,CAACiE,OAAN,CAAc,eAAd,EAA+B,GAA/B,EAAoCA,OAApC,CAA4C,UAA5C,EAAwD,EAAxD,EAA4DhB,KAA5D,CAAkE,GAAlE,CAAZ;EACA,IAAIiB,KAAK,GAAGxB,KAAK,CAAC,CAAD,CAAL,IAAY,UAAxB;EACA,IAAIyB,WAAW,GAAGzB,KAAK,CAAC,CAAD,CAAL,IAAY,MAA9B;EACA,OAAO;IACLwB,KAAK,EAAEA,KADF;IAELC,WAAW,EAAEA;EAFR,CAAP;AAID,CARD;;AAUA,IAAIC,WAAW,GAAG,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,EAA6B,QAA7B,EAAuC,aAAvC,EAAsD,SAAtD,EAAiE,aAAjE,EAAgF,eAAhF,EAAiG,MAAjG,EAAyG,UAAzG,EAAqH,UAArH,EAAiI,QAAjI,EAA2I,WAA3I,EAAwJ,gBAAxJ,EAA0K,eAA1K,EAA2L,iBAA3L,CAAlB;AACA,IAAIC,cAAc,GAAG,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,EAAkB,QAAlB,EAA4B,IAA5B,EAAkC,IAAlC,CAArB;AACA,IAAIC,gBAAgB,GAAG,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,EAAkB,OAAlB,EAA2B,IAA3B,EAAiC,IAAjC,CAAvB;;AAEA,IAAIC,QAAQ,GAAG,SAASC,MAAT,CAAgB1G,IAAhB,EAAsB;EACnC,OAAO,UAAUjC,IAAV,EAAgB;IACrB,OAAOA,IAAI,CAACiC,IAAL,KAAcA,IAArB;EACD,CAFD;AAGD,CAJD;;AAMA,IAAI2G,OAAO,GAAGF,QAAQ,CAACzM,CAAC,CAAC4M,GAAH,CAAtB;AACA,IAAIC,QAAQ,GAAGJ,QAAQ,CAACzM,CAAC,CAAC8M,IAAH,CAAvB;AACA,IAAIC,gBAAgB,GAAGN,QAAQ,CAACzM,CAAC,CAACC,YAAH,CAA/B;;AAEA,IAAI+M,gBAAgB,GAAG,SAASA,gBAAT,CAA0BhE,SAA1B,EAAqC;EAC1D,OAAO,UAAUtC,KAAV,EAAiB;IACtB,OAAOlH,SAAS,CAACkH,KAAD,EAAQ,UAAUwB,KAAV,EAAiBvE,GAAjB,EAAsB;MAC5C,IAAIiH,KAAK,GAAGnL,YAAY,CAACyI,KAAD,CAAxB;;MAEA,IAAI0C,KAAK,IAAI2B,cAAc,CAAClI,QAAf,CAAwBV,GAAxB,CAAb,EAA2C;QACzC,OAAOiH,KAAK,CAACqC,OAAN,GAAgBjE,SAAS,CAACE,MAAjC;MACD;;MAED,IAAI0B,KAAK,IAAI4B,gBAAgB,CAACnI,QAAjB,CAA0BV,GAA1B,CAAb,EAA6C;QAC3C,OAAOiH,KAAK,CAACqC,OAAN,GAAgBjE,SAAS,CAACC,KAAjC;MACD;;MAED,OAAOf,KAAP;IACD,CAZe,CAAhB;EAaD,CAdD;AAeD,CAhBD;;AAkBA,IAAIgF,YAAY,GAAG,SAASA,YAAT,CAAsBhF,KAAtB,EAA6B;EAC9C,IAAI0C,KAAK,GAAGnL,YAAY,CAACyI,KAAD,CAAxB;EACA,OAAO0C,KAAK,GAAGA,KAAK,CAACqC,OAAT,GAAmB7B,UAAU,CAAClD,KAAD,CAAzC;AACD,CAHD;;AAKA,IAAIiF,UAAU,GAAG,SAASA,UAAT,CAAoBnE,SAApB,EAA+B;EAC9C,OAAO,UAAUjF,IAAV,EAAgB;IACrB,IAAI2C,KAAK,GAAGsG,gBAAgB,CAAChE,SAAD,CAAhB,CAA4BjF,IAAI,CAAC2C,KAAjC,CAAZ;IACAA,KAAK,GAAGhH,MAAM,CAAC;MACboJ,CAAC,EAAEsC,UADU;MAEbgC,EAAE,EAAEhC,UAFS;MAGbiC,EAAE,EAAEjC,UAHS;MAIbrC,CAAC,EAAEqC,UAJU;MAKbkC,EAAE,EAAElC,UALS;MAMbmC,EAAE,EAAEnC,UANS;MAOboC,CAAC,EAAEpC,UAPU;MAQbqC,EAAE,EAAErC,UARS;MASbsC,EAAE,EAAEtC,UATS;MAUbuC,EAAE,EAAEvC,UAVS;MAWbwC,EAAE,EAAExC,UAXS;MAYbnC,KAAK,EAAEmC,UAZM;MAablC,MAAM,EAAEkC,UAbK;MAcbyC,MAAM,EAAEX,YAdK;MAebtG,IAAI,EAAEzG,cAfO;MAgBbkH,OAAO,EAAE6F,YAhBI;MAiBbY,MAAM,EAAE3N,cAjBK;MAkBb4N,WAAW,EAAEb,YAlBA;MAmBbc,SAAS,EAAE7N,cAnBE;MAoBb8N,SAAS,EAAE7N;IApBE,CAAD,EAqBXsG,KArBW,CAAd;IAsBA,OAAO8C,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;MAC7B2C,KAAK,EAAEA;IADsB,CAAxB,CAAP;EAGD,CA3BD;AA4BD,CA7BD;;AA+BA,IAAIwH,aAAa,GAAG,SAASC,WAAT,CAAqBpK,IAArB,EAA2B;EAC7C,IAAIqK,KAAK,GAAGrK,IAAI,CAACqK,KAAL,IAAc,EAA1B;EACA,IAAI1H,KAAK,GAAG8C,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB2E,KAAlB,EAAyBrK,IAAI,CAAC2C,KAA9B,CAAZ;EACA,OAAO8C,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7B2C,KAAK,EAAEA;EADsB,CAAxB,CAAP;AAGD,CAND;;AAQA,IAAI2H,gBAAgB,GAAG,SAASA,gBAAT,CAA0BtK,IAA1B,EAAgC;EACrD,IAAIuK,UAAU,GAAG,SAASA,UAAT,CAAoBpG,KAApB,EAA2B;IAC1C,OAAOA,KAAK,KAAK,MAAV,GAAmB,IAAnB,GAA0BA,KAAjC;EACD,CAFD;;EAIA,IAAIxB,KAAK,GAAGlH,SAAS,CAACuE,IAAI,CAAC2C,KAAN,EAAa4H,UAAb,CAArB;EACA,OAAO9E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7B2C,KAAK,EAAEA;EADsB,CAAxB,CAAP;AAGD,CATD;;AAWA,IAAI6H,cAAc,GAAG,SAASA,cAAT,CAAwBxK,IAAxB,EAA8B;EACjD,IAAI2C,KAAK,GAAG3C,IAAI,CAAC2C,KAAL,IAAc,EAA1B;EACA,IAAI8H,UAAU,GAAGlP,IAAI,CAACgN,WAAD,EAAc5F,KAAd,CAArB;EACA,IAAI0H,KAAK,GAAG5E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB+E,UAAlB,EAA8BzK,IAAI,CAACqK,KAAL,IAAc,EAA5C,CAAZ;EACA,OAAO5E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BqK,KAAK,EAAEA;EADsB,CAAxB,CAAP;AAGD,CAPD;;AASA,IAAIK,aAAa,GAAG,SAASA,aAAT,CAAuB1K,IAAvB,EAA6B;EAC/C,IAAI2C,KAAK,GAAGhH,MAAM,CAAC;IACjBuJ,KAAK,EAAEmC,UADU;IAEjBlC,MAAM,EAAEkC,UAFS;IAGjBQ,OAAO,EAAEV,YAHQ;IAIjBwD,mBAAmB,EAAExC;EAJJ,CAAD,EAKfnI,IAAI,CAAC2C,KALU,CAAlB;EAMA,OAAO8C,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7B2C,KAAK,EAAEA;EADsB,CAAxB,CAAP;AAGD,CAVD;;AAYA,IAAIiI,gBAAgB,GAAG,SAASA,gBAAT,CAA0B5K,IAA1B,EAAgC;EACrD,OAAO;IACLiC,IAAI,EAAEhG,CAAC,CAAC4O,KADH;IAELlI,KAAK,EAAE,EAFF;IAGLsB,QAAQ,EAAE,CAACjE,IAAD;EAHL,CAAP;AAKD,CAND;;AAQA,IAAI8K,eAAe,GAAG,SAASA,eAAT,CAAyB9K,IAAzB,EAA+B;EACnD,IAAI,CAAC8I,QAAQ,CAAC9I,IAAD,CAAb,EAAqB,OAAOA,IAAP;EACrB,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;;EAEpB,IAAI+K,YAAY,GAAG,SAASA,YAAT,CAAsB7G,KAAtB,EAA6B;IAC9C,OAAO8E,gBAAgB,CAAC9E,KAAD,CAAhB,GAA0B0G,gBAAgB,CAAC1G,KAAD,CAA1C,GAAoDA,KAA3D;EACD,CAFD;;EAIA,IAAID,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBoM,YAAlB,CAAf;EACA,OAAOtF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAZD;;AAcA,IAAI+G,SAAS,GAAG,SAASA,SAAT,CAAmBzI,SAAnB,EAA8B;EAC5C,OAAO,UAAUvC,IAAV,EAAgB;IACrB,IAAI8I,QAAQ,CAAC9I,IAAD,CAAZ,EAAoB,OAAO2F,YAAY,CAACpD,SAAD,EAAYvC,IAAZ,CAAnB;IACpB,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;IACpB,IAAIiE,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBqM,SAAS,CAACzI,SAAD,CAA3B,CAAf;IACA,OAAOkD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;MAC7BiE,QAAQ,EAAEA;IADmB,CAAxB,CAAP;EAGD,CAPD;AAQD,CATD;;AAWA,IAAIgH,cAAc,GAAG,SAASA,cAAT,CAAwBhG,SAAxB,EAAmC;EACtD,OAAOzJ,OAAO,CAAC4N,UAAU,CAACnE,SAAD,CAAX,EAAwB6F,eAAxB,EAAyCR,gBAAzC,EAA2DH,aAA3D,CAAd;AACD,CAFD;;AAIA,IAAIe,eAAe,GAAG,SAASA,eAAT,CAAyBjG,SAAzB,EAAoC;EACxD,OAAO,UAAUjF,IAAV,EAAgB;IACrB,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;IACpB,IAAI+K,YAAY,GAAGvP,OAAO,CAAC0P,eAAe,CAACjG,SAAD,CAAhB,EAA6BgG,cAAc,CAAChG,SAAD,CAA3C,CAA1B;IACA,IAAIhB,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBoM,YAAlB,CAAf;IACA,OAAOtF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;MAC7BiE,QAAQ,EAAEA;IADmB,CAAxB,CAAP;EAGD,CAPD;AAQD,CATD;;AAWA,IAAIkH,cAAc,GAAG,SAASA,cAAT,CAAwBnL,IAAxB,EAA8BuC,SAA9B,EAAyC;EAC5D,IAAI0C,SAAS,GAAGyC,cAAc,CAAC1H,IAAD,CAA9B;EACA,OAAOxE,OAAO,CAAC0L,WAAD,EAAc8D,SAAS,CAACzI,SAAD,CAAvB,EAAoCmI,aAApC,EAAmDF,cAAnD,EAAmExC,YAAnE,EAAiFkD,eAAe,CAACjG,SAAD,CAAhG,CAAP,CAAoHjF,IAApH,CAAP;AACD,CAHD;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIoL,UAAU,GAAG,SAASA,UAAT,CAAoBpL,IAApB,EAA0BuC,SAA1B,EAAqC;EACpD,IAAI,CAACvC,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;;EAEpB,IAAI+K,YAAY,GAAG,SAASA,YAAT,CAAsB7G,KAAtB,EAA6B;IAC9C,OAAOkH,UAAU,CAAClH,KAAD,EAAQ3B,SAAR,CAAjB;EACD,CAFD;;EAIA,IAAI0E,IAAI,GAAG2B,OAAO,CAAC5I,IAAD,CAAP,GAAgBmL,cAAc,CAACnL,IAAD,EAAOuC,SAAP,CAA9B,GAAkDvC,IAA7D;EACA,IAAIiE,QAAQ,GAAGgD,IAAI,CAAChD,QAAL,CAActF,GAAd,CAAkBoM,YAAlB,CAAf;EACA,OAAOtF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuB,IAAlB,EAAwB;IAC7BhD,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAZD;;AAcA,IAAIoH,SAAS,GAAG,SAASA,SAAT,CAAmBrL,IAAnB,EAAyB;EACvC,OAAOA,IAAI,CAACqK,KAAL,CAAWiB,MAAlB;AACD,CAFD;;AAIA,IAAIC,UAAU,GAAG,SAASA,UAAT,CAAoBvL,IAApB,EAA0B;EACzC,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAACuP,QAAhB,IAA4BxL,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAAC4M,GAAnD;AACD,CAFD;;AAIA,IAAI4C,UAAU,GAAG,SAASA,UAAT,CAAoBC,CAApB,EAAuBC,CAAvB,EAA0B;EACzC,IAAIC,EAAE,GAAGP,SAAS,CAACK,CAAD,CAAlB;EACA,IAAIG,EAAE,GAAGR,SAAS,CAACM,CAAD,CAAlB;EACA,IAAI,CAACC,EAAD,IAAO,CAACC,EAAZ,EAAgB,OAAO,CAAP;EAChB,IAAI,CAACD,EAAL,EAAS,OAAO,CAAP;EACT,IAAI,CAACC,EAAL,EAAS,OAAO,CAAC,CAAR;EACT,OAAOA,EAAE,GAAGD,EAAZ;AACD,CAPD;AAQA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIE,aAAa,GAAG,SAASA,aAAT,CAAuB9L,IAAvB,EAA6B;EAC/C,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;EACpB,IAAI+L,cAAc,GAAGR,UAAU,CAACvL,IAAD,CAAV,GAAmBA,IAAI,CAACiE,QAAL,CAAc+H,IAAd,CAAmBP,UAAnB,CAAnB,GAAoDzL,IAAI,CAACiE,QAA9E;EACA,IAAIA,QAAQ,GAAG8H,cAAc,CAACpN,GAAf,CAAmBmN,aAAnB,CAAf;EACA,OAAOrG,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAPD;;AASA,IAAIgI,MAAM,GAAG,EAAb;AACA,IAAIC,KAAK,GAAGhP,UAAU,EAAtB;;AAEA,IAAIiP,OAAO,GAAG,SAASA,OAAT,CAAiBC,OAAjB,EAA0B;EACtC,OAAO,YAAY;IACjB,OAAOA,OAAO,CAAChI,KAAR,CAAc,KAAK,CAAnB,EAAsBiI,SAAtB,EAAiCC,IAAjC,CAAsC,UAAUC,CAAV,EAAa;MACxD,OAAOA,CAAP;IACD,CAFM,EAEJ,UAAUC,CAAV,EAAa;MACd,OAAOA,CAAP;IACD,CAJM,CAAP;EAKD,CAND;AAOD,CARD,C,CAQG;;;AAGH,IAAIC,mBAAmB,GAAG,SAASA,mBAAT,GAA+B;EACvD,OAAON,OAAO,CAAChP,YAAD,CAAd;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIuP,cAAc,GAAG,SAASA,cAAT,CAAwB3H,CAAxB,EAA2B;EAC9C,OAAOA,CAAC,KAAK,GAAb;AACD,CAFD;;AAIA,IAAI4H,aAAa,GAAG,SAASA,aAAT,CAAuBlM,MAAvB,EAA+B;EACjD,OAAOmM,KAAK,CAACC,IAAN,CAAWpM,MAAX,EAAmB+F,MAAnB,CAA0BkG,cAA1B,EAA0C/N,GAA1C,CAA8C,UAAU8C,IAAV,EAAgB;IACnE,OAAOA,IAAI,CAACC,WAAL,CAAiB,CAAjB,EAAoBoL,QAApB,CAA6B,EAA7B,CAAP;EACD,CAFM,EAEJC,IAFI,CAEC,GAFD,CAAP;AAGD,CAJD;;AAMA,IAAIC,aAAa,GAAG,SAASA,aAAT,CAAuBC,KAAvB,EAA8BC,MAA9B,EAAsC;EACxD,IAAIC,GAAG,GAAGD,MAAM,CAACC,GAAjB;EAAA,IACIC,MAAM,GAAGF,MAAM,CAACE,MADpB;EAEA,OAAO,KAAKD,GAAL,GAAWR,aAAa,CAACM,KAAD,CAAxB,GAAkC,GAAlC,GAAwCG,MAA/C;AACD,CAJD;;AAMA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqB5M,MAArB,EAA6ByM,MAA7B,EAAqC;EACrD,IAAI,CAACA,MAAD,IAAW,CAACA,MAAM,CAACC,GAAvB,EAA4B,OAAO,EAAP;EAC5B,IAAIG,QAAQ,GAAG,EAAf;EACA,IAAIzG,KAAJ;;EAEA,IAAI0G,KAAK,GAAG,SAASA,KAAT,GAAiB;IAC3B,IAAIN,KAAK,GAAGpG,KAAK,CAAC,CAAD,CAAjB;;IAEA,IAAI,CAACoF,MAAM,CAACgB,KAAD,CAAP,IAAkBhB,MAAM,CAACgB,KAAD,CAAN,CAAcO,OAApC,EAA6C;MAC3C,IAAIC,QAAQ,GAAGT,aAAa,CAACC,KAAD,EAAQC,MAAR,CAA5B;MACAjB,MAAM,CAACgB,KAAD,CAAN,GAAgB;QACdO,OAAO,EAAE;MADK,CAAhB;MAGA,IAAIE,eAAe,GAAGjB,mBAAmB,EAAzC;MACAa,QAAQ,CAACnM,IAAT,CAAcuM,eAAe,CAAC;QAC5BC,GAAG,EAAEF;MADuB,CAAD,CAAf,CAEXnB,IAFW,CAEN,UAAUsB,KAAV,EAAiB;QACvB3B,MAAM,CAACgB,KAAD,CAAN,CAAcO,OAAd,GAAwB,KAAxB;QACAvB,MAAM,CAACgB,KAAD,CAAN,CAAcxJ,IAAd,GAAqBmK,KAAK,CAACnK,IAA3B;MACD,CALa,CAAd;IAMD;EACF,CAhBD;;EAkBA,OAAOoD,KAAK,GAAGqF,KAAK,CAAC2B,IAAN,CAAWpN,MAAX,CAAf,EAAmC;IACjC8M,KAAK;EACN;;EAED,OAAOD,QAAP;AACD,CA5BD;;AA6BA,IAAIQ,WAAW,GAAG,SAASA,WAAT,CAAqBrL,SAArB,EAAgC;EAChD,IAAIsL,MAAM,GAAG,EAAb;;EAEA,KAAK,IAAIlP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4D,SAAS,CAACzB,MAA9B,EAAsCnC,CAAC,IAAI,CAA3C,EAA8C;IAC5C,IAAImP,QAAQ,GAAGvL,SAAS,CAAC5D,CAAD,CAAxB;IACA,IAAIgI,KAAK,GAAG,KAAK,CAAjB;IACA,IAAIhG,SAAS,GAAG,CAAhB;;IAEA,OAAOgG,KAAK,GAAGqF,KAAK,CAAC2B,IAAN,CAAWG,QAAQ,CAACvN,MAApB,CAAf,EAA4C;MAC1C,IAAIwN,MAAM,GAAGpH,KAAb;MAAA,IACI/F,KAAK,GAAGmN,MAAM,CAACnN,KADnB;MAEA,IAAImM,KAAK,GAAGpG,KAAK,CAAC,CAAD,CAAjB;MACA,IAAIqH,SAAS,GAAGF,QAAQ,CAAC/N,UAAT,CAAoBC,QAApC;MACA,IAAIiO,KAAK,GAAGH,QAAQ,CAACvN,MAAT,CAAgBc,KAAhB,CAAsBV,SAAtB,EAAiCC,KAAK,GAAG+F,KAAK,CAAC,CAAD,CAAL,CAAS7F,MAAlD,CAAZ,CAL0C,CAK6B;MACvE;;MAEA,IAAIiL,MAAM,CAACgB,KAAD,CAAN,IAAiBhB,MAAM,CAACgB,KAAD,CAAN,CAAcxJ,IAAnC,EAAyC;QACvCsK,MAAM,CAAC5M,IAAP,CAAY;UACVV,MAAM,EAAE0N,KAAK,CAAC/F,OAAN,CAAcvB,KAAd,EAAqBuH,MAAM,CAACC,YAAP,CAAoB,MAApB,CAArB,CADE;UAEVpO,UAAU,EAAEhD,QAAQ,CAAC,EAAD,EAAK+Q,QAAQ,CAAC/N,UAAd,EAA0B;YAC5CqO,UAAU,EAAE;cACVpJ,KAAK,EAAEgJ,SADG;cAEV/I,MAAM,EAAE+I,SAFE;cAGVK,OAAO,EAAEC,IAAI,CAACC,KAAL,CAAWP,SAAS,GAAG,GAAvB,CAHC;cAIVN,KAAK,EAAE3B,MAAM,CAACgB,KAAD,CAAN,CAAcxJ;YAJX;UADgC,CAA1B;QAFV,CAAZ;MAWD,CAZD,MAYO;QACL;QACAsK,MAAM,CAAC5M,IAAP,CAAY;UACVV,MAAM,EAAE0N,KAAK,CAAC/F,OAAN,CAAcvB,KAAd,EAAqBuH,MAAM,CAACC,YAAP,CAAoB,CAApB,CAArB,CADE;UAEVpO,UAAU,EAAE+N,QAAQ,CAAC/N;QAFX,CAAZ;MAID;;MAEDY,SAAS,GAAGC,KAAK,GAAGmM,KAAK,CAACjM,MAA1B;IACD;;IAED,IAAIH,SAAS,GAAGmN,QAAQ,CAACvN,MAAT,CAAgBO,MAAhC,EAAwC;MACtC+M,MAAM,CAAC5M,IAAP,CAAY;QACVV,MAAM,EAAEuN,QAAQ,CAACvN,MAAT,CAAgBc,KAAhB,CAAsBV,SAAtB,CADE;QAEVZ,UAAU,EAAE+N,QAAQ,CAAC/N;MAFX,CAAZ;IAID;EACF;;EAED,OAAO8N,MAAP;AACD,CAhDD;AAkDA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIW,SAAS,GAAG,SAASA,SAAT,CAAmB1O,IAAnB,EAAyB;EACvC,IAAI4E,WAAJ,EAAiBC,YAAjB,EAA+B8J,YAA/B;;EAEA,OAAO,CAAC,CAAC/J,WAAW,GAAG5E,IAAI,CAAC2C,KAApB,MAA+B,IAA/B,IAAuCiC,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAAC9G,GAAtF,MAA+F,CAAC+G,YAAY,GAAG7E,IAAI,CAAC2C,KAArB,MAAgC,IAAhC,IAAwCkC,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAACqI,MAAvL,MAAmM,CAACyB,YAAY,GAAG3O,IAAI,CAAC2C,KAArB,MAAgC,IAAhC,IAAwCgM,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAACC,IAA3R,CAAP;AACD,CAJD;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIC,aAAa,GAAG,aAAa,YAAY;EAC3C,IAAIrO,IAAI,GAAGzD,iBAAiB,EAAE,aAAaC,mBAAmB,CAAC8R,IAApB,CAAyB,SAASC,OAAT,CAAiBjR,GAAjB,EAAsB;IACxF,IAAIoP,MAAJ;IACA,OAAOlQ,mBAAmB,CAACgS,IAApB,CAAyB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;MAC1D,OAAO,CAAP,EAAU;QACR,QAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;UACE,KAAK,CAAL;YACE,IAAI,EAAE,OAAOtR,GAAP,KAAe,UAAjB,CAAJ,EAAkC;cAChCoR,QAAQ,CAACE,IAAT,GAAgB,CAAhB;cACA;YACD;;YAEDF,QAAQ,CAACE,IAAT,GAAgB,CAAhB;YACA,OAAOtR,GAAG,EAAV;;UAEF,KAAK,CAAL;YACEoR,QAAQ,CAACG,EAAT,GAAcH,QAAQ,CAACI,IAAvB;YACAJ,QAAQ,CAACE,IAAT,GAAgB,CAAhB;YACA;;UAEF,KAAK,CAAL;YACEF,QAAQ,CAACE,IAAT,GAAgB,CAAhB;YACA,OAAOtR,GAAP;;UAEF,KAAK,CAAL;YACEoR,QAAQ,CAACG,EAAT,GAAcH,QAAQ,CAACI,IAAvB;;UAEF,KAAK,CAAL;YACEpC,MAAM,GAAGgC,QAAQ,CAACG,EAAlB;YACA,OAAOH,QAAQ,CAACK,MAAT,CAAgB,QAAhB,EAA0B,OAAOrC,MAAP,KAAkB,QAAlB,GAA6B;cAC5DS,GAAG,EAAET;YADuD,CAA7B,GAE7BA,MAFG,CAAP;;UAIF,KAAK,EAAL;UACA,KAAK,KAAL;YACE,OAAOgC,QAAQ,CAACM,IAAT,EAAP;QA9BJ;MAgCD;IACF,CAnCM,EAmCJT,OAnCI,CAAP;EAoCD,CAtC0C,CAAf,CAA5B;;EAwCA,OAAO,SAASF,aAAT,CAAuBY,EAAvB,EAA2B;IAChC,OAAOjP,IAAI,CAAC4D,KAAL,CAAW,IAAX,EAAiBiI,SAAjB,CAAP;EACD,CAFD;AAGD,CA5CgC,EAAjC;AA8CA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIqD,UAAU,GAAG,aAAa,YAAY;EACxC,IAAIlP,IAAI,GAAGzD,iBAAiB,EAAE,aAAaC,mBAAmB,CAAC8R,IAApB,CAAyB,SAASC,OAAT,CAAiB/O,IAAjB,EAAuB;IACzF,IAAIlC,GAAJ,EAAS6R,KAAT,EAAgBzC,MAAhB;IACA,OAAOlQ,mBAAmB,CAACgS,IAApB,CAAyB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;MAC1D,OAAO,CAAP,EAAU;QACR,QAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;UACE,KAAK,CAAL;YACEtR,GAAG,GAAG4Q,SAAS,CAAC1O,IAAD,CAAf;YACA2P,KAAK,GAAG3P,IAAI,CAAC2C,KAAL,CAAWgN,KAAnB;;YAEA,IAAI7R,GAAJ,EAAS;cACPoR,QAAQ,CAACE,IAAT,GAAgB,CAAhB;cACA;YACD;;YAEDQ,OAAO,CAACC,IAAR,CAAa,KAAb,EAAoB,sDAApB;YACA,OAAOX,QAAQ,CAACK,MAAT,CAAgB,QAAhB,CAAP;;UAEF,KAAK,CAAL;YACEL,QAAQ,CAACC,IAAT,GAAgB,CAAhB;YACAD,QAAQ,CAACE,IAAT,GAAgB,CAAhB;YACA,OAAOP,aAAa,CAAC/Q,GAAD,CAApB;;UAEF,KAAK,CAAL;YACEoP,MAAM,GAAGgC,QAAQ,CAACI,IAAlB;;YAEA,IAAIpC,MAAJ,EAAY;cACVgC,QAAQ,CAACE,IAAT,GAAgB,EAAhB;cACA;YACD;;YAED,MAAM,IAAIU,KAAJ,CAAU,iDAAiD5C,MAA3D,CAAN;;UAEF,KAAK,EAAL;YACEgC,QAAQ,CAACE,IAAT,GAAgB,EAAhB;YACA,OAAOjS,YAAY,CAAC+P,MAAD,EAAS;cAC1ByC,KAAK,EAAEA;YADmB,CAAT,CAAnB;;UAIF,KAAK,EAAL;YACE3P,IAAI,CAAC4N,KAAL,GAAasB,QAAQ,CAACI,IAAtB;YACAtP,IAAI,CAAC4N,KAAL,CAAWhO,GAAX,GAAiBsN,MAAM,CAACzJ,IAAP,GAAcyJ,MAAM,CAACzJ,IAAP,CAAYqJ,QAAZ,EAAd,GAAuCI,MAAM,CAACS,GAA/D;YACAuB,QAAQ,CAACE,IAAT,GAAgB,EAAhB;YACA;;UAEF,KAAK,EAAL;YACEF,QAAQ,CAACC,IAAT,GAAgB,EAAhB;YACAD,QAAQ,CAACG,EAAT,GAAcH,QAAQ,CAAC,OAAD,CAAR,CAAkB,CAAlB,CAAd;YACAlP,IAAI,CAAC4N,KAAL,GAAa;cACX1I,KAAK,EAAE,CADI;cAEXC,MAAM,EAAE,CAFG;cAGXvF,GAAG,EAAE;YAHM,CAAb;YAKAgQ,OAAO,CAACC,IAAR,CAAaX,QAAQ,CAACG,EAAT,CAAYU,OAAzB;;UAEF,KAAK,EAAL;UACA,KAAK,KAAL;YACE,OAAOb,QAAQ,CAACM,IAAT,EAAP;QApDJ;MAsDD;IACF,CAzDM,EAyDJT,OAzDI,EAyDK,IAzDL,EAyDW,CAAC,CAAC,CAAD,EAAI,EAAJ,CAAD,CAzDX,CAAP;EA0DD,CA5D0C,CAAf,CAA5B;;EA8DA,OAAO,SAASW,UAAT,CAAoBD,EAApB,EAAwB;IAC7B,OAAOjP,IAAI,CAAC4D,KAAL,CAAW,IAAX,EAAiBiI,SAAjB,CAAP;EACD,CAFD;AAGD,CAlE6B,EAA9B;;AAoEA,IAAI2D,SAAS,GAAG,SAASC,OAAT,CAAiBjQ,IAAjB,EAAuB;EACrC,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAACiU,KAAvB;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqB5N,SAArB,EAAgCvC,IAAhC,EAAsC;EACtD,IAAIoQ,cAAJ;;EAEA,IAAI9C,QAAQ,GAAG,EAAf;EACA,IAAI+C,aAAa,GAAG,CAAC,CAACD,cAAc,GAAGpQ,IAAI,CAACiE,QAAvB,MAAqC,IAArC,IAA6CmM,cAAc,KAAK,KAAK,CAArE,GAAyE,KAAK,CAA9E,GAAkFA,cAAc,CAAC7O,KAAf,CAAqB,CAArB,CAAnF,KAA+G,EAAnI;EACA,IAAI+O,WAAW,GAAG/N,SAAS,GAAGA,SAAS,CAACgO,cAAV,EAAH,GAAgC,IAA3D;;EAEA,OAAOF,aAAa,CAACrP,MAAd,GAAuB,CAA9B,EAAiC;IAC/B,IAAIwP,QAAJ;;IAEA,IAAIC,CAAC,GAAGJ,aAAa,CAACK,KAAd,EAAR;;IAEA,IAAIV,SAAS,CAACS,CAAD,CAAb,EAAkB;MAChBnD,QAAQ,CAACnM,IAAT,CAAcuO,UAAU,CAACe,CAAD,CAAxB;IACD;;IAED,IAAIlO,SAAS,IAAI,CAACiO,QAAQ,GAAGC,CAAC,CAACpG,KAAd,MAAyB,IAAtC,IAA8CmG,QAAQ,KAAK,KAAK,CAAhE,IAAqEA,QAAQ,CAACzN,UAAlF,EAA8F;MAC5FuK,QAAQ,CAACnM,IAAT,CAAcoB,SAAS,CAACoO,IAAV,CAAeF,CAAC,CAACpG,KAAjB,CAAd;IACD;;IAED,IAAI,OAAOoG,CAAP,KAAa,QAAjB,EAA2B;MACzBnD,QAAQ,CAACnM,IAAT,CAAciD,KAAd,CAAoBkJ,QAApB,EAA8BD,WAAW,CAACoD,CAAD,EAAIH,WAAJ,CAAzC;IACD;;IAED,IAAI,OAAOG,CAAC,CAACtM,KAAT,KAAmB,QAAvB,EAAiC;MAC/BmJ,QAAQ,CAACnM,IAAT,CAAciD,KAAd,CAAoBkJ,QAApB,EAA8BD,WAAW,CAACoD,CAAC,CAACtM,KAAH,EAAUmM,WAAV,CAAzC;IACD;;IAED,IAAIG,CAAC,CAACxM,QAAN,EAAgB;MACdwM,CAAC,CAACxM,QAAF,CAAW2M,OAAX,CAAmB,UAAUC,SAAV,EAAqB;QACtCR,aAAa,CAAClP,IAAd,CAAmB0P,SAAnB;MACD,CAFD;IAGD;EACF;;EAED,OAAOvD,QAAP;AACD,CApCD;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIwD,aAAa,GAAG,aAAa,YAAY;EAC3C,IAAItQ,IAAI,GAAGzD,iBAAiB,EAAE,aAAaC,mBAAmB,CAAC8R,IAApB,CAAyB,SAASC,OAAT,CAAiB/O,IAAjB,EAAuBuC,SAAvB,EAAkC;IACpG,IAAI+K,QAAJ;IACA,OAAOtQ,mBAAmB,CAACgS,IAApB,CAAyB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;MAC1D,OAAO,CAAP,EAAU;QACR,QAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;UACE,KAAK,CAAL;YACE9B,QAAQ,GAAG6C,WAAW,CAAC5N,SAAD,EAAYvC,IAAZ,CAAtB;YACAkP,QAAQ,CAACE,IAAT,GAAgB,CAAhB;YACA,OAAO2B,OAAO,CAACC,GAAR,CAAY1D,QAAZ,CAAP;;UAEF,KAAK,CAAL;YACE,OAAO4B,QAAQ,CAACK,MAAT,CAAgB,QAAhB,EAA0BvP,IAA1B,CAAP;;UAEF,KAAK,CAAL;UACA,KAAK,KAAL;YACE,OAAOkP,QAAQ,CAACM,IAAT,EAAP;QAXJ;MAaD;IACF,CAhBM,EAgBJT,OAhBI,CAAP;EAiBD,CAnB0C,CAAf,CAA5B;;EAqBA,OAAO,SAAS+B,aAAT,CAAuBrB,EAAvB,EAA2BwB,GAA3B,EAAgC;IACrC,OAAOzQ,IAAI,CAAC4D,KAAL,CAAW,IAAX,EAAiBiI,SAAjB,CAAP;EACD,CAFD;AAGD,CAzBgC,EAAjC;;AA2BA,IAAI6E,QAAQ,GAAG,SAASC,MAAT,CAAgBnR,IAAhB,EAAsB;EACnC,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAACmV,IAAvB;AACD,CAFD;;AAIA,IAAIC,mBAAmB,GAAG;EACxB3N,KAAK,EAAE,MADiB;EAExBvB,cAAc,EAAE;AAFQ,CAA1B;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAImP,YAAY,GAAG,SAASA,YAAT,CAAsBrM,SAAtB,EAAiCjF,IAAjC,EAAuC;EACxD,IAAIuR,SAAS,GAAGvR,IAAI,CAACqK,KAArB;;EAEA,IAAI6G,QAAQ,CAAClR,IAAD,CAAZ,EAAoB;IAClBuR,SAAS,GAAG3E,KAAK,CAAC4E,OAAN,CAAcxR,IAAI,CAACqK,KAAnB,IAA4B,CAACgH,mBAAD,EAAsBI,MAAtB,CAA6BzR,IAAI,CAACqK,KAAlC,CAA5B,GAAuE,CAACgH,mBAAD,EAAsBrR,IAAI,CAACqK,KAA3B,CAAnF;EACD;;EAED,OAAOlO,UAAU,CAAC8I,SAAD,EAAYsM,SAAZ,CAAjB;AACD,CARD;AASA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIG,iBAAiB,GAAG,SAASA,iBAAT,CAA2BzM,SAA3B,EAAsC;EAC5D,OAAO,UAAUjF,IAAV,EAAgB;IACrB,IAAIqK,KAAK,GAAGiH,YAAY,CAACrM,SAAD,EAAYjF,IAAZ,CAAxB;IACA,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOwB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;MACjDqK,KAAK,EAAEA;IAD0C,CAAxB,CAAP;IAGpB,IAAIpG,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkB+S,iBAAiB,CAACzM,SAAD,CAAnC,CAAf;IACA,OAAOQ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;MAC7BqK,KAAK,EAAEA,KADsB;MAE7BpG,QAAQ,EAAEA;IAFmB,CAAxB,CAAP;EAID,CAVD;AAWD,CAZD;AAaA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI0N,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,IAA3B,EAAiC;EACvD,IAAIC,WAAJ;;EAEA,IAAIC,GAAG,GAAG,CAAC,CAACD,WAAW,GAAGD,IAAI,CAACjP,KAApB,MAA+B,IAA/B,IAAuCkP,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACC,GAAtF,KAA8F,EAAxG;EACA,IAAIC,GAAG,GAAGH,IAAI,CAACG,GAAL,IAAYH,IAAI,CAACvH,KAA3B;;EAEA,IAAIpF,SAAS,GAAGhI,QAAQ,CAAC,EAAD,EAAK8U,GAAL,EAAU;IAChCD,GAAG,EAAEA;EAD2B,CAAV,CAAxB;;EAIA,OAAOJ,iBAAiB,CAACzM,SAAD,CAAjB,CAA6B2M,IAA7B,CAAP;AACD,CAXD;AAYA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAII,aAAa,GAAG,SAASA,aAAT,CAAuB/K,IAAvB,EAA6B;EAC/C,IAAI,CAACA,IAAI,CAAChD,QAAV,EAAoB,OAAOgD,IAAP;EACpB,IAAIhD,QAAQ,GAAGgD,IAAI,CAAChD,QAAL,CAActF,GAAd,CAAkBgT,iBAAlB,CAAf;EACA,OAAOlM,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuB,IAAlB,EAAwB;IAC7BhD,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAND;;AAQA,IAAIgO,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,CAA3B,EAA8B;EACpD,OAAO,UAAUlS,IAAV,EAAgB;IACrB,IAAImS,WAAJ,EAAiBC,YAAjB;;IAEA,OAAOxW,KAAK,CAAC,CAACuW,WAAW,GAAGnS,IAAI,CAACqK,KAApB,MAA+B,IAA/B,IAAuC8H,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACD,CAAD,CAArF,CAAL,GAAiG,KAAjG,GAAyG,CAACE,YAAY,GAAGpS,IAAI,CAACqK,KAArB,MAAgC,IAAhC,IAAwC+H,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAACF,CAAD,CAAvM;EACD,CAJD;AAKD,CAND;AAOA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIG,SAAS,GAAG,SAASA,SAAT,CAAmBrS,IAAnB,EAAyB;EACvC,IAAI,CAACA,IAAI,CAAC+R,GAAV,EAAe,OAAO,EAAP;EACf,IAAIO,SAAS,GAAGtS,IAAI,CAAC+R,GAArB;EAAA,IACIQ,IAAI,GAAGD,SAAS,CAACC,IADrB;EAAA,IAEIC,GAAG,GAAGF,SAAS,CAACE,GAFpB;EAAA,IAGItN,KAAK,GAAGoN,SAAS,CAACpN,KAHtB;EAAA,IAIIC,MAAM,GAAGmN,SAAS,CAACnN,MAJvB;EAKA,IAAIsN,gBAAgB,GAAGR,iBAAiB,CAAC,kBAAD,CAAjB,CAAsCjS,IAAtC,CAAvB;EACA,IAAI0S,gBAAgB,GAAGT,iBAAiB,CAAC,kBAAD,CAAjB,CAAsCjS,IAAtC,CAAvB;EACA,IAAI2S,QAAQ,GAAGjX,YAAY,CAAC+W,gBAAD,CAA3B;EACA,IAAIG,QAAQ,GAAGlX,YAAY,CAACgX,gBAAD,CAA3B;EACA,IAAIG,OAAO,GAAGF,QAAQ,GAAGzN,KAAK,GAAGyN,QAAQ,CAACzJ,OAApB,GAA8BuJ,gBAApD;EACA,IAAIK,OAAO,GAAGF,QAAQ,GAAGzN,MAAM,GAAGyN,QAAQ,CAAC1J,OAArB,GAA+BwJ,gBAArD;EACA,OAAO;IACLH,IAAI,EAAEA,IAAI,GAAGM,OADR;IAELL,GAAG,EAAEA,GAAG,GAAGM;EAFN,CAAP;AAID,CAjBD;AAmBA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2B/S,IAA3B,EAAiC;EACvD,IAAIgT,MAAM,GAAGX,SAAS,CAACrS,IAAD,CAAtB;EACA,IAAIiT,OAAO,GAAGxN,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IACpCgT,MAAM,EAAEA;EAD4B,CAAxB,CAAd;EAGA,IAAI,CAAChT,IAAI,CAACiE,QAAV,EAAoB,OAAOgP,OAAP;EACpB,IAAIhP,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBoU,iBAAlB,CAAf;EACA,OAAOtN,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuN,OAAlB,EAA2B;IAChChP,QAAQ,EAAEA;EADsB,CAA3B,CAAP;AAGD,CAVD;AAWA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIiP,aAAa,GAAG,SAASA,aAAT,CAAuBjM,IAAvB,EAA6B;EAC/C,IAAI,CAACA,IAAI,CAAChD,QAAV,EAAoB,OAAOgD,IAAP;EACpB,IAAIhD,QAAQ,GAAGgD,IAAI,CAAChD,QAAL,CAActF,GAAd,CAAkBoU,iBAAlB,CAAf;EACA,OAAOtN,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuB,IAAlB,EAAwB;IAC7BhD,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAND;AAQA;;AAEA;;AAEA;;;AACA,IAAIkP,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,KAA1B,EAAiC;EACtD,OAAO,OAAOA,KAAP,KAAiB,QAAjB,GAA4B;IACjCA,KAAK,EAAEA,KAD0B;IAEjCC,GAAG,EAAE,KAF4B;IAGjCC,QAAQ,EAAE;EAHuB,CAA5B,GAIHF,KAJJ;AAKD,CAND;;AAQA,IAAIG,gBAAgB,GAAG,SAASA,gBAAT,CAA0BvT,IAA1B,EAAgC;EACrD,IAAIwT,IAAI,GAAG,CAAX;EACA,IAAIvP,QAAQ,GAAG,CAACjE,IAAI,CAACiE,QAAL,IAAiB,EAAlB,EAAsB1C,KAAtB,CAA4B,CAA5B,CAAf;EACA,IAAI8O,aAAa,GAAGpM,QAAQ,CAACtF,GAAT,CAAa,UAAUwF,KAAV,EAAiB;IAChD,OAAO;MACLA,KAAK,EAAEA,KADF;MAELsP,MAAM,EAAE;IAFH,CAAP;EAID,CALmB,CAApB;;EAOA,IAAIlG,KAAK,GAAG,SAASA,KAAT,GAAiB;IAC3B,IAAImG,YAAJ;;IAEA,IAAIC,OAAO,GAAGtD,aAAa,CAACK,KAAd,EAAd;IACA,IAAIxM,KAAK,GAAGyP,OAAO,CAACxP,KAApB;IACA,IAAIsP,MAAM,GAAGE,OAAO,CAACF,MAArB;;IAEA,IAAI,CAACC,YAAY,GAAGxP,KAAK,CAACvB,KAAtB,MAAiC,IAAjC,IAAyC+Q,YAAY,KAAK,KAAK,CAA/D,IAAoEA,YAAY,CAACE,QAArF,EAA+F;MAC7F,IAAIC,OAAJ;;MAEA,IAAID,QAAQ,GAAGT,gBAAgB,CAACjP,KAAK,CAACvB,KAAN,CAAYiR,QAAb,CAA/B;MACA,IAAIE,GAAG,GAAGN,IAAI,EAAd;;MAEA,IAAIO,YAAY,GAAG9W,QAAQ,CAAC;QAC1B6W,GAAG,EAAEA,GADqB;QAE1BL,MAAM,EAAE,CAACI,OAAO,GAAGJ,MAAX,MAAuB,IAAvB,IAA+BI,OAAO,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,OAAO,CAACC;MAFnD,CAAD,EAGxBF,QAHwB,CAA3B;;MAKA1P,KAAK,CAACvB,KAAN,CAAYiR,QAAZ,GAAuBG,YAAvB;MACAN,MAAM,GAAGM,YAAT;IACD;;IAED,IAAI7P,KAAK,CAACD,QAAV,EAAoB;MAClBC,KAAK,CAACD,QAAN,CAAe2M,OAAf,CAAuB,UAAUC,SAAV,EAAqB;QAC1CR,aAAa,CAAClP,IAAd,CAAmB;UACjBgD,KAAK,EAAE0M,SADU;UAEjB4C,MAAM,EAAEA;QAFS,CAAnB;MAID,CALD;IAMD;EACF,CA9BD;;EAgCA,OAAOpD,aAAa,CAACrP,MAAd,GAAuB,CAA9B,EAAiC;IAC/BuM,KAAK;EACN;;EAED,OAAOvN,IAAP;AACD,CA/CD;;AAiDA,IAAIgU,kBAAkB,GAAG,CAAC,UAAD,EAAa,WAAb,CAAzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,cAAc,GAAG,SAASA,cAAT,CAAwBrC,IAAxB,EAA8B;EACjD,IAAIC,WAAJ;;EAEA,IAAI1N,KAAK,GAAG,CAAC,CAAC0N,WAAW,GAAGD,IAAI,CAACjP,KAApB,MAA+B,IAA/B,IAAuCkP,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACqC,WAAtF,KAAsG,UAAlH;EACA,OAAOF,kBAAkB,CAAC1T,QAAnB,CAA4B6D,KAA5B,IAAqCA,KAArC,GAA6C,UAApD;AACD,CALD;AAOA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIgQ,WAAW,GAAG,SAASA,WAAT,CAAqBvC,IAArB,EAA2B;EAC3C,OAAOqC,cAAc,CAACrC,IAAD,CAAd,KAAyB,WAAhC;AACD,CAFD;;AAIA,IAAIwC,UAAU,GAAG;EACf,OAAO,CAAC,OAAD,EAAU,OAAV,CADQ;EAEf,OAAO,CAAC,OAAD,EAAU,OAAV,CAFQ;EAGfC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CAHW;EAIfC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CAJW;EAKfC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CALW;EAMfC,EAAE,EAAE,CAAC,MAAD,EAAS,OAAT,CANW;EAOfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CAPW;EAQfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CARW;EASfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CATW;EAUfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CAVW;EAWfC,EAAE,EAAE,CAAC,KAAD,EAAQ,MAAR,CAXW;EAYfC,EAAE,EAAE,CAAC,MAAD,EAAS,KAAT,CAZW;EAafC,GAAG,EAAE,CAAC,IAAD,EAAO,MAAP,CAbU;EAcfC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CAdW;EAefC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CAfW;EAgBfC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CAhBW;EAiBfC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CAjBW;EAkBfC,EAAE,EAAE,CAAC,MAAD,EAAS,OAAT,CAlBW;EAmBfC,EAAE,EAAE,CAAC,KAAD,EAAQ,MAAR,CAnBW;EAoBfC,EAAE,EAAE,CAAC,MAAD,EAAS,KAAT,CApBW;EAqBfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CArBW;EAsBfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CAtBW;EAuBfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CAvBW;EAwBfC,GAAG,EAAE,CAAC,KAAD,EAAQ,MAAR,CAxBU;EAyBfC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CAzBW;EA0BfC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CA1BW;EA2BfC,EAAE,EAAE,CAAC,OAAD,EAAU,OAAV,CA3BW;EA4BfC,EAAE,EAAE,CAAC,MAAD,EAAS,OAAT,CA5BW;EA6BfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CA7BW;EA8BfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CA9BW;EA+BfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CA/BW;EAgCfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CAhCW;EAiCfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CAjCW;EAkCfC,EAAE,EAAE,CAAC,MAAD,EAAS,MAAT,CAlCW;EAmCfC,GAAG,EAAE,CAAC,KAAD,EAAQ,MAAR,CAnCU;EAoCfC,GAAG,EAAE,CAAC,MAAD,EAAS,OAAT,CApCU;EAqCfC,GAAG,EAAE,CAAC,OAAD,EAAU,MAAV,CArCU;EAsCfC,GAAG,EAAE,CAAC,MAAD,EAAS,OAAT,CAtCU;EAuCfC,GAAG,EAAE,CAAC,MAAD,EAAS,MAAT,CAvCU;EAwCfC,GAAG,EAAE,CAAC,MAAD,EAAS,MAAT,CAxCU;EAyCfC,IAAI,EAAE,CAAC,OAAD,EAAU,OAAV,CAzCS;EA0CfC,IAAI,EAAE,CAAC,OAAD,EAAU,OAAV,CA1CS;EA2CfC,IAAI,EAAE,CAAC,OAAD,EAAU,OAAV,CA3CS;EA4CfC,IAAI,EAAE,CAAC,MAAD,EAAS,OAAT,CA5CS;EA6CfC,IAAI,EAAE,CAAC,KAAD,EAAQ,MAAR,CA7CS;EA8CfC,SAAS,EAAE,CAAC,MAAD,EAAS,KAAT,CA9CI;EA+CfC,KAAK,EAAE,CAAC,KAAD,EAAQ,KAAR,CA/CQ;EAgDfC,KAAK,EAAE,CAAC,KAAD,EAAQ,MAAR,CAhDQ;EAiDfC,MAAM,EAAE,CAAC,KAAD,EAAQ,KAAR,CAjDO;EAkDfC,OAAO,EAAE,CAAC,KAAD,EAAQ,MAAR,CAlDM;EAmDfC,GAAG,EAAE,CAAC,GAAD,EAAM,GAAN;AAnDU,CAAjB;AAqDA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,YAAY,GAAG,SAASA,YAAT,CAAsB/K,CAAtB,EAAyB;EAC1C,OAAO;IACLrH,KAAK,EAAEqH,CAAC,CAAC,CAAD,CADH;IAELpH,MAAM,EAAEoH,CAAC,CAAC,CAAD;EAFJ,CAAP;AAID,CALD;AAMA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIgL,cAAc,GAAG,SAASA,cAAT,CAAwBhL,CAAxB,EAA2B;EAC9C,OAAO;IACLrH,KAAK,EAAEqH,CAAC,CAACpH,MADJ;IAELA,MAAM,EAAEoH,CAAC,CAACrH;EAFL,CAAP;AAID,CALD;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIsS,SAAS,GAAG,SAASA,SAAT,CAAmBjL,CAAnB,EAAsBuF,GAAtB,EAA2B;EACzC,OAAO;IACL5M,KAAK,EAAEqH,CAAC,CAACrH,KAAF,GAAUqH,CAAC,CAACrH,KAAF,GAAU4M,GAApB,GAA0BvF,CAAC,CAACrH,KAD9B;IAELC,MAAM,EAAEoH,CAAC,CAACpH,MAAF,GAAWoH,CAAC,CAACpH,MAAF,GAAW2M,GAAtB,GAA4BvF,CAAC,CAACpH;EAFjC,CAAP;AAID,CALD;AAMA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIsS,aAAa,GAAG,SAASA,aAAT,CAAuBlL,CAAvB,EAA0B;EAC5C,OAAO+K,YAAY,CAAClD,UAAU,CAAC7H,CAAC,CAAC5O,WAAF,EAAD,CAAX,CAAnB;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI+Z,aAAa,GAAG,SAASA,aAAT,CAAuBjH,CAAvB,EAA0B;EAC5C,OAAO6G,YAAY,CAAC,CAAC7G,CAAD,CAAD,CAAnB;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIkH,OAAO,GAAG,SAASA,OAAT,CAAiB/F,IAAjB,EAAuB;EACnC,IAAIC,WAAJ,EAAiB+F,YAAjB;;EAEA,IAAIzT,KAAK,GAAG,CAAC,CAAC0N,WAAW,GAAGD,IAAI,CAACjP,KAApB,MAA+B,IAA/B,IAAuCkP,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACgG,IAAtF,KAA+F,IAA3G;EACA,IAAI/F,GAAG,GAAGzK,UAAU,CAAC,CAAC,CAACuQ,YAAY,GAAGhG,IAAI,CAACjP,KAArB,MAAgC,IAAhC,IAAwCiV,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAAC9F,GAAzF,KAAiG,EAAlG,CAApB;EACA,IAAI7P,IAAI,GAAG,OAAOkC,KAAlB;EACA,IAAI0T,IAAI,GAAG1T,KAAX;;EAEA,IAAIlC,IAAI,KAAK,QAAb,EAAuB;IACrB4V,IAAI,GAAGJ,aAAa,CAACtT,KAAD,CAApB;EACD,CAFD,MAEO,IAAIyI,KAAK,CAAC4E,OAAN,CAAcrN,KAAd,CAAJ,EAA0B;IAC/B0T,IAAI,GAAGP,YAAY,CAACnT,KAAD,CAAnB;EACD,CAFM,MAEA,IAAIlC,IAAI,KAAK,QAAb,EAAuB;IAC5B4V,IAAI,GAAGH,aAAa,CAACvT,KAAD,CAApB;EACD;;EAED0T,IAAI,GAAGL,SAAS,CAACK,IAAD,EAAO/F,GAAG,GAAG,EAAb,CAAhB;EACA,OAAOqC,WAAW,CAACvC,IAAD,CAAX,GAAoB2F,cAAc,CAACM,IAAD,CAAlC,GAA2CA,IAAlD;AACD,CAlBD;AAoBA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIC,eAAe,GAAG,SAASA,eAAT,CAAyBlG,IAAzB,EAA+B;EACnD,IAAIiG,IAAI,GAAGF,OAAO,CAAC/F,IAAD,CAAlB;EACA,IAAIvH,KAAK,GAAGjN,OAAO,CAACwU,IAAI,CAACvH,KAAL,IAAc,EAAf,CAAnB;EACA,OAAOpN,QAAQ,CAAC,EAAD,EAAK2U,IAAL,EAAW;IACxBvH,KAAK,EAAEpN,QAAQ,CAAC,EAAD,EAAKoN,KAAL,EAAYwN,IAAZ;EADS,CAAX,CAAf;AAGD,CAND;AAOA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIE,gBAAgB,GAAG,SAASA,gBAAT,CAA0B9Q,IAA1B,EAAgC;EACrD,IAAI,CAACA,IAAI,CAAChD,QAAV,EAAoB,OAAOgD,IAAP;EACpB,IAAIhD,QAAQ,GAAGgD,IAAI,CAAChD,QAAL,CAActF,GAAd,CAAkBmZ,eAAlB,CAAf;EACA,OAAOrS,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuB,IAAlB,EAAwB;IAC7BhD,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAND;;AAQA,IAAI+T,OAAO,GAAG,SAASA,OAAT,CAAiBhY,IAAjB,EAAuB;EACnC,IAAI4E,WAAJ;;EAEA,OAAO,CAAC,CAACA,WAAW,GAAG5E,IAAI,CAAC2C,KAApB,MAA+B,IAA/B,IAAuCiC,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACqT,KAAtF,MAAiG,IAAxG;AACD,CAJD;AAMA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BlY,IAA3B,EAAiCmF,MAAjC,EAAyC;EAC/D,IAAIH,CAAC,GAAG,CAAR;EACA,IAAI,CAAChF,IAAI,CAACuF,KAAV,EAAiB,OAAO,CAAP;;EAEjB,KAAK,IAAI1G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmB,IAAI,CAACuF,KAAL,CAAWvE,MAA/B,EAAuCnC,CAAC,IAAI,CAA5C,EAA+C;IAC7C,IAAIsZ,IAAI,GAAGnY,IAAI,CAACuF,KAAL,CAAW1G,CAAX,CAAX;IACA,IAAImG,CAAC,GAAGmT,IAAI,CAACpG,GAAL,CAAS5M,MAAb,GAAsBA,MAA1B,EAAkC,OAAOtG,CAAP;IAClCmG,CAAC,IAAImT,IAAI,CAACpG,GAAL,CAAS5M,MAAd;EACD;;EAED,OAAOnF,IAAI,CAACuF,KAAL,CAAWvE,MAAlB;AACD,CAXD;AAaA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIoX,iBAAiB,GAAG,SAASA,iBAAT,CAA2BpY,IAA3B,EAAiCc,KAAjC,EAAwC;EAC9D,IAAIuX,OAAO,GAAG,CAAd;EACA,IAAI,CAACrY,IAAI,CAACuF,KAAV,EAAiB,OAAO8S,OAAP;;EAEjB,KAAK,IAAIxZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiC,KAApB,EAA2BjC,CAAC,IAAI,CAAhC,EAAmC;IACjC,IAAIsZ,IAAI,GAAGnY,IAAI,CAACuF,KAAL,CAAW1G,CAAX,CAAX;IACA,IAAI,CAACsZ,IAAL,EAAW;IACXE,OAAO,IAAIF,IAAI,CAACpG,GAAL,CAAS5M,MAApB;EACD;;EAED,OAAOkT,OAAP;AACD,CAXD;;AAaA,IAAIC,YAAY,GAAG,SAASA,YAAT,CAAsBtY,IAAtB,EAA4BmF,MAA5B,EAAoC;EACrD,IAAIqN,GAAG,GAAG3W,GAAG,CAACmE,IAAD,EAAO,CAAC,KAAD,EAAQ,KAAR,CAAP,EAAuB,CAAvB,CAAb;EACA,IAAIuY,MAAM,GAAG1c,GAAG,CAACmE,IAAD,EAAO,CAAC,OAAD,EAAU,QAAV,CAAP,EAA4B,CAA5B,CAAhB;EACA,IAAIwY,OAAO,GAAG3c,GAAG,CAACmE,IAAD,EAAO,CAAC,OAAD,EAAU,SAAV,CAAP,EAA6B,CAA7B,CAAjB;EACA,IAAIyY,aAAa,GAAGzY,IAAI,CAACuF,KAAL,CAAWvE,MAA/B;EACA,IAAI0X,UAAU,GAAGR,iBAAiB,CAAClY,IAAD,EAAOmF,MAAM,GAAGqN,GAAhB,CAAlC;;EAEA,IAAIkG,UAAU,KAAK,CAAnB,EAAsB;IACpB,OAAO,CAAP;EACD;;EAED,IAAID,aAAa,GAAGD,OAApB,EAA6B;IAC3B,OAAOC,aAAP;EACD;;EAED,IAAIC,UAAU,GAAGF,OAAb,IAAwBC,aAAa,GAAGD,OAAO,GAAGD,MAAtD,EAA8D;IAC5D,OAAO,CAAP;EACD;;EAED,IAAIE,aAAa,KAAKD,OAAO,GAAGD,MAAhC,EAAwC;IACtC,OAAOC,OAAP;EACD;;EAED,IAAIC,aAAa,GAAGC,UAAhB,GAA6BH,MAAjC,EAAyC;IACvC,OAAOE,aAAa,GAAGF,MAAvB;EACD;;EAED,OAAOG,UAAP;AACD,CA5BD,C,CA4BG;;;AAGH,IAAIC,SAAS,GAAG,SAASA,SAAT,CAAmB3Y,IAAnB,EAAyBmF,MAAzB,EAAiC;EAC/C,IAAIyT,eAAe,GAAGN,YAAY,CAACtY,IAAD,EAAOmF,MAAP,CAAlC;EACA,IAAI0T,aAAa,GAAGT,iBAAiB,CAACpY,IAAD,EAAO4Y,eAAP,CAArC;EACA,IAAIE,UAAU,GAAG9Y,IAAI,CAAC+R,GAAL,CAAS5M,MAAT,GAAkB0T,aAAnC;EACA,IAAIE,OAAO,GAAGtT,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IACpC+R,GAAG,EAAE9U,QAAQ,CAAC,EAAD,EAAK+C,IAAI,CAAC+R,GAAV,EAAe;MAC1B5M,MAAM,EAAE0T,aADkB;MAE1BG,iBAAiB,EAAE;IAFO,CAAf,CADuB;IAKpC3O,KAAK,EAAEpN,QAAQ,CAAC,EAAD,EAAK+C,IAAI,CAACqK,KAAV,EAAiB;MAC9B4O,YAAY,EAAE,CADgB;MAE9BC,aAAa,EAAE,CAFe;MAG9BF,iBAAiB,EAAE,CAHW;MAI9BG,sBAAsB,EAAE,CAJM;MAK9BC,uBAAuB,EAAE;IALK,CAAjB,CALqB;IAYpC7T,KAAK,EAAEvF,IAAI,CAACuF,KAAL,CAAWhE,KAAX,CAAiB,CAAjB,EAAoBqX,eAApB;EAZ6B,CAAxB,CAAd;EAcA,IAAIxJ,IAAI,GAAG3J,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IACjC+R,GAAG,EAAE9U,QAAQ,CAAC,EAAD,EAAK+C,IAAI,CAAC+R,GAAV,EAAe;MAC1BS,GAAG,EAAE,CADqB;MAE1BrN,MAAM,EAAE2T,UAFkB;MAG1BO,cAAc,EAAE;IAHU,CAAf,CADoB;IAMjChP,KAAK,EAAEpN,QAAQ,CAAC,EAAD,EAAK+C,IAAI,CAACqK,KAAV,EAAiB;MAC9BiP,SAAS,EAAE,CADmB;MAE9BC,UAAU,EAAE,CAFkB;MAG9BF,cAAc,EAAE,CAHc;MAI9BG,mBAAmB,EAAE,CAJS;MAK9BC,oBAAoB,EAAE;IALQ,CAAjB,CANkB;IAajClU,KAAK,EAAEvF,IAAI,CAACuF,KAAL,CAAWhE,KAAX,CAAiBqX,eAAjB;EAb0B,CAAxB,CAAX;EAeA,OAAO,CAACG,OAAD,EAAU3J,IAAV,CAAP;AACD,CAlCD;;AAoCA,IAAIsK,QAAQ,GAAG,SAASC,MAAT,CAAgB3Z,IAAhB,EAAsB;EACnC,IAAIsS,SAAJ;;EAEA,OAAO,CAAC,CAACA,SAAS,GAAGtS,IAAI,CAAC+R,GAAlB,MAA2B,IAA3B,IAAmCO,SAAS,KAAK,KAAK,CAAtD,GAA0D,KAAK,CAA/D,GAAmEA,SAAS,CAACE,GAA9E,KAAsF,CAA7F;AACD,CAJD;;AAMA,IAAIoH,cAAc,GAAG,SAASA,cAAT,CAAwB5Z,IAAxB,EAA8B;EACjD,IAAImS,WAAJ;;EAEA,OAAO,CAACvW,KAAK,CAAC,CAACuW,WAAW,GAAGnS,IAAI,CAACqK,KAApB,MAA+B,IAA/B,IAAuC8H,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAAChN,MAAtF,CAAb;AACD,CAJD;;AAMA,IAAI0U,SAAS,GAAG,SAASA,SAAT,CAAmB7Z,IAAnB,EAAyBmF,MAAzB,EAAiC;EAC/C,IAAI,CAACnF,IAAL,EAAW,OAAO,CAAC,IAAD,EAAO,IAAP,CAAP;EACX,IAAI8Z,OAAO,GAAGJ,QAAQ,CAAC1Z,IAAD,CAAtB;EACA,IAAI+Y,OAAO,GAAGtT,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IACpC+R,GAAG,EAAE9U,QAAQ,CAAC,EAAD,EAAK+C,IAAI,CAAC+R,GAAV,EAAe;MAC1BiH,iBAAiB,EAAE;IADO,CAAf,CADuB;IAIpC3O,KAAK,EAAEpN,QAAQ,CAAC,EAAD,EAAK+C,IAAI,CAACqK,KAAV,EAAiB;MAC9B4O,YAAY,EAAE,CADgB;MAE9BC,aAAa,EAAE,CAFe;MAG9BF,iBAAiB,EAAE,CAHW;MAI9BG,sBAAsB,EAAE,CAJM;MAK9BC,uBAAuB,EAAE;IALK,CAAjB;EAJqB,CAAxB,CAAd;EAYAL,OAAO,CAAC1O,KAAR,CAAclF,MAAd,GAAuBA,MAAM,GAAG2U,OAAhC;EACA,IAAIhB,UAAU,GAAGc,cAAc,CAAC5Z,IAAD,CAAd,GAAuBA,IAAI,CAAC+R,GAAL,CAAS5M,MAAT,IAAmBA,MAAM,GAAG2U,OAA5B,CAAvB,GAA8D,IAA/E;EACA,IAAI1K,IAAI,GAAG3J,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IACjC+R,GAAG,EAAE9U,QAAQ,CAAC,EAAD,EAAK+C,IAAI,CAAC+R,GAAV,EAAe;MAC1BS,GAAG,EAAE,CADqB;MAE1B6G,cAAc,EAAE;IAFU,CAAf,CADoB;IAKjChP,KAAK,EAAEpN,QAAQ,CAAC,EAAD,EAAK+C,IAAI,CAACqK,KAAV,EAAiB;MAC9BiP,SAAS,EAAE,CADmB;MAE9BC,UAAU,EAAE,CAFkB;MAG9BF,cAAc,EAAE,CAHc;MAI9BG,mBAAmB,EAAE,CAJS;MAK9BC,oBAAoB,EAAE;IALQ,CAAjB;EALkB,CAAxB,CAAX;;EAcA,IAAIX,UAAJ,EAAgB;IACd1J,IAAI,CAAC/E,KAAL,CAAWlF,MAAX,GAAoB2T,UAApB;EACD;;EAED,OAAO,CAACC,OAAD,EAAU3J,IAAV,CAAP;AACD,CApCD;;AAsCA,IAAI2K,cAAc,GAAG,CAAC9d,CAAC,CAAC4M,GAAH,EAAQ5M,CAAC,CAAC+d,IAAV,EAAgB/d,CAAC,CAACiU,KAAlB,EAAyBjU,CAAC,CAACge,MAA3B,CAArB;;AAEA,IAAIC,OAAO,GAAG,SAASA,OAAT,CAAiBla,IAAjB,EAAuB;EACnC,IAAI4E,WAAJ;;EAEA,IAAImV,cAAc,CAACzZ,QAAf,CAAwBN,IAAI,CAACiC,IAA7B,CAAJ,EAAwC,OAAO,KAAP;EACxC,OAAOrG,KAAK,CAAC,CAACgJ,WAAW,GAAG5E,IAAI,CAAC2C,KAApB,MAA+B,IAA/B,IAAuCiC,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACoK,IAAtF,CAAL,GAAmG,IAAnG,GAA0GhP,IAAI,CAAC2C,KAAL,CAAWqM,IAA5H;AACD,CALD;;AAOA,IAAImL,kBAAkB,GAAG,SAASA,kBAAT,CAA4Bna,IAA5B,EAAkCoa,IAAlC,EAAwC;EAC/D,IAAIC,QAAQ,GAAGra,IAAI,CAACsa,SAApB;EACA,OAAOD,QAAQ,GAAGA,QAAQ,CAACF,kBAAT,CAA4BC,IAA5B,CAAH,GAAuC,IAAtD;AACD,CAHD;AAIA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIG,UAAU,GAAG,SAASA,UAAT,CAAoBva,IAApB,EAA0B;EACzC,IAAIqK,KAAK,GAAGrK,IAAI,CAACqK,KAAjB;EAAA,IACI0H,GAAG,GAAG/R,IAAI,CAAC+R,GADf;EAEA,IAAIwH,UAAU,GAAGY,kBAAkB,CAACna,IAAD,EAAO3C,IAAI,CAACmd,QAAZ,CAAlB,KAA4CzI,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACwH,UAA1F,MAA0GlP,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACkP,UAA9J,MAA8KlP,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACoQ,eAAlO,MAAuPpQ,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACqQ,OAA3S,KAAuT,CAAxU;EACA,IAAIC,YAAY,GAAGR,kBAAkB,CAACna,IAAD,EAAO3C,IAAI,CAACud,UAAZ,CAAlB,KAA8C7I,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAAC4I,YAA5F,MAA8GtQ,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACsQ,YAAlK,MAAoLtQ,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACwQ,iBAAxO,MAA+PxQ,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACqQ,OAAnT,KAA+T,CAAlV;EACA,IAAIxB,aAAa,GAAGiB,kBAAkB,CAACna,IAAD,EAAO3C,IAAI,CAACyd,WAAZ,CAAlB,KAA+C/I,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACmH,aAA7F,MAAgH7O,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAAC6O,aAApK,MAAuL7O,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACoQ,eAA3O,MAAgQpQ,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACqQ,OAApT,KAAgU,CAApV;EACA,IAAIK,WAAW,GAAGZ,kBAAkB,CAACna,IAAD,EAAO3C,IAAI,CAAC2d,SAAZ,CAAlB,KAA6CjJ,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACgJ,WAA3F,MAA4G1Q,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAAC0Q,WAAhK,MAAiL1Q,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACwQ,iBAArO,MAA4PxQ,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACqQ,OAAhT,KAA4T,CAA9U;EACA,OAAO;IACLnB,UAAU,EAAEA,UADP;IAELoB,YAAY,EAAEA,YAFT;IAGLzB,aAAa,EAAEA,aAHV;IAIL6B,WAAW,EAAEA;EAJR,CAAP;AAMD,CAbD;;AAeA,IAAIE,WAAW,GAAG,SAASA,WAAT,CAAqBrJ,IAArB,EAA2B;EAC3C,IAAIsJ,WAAJ;;EAEA,IAAIC,WAAW,GAAGZ,UAAU,CAAC3I,IAAD,CAA5B;EAAA,IACIsH,aAAa,GAAGiC,WAAW,CAACjC,aADhC;;EAGA,IAAI/T,MAAM,GAAG,CAAC+V,WAAW,GAAGtJ,IAAI,CAACvH,KAApB,MAA+B,IAA/B,IAAuC6Q,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAAC/V,MAAlG;EACA,OAAOA,MAAM,GAAG+T,aAAhB;AACD,CARD;;AAUA,IAAIkC,cAAc,GAAG,SAASA,cAAT,CAAwBxJ,IAAxB,EAA8B;EACjD,IAAIsJ,WAAJ;;EAEA,IAAI/V,MAAM,GAAG,CAAC+V,WAAW,GAAGtJ,IAAI,CAACvH,KAApB,MAA+B,IAA/B,IAAuC6Q,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAAC/V,MAAlG;;EAEA,IAAIgW,WAAW,GAAGZ,UAAU,CAAC3I,IAAD,CAA5B;EAAA,IACI2H,UAAU,GAAG4B,WAAW,CAAC5B,UAD7B;EAAA,IAEIL,aAAa,GAAGiC,WAAW,CAACjC,aAFhC;;EAIA,OAAO/T,MAAM,GAAG+T,aAAT,GAAyBK,UAAhC;AACD,CAVD;;AAYA,IAAI8B,SAAS,GAAG,CAAC,OAAD,EAAU,UAAV,CAAhB;;AAEA,IAAIC,QAAQ,GAAG,SAASA,QAAT,CAAkBnX,KAAlB,EAAyB;EACtC,OAAO,OAAOA,KAAP,KAAiB,QAAxB;AACD,CAFD;;AAIA,IAAIoX,QAAQ,GAAG,SAASA,QAAT,CAAkBpX,KAAlB,EAAyB;EACtC,OAAO,OAAOA,KAAP,KAAiB,QAAxB;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIqX,cAAc,GAAG,SAASA,cAAT,CAAwB7H,OAAxB,EAAiC;EACpD,IAAI,CAACA,OAAL,EAAc,OAAO,IAAP;EACd,IAAI2H,QAAQ,CAAC3H,OAAD,CAAR,IAAqB4H,QAAQ,CAAC5H,OAAD,CAAjC,EAA4C,OAAO;IACjD1R,IAAI,EAAE/F,YAD2C;IAEjDiI,KAAK,EAAE,KAAKwP;EAFqC,CAAP;EAI5C,IAAI,CAAC2H,QAAQ,CAAC3H,OAAO,CAAC1R,IAAT,CAAb,EAA6B,OAAOuZ,cAAc,CAAC7H,OAAO,CAAC1R,IAAR,CAAa0R,OAAO,CAAChR,KAArB,CAAD,CAArB;;EAE7B,IAAIV,IAAI,GAAG0R,OAAO,CAAC1R,IAAnB;EAAA,IACIwZ,cAAc,GAAG9H,OAAO,CAAChR,KAD7B;EAAA,IAEI+Y,oBAAoB,GAAGD,cAAc,CAACpR,KAF1C;EAAA,IAGIA,KAAK,GAAGqR,oBAAoB,KAAK,KAAK,CAA9B,GAAkC,EAAlC,GAAuCA,oBAHnD;EAAA,IAIIC,qBAAqB,GAAGF,cAAc,CAACxX,QAJ3C;EAAA,IAKIA,QAAQ,GAAG0X,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBALvD;EAAA,IAMIhZ,KAAK,GAAGrF,6BAA6B,CAACme,cAAD,EAAiBJ,SAAjB,CANzC;;EAQA,IAAIO,YAAY,GAAG9f,SAAS,CAACmI,QAAD,CAAT,CAAoBtF,GAApB,CAAwB6c,cAAxB,CAAnB;EACA,OAAO;IACLvZ,IAAI,EAAEA,IADD;IAELoI,KAAK,EAAEA,KAFF;IAGL1H,KAAK,EAAEA,KAHF;IAILoP,GAAG,EAAE,EAJA;IAKL9N,QAAQ,EAAE2X;EALL,CAAP;AAOD,CAxBD;AA0BA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIC,cAAc,GAAG,SAASA,cAAT,CAAwBC,KAAxB,EAA+B;EAClD,IAAIC,GAAG,GAAG,CAAV;EACA,IAAIC,GAAG,GAAGC,QAAV;EACA,IAAI,CAACH,KAAD,IAAUA,KAAK,CAAC9a,MAAN,KAAiB,CAA/B,EAAkC,OAAO,CAAP;;EAElC,KAAK,IAAInC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGid,KAAK,CAAC9a,MAA1B,EAAkCnC,CAAC,IAAI,CAAvC,EAA0C;IACxC,IAAImB,IAAI,GAAG8b,KAAK,CAACjd,CAAD,CAAhB;IACAmd,GAAG,GAAGxN,IAAI,CAACwN,GAAL,CAASA,GAAT,EAAchc,IAAI,CAAC+R,GAAL,CAASS,GAAvB,CAAN;IACAuJ,GAAG,GAAGvN,IAAI,CAACuN,GAAL,CAASA,GAAT,EAAc/b,IAAI,CAAC+R,GAAL,CAASS,GAAT,GAAexS,IAAI,CAAC+R,GAAL,CAAS5M,MAAtC,CAAN;EACD;;EAED,OAAO4W,GAAG,GAAGC,GAAb;AACD,CAZD;AAcA;;;AAEA,IAAIE,QAAQ,GAAG,SAASA,QAAT,CAAkBlc,IAAlB,EAAwB;EACrC,IAAI4E,WAAJ;;EAEA,OAAO,CAAC,CAACA,WAAW,GAAG5E,IAAI,CAAC2C,KAApB,MAA+B,IAA/B,IAAuCiC,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACuX,KAAtF,KAAgG,KAAvG;AACD,CAJD;;AAMA,IAAIC,mBAAmB,GAAG,SAASA,mBAAT,CAA6Bpc,IAA7B,EAAmC;EAC3D,IAAI6E,YAAJ;;EAEA,OAAO,CAACA,YAAY,GAAG7E,IAAI,CAAC2C,KAArB,MAAgC,IAAhC,IAAwCkC,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAACwX,gBAA/F;AACD,CAJD;;AAMA,IAAIC,oBAAoB,GAAG,SAASA,oBAAT,CAA8B3I,OAA9B,EAAuC;EAChE,OAAO,UAAUxO,MAAV,EAAkB;IACvB,OAAOqJ,IAAI,CAACwN,GAAL,CAASrI,OAAO,CAAC5B,GAAR,CAAY5M,MAArB,EAA6BA,MAA7B,CAAP;EACD,CAFD;AAGD,CAJD;;AAMA,IAAIoX,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,QAA1B,EAAoCrX,MAApC,EAA4C;EACjE,IAAI4I,MAAM,GAAG,CAAb;;EAEA,KAAK,IAAIlP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2d,QAAQ,CAACxb,MAA7B,EAAqCnC,CAAC,IAAI,CAA1C,EAA6C;IAC3C,IAAI8U,OAAO,GAAG6I,QAAQ,CAAC3d,CAAD,CAAtB;IACA,IAAI,CAAC8U,OAAO,CAAC5B,GAAb,EAAkB;IAClB,IAAI0K,eAAe,GAAGtX,MAAM,GAAGwO,OAAO,CAAC5B,GAAR,CAAYS,GAA3C;IACA,IAAIkK,aAAa,GAAG/I,OAAO,CAAChR,KAAR,CAAc+Z,aAAd,IAA+BJ,oBAAoB,CAAC3I,OAAD,CAAvE;;IAEA,IAAIA,OAAO,IAAI8I,eAAf,EAAgC;MAC9B1O,MAAM,IAAI2O,aAAa,CAACvX,MAAM,GAAGwO,OAAO,CAAC5B,GAAR,CAAYS,GAAtB,CAAvB;IACD;EACF;;EAED,OAAOzE,MAAP;AACD,CAfD;;AAiBA,IAAI4O,WAAW,GAAG,SAASA,WAAT,CAAqBzY,KAArB,EAA4B0Y,cAA5B,EAA4CzX,MAA5C,EAAoD;EACpE,IAAIkX,gBAAgB,GAAGD,mBAAmB,CAAClY,KAAD,CAA1C;EACA,IAAIwY,aAAa,GAAGH,gBAAgB,CAACK,cAAD,EAAiBzX,MAAjB,CAApC;EACA,IAAI0X,YAAY,GAAGhB,cAAc,CAACe,cAAD,CAAjC;EACA,IAAIE,WAAW,GAAG3X,MAAM,GAAGjB,KAAK,CAAC6N,GAAN,CAAUS,GAAV,GAAgBtO,KAAK,CAAC6N,GAAN,CAAU5M,MAArD;EACA,IAAI4X,UAAU,GAAG7C,OAAO,CAAChW,KAAD,CAAxB;EACA,OAAOgY,QAAQ,CAAChY,KAAD,CAAR,IAAmB,CAAC6Y,UAAD,IAAeD,WAAlC,IAAiDT,gBAAgB,GAAGQ,YAAnB,IAAmCH,aAAa,GAAGL,gBAA3G;AACD,CAPD;;AASA,IAAIW,oBAAoB,GAAG,CAAC,IAAD,EAAO;AAClC,IAD2B,CACtB;AADsB,CAA3B;;AAIA,IAAIC,kBAAkB,GAAG,SAASA,kBAAT,CAA4Bxd,IAA5B,EAAkC;EACzD,OAAOud,oBAAoB,CAAC7W,MAArB,CAA4B,UAAUC,GAAV,EAAehH,SAAf,EAA0B;IAC3D,IAAIK,IAAI,IAAIA,IAAI,CAACE,oBAAb,IAAqCF,IAAI,CAACE,oBAAL,CAA0BP,SAA1B,CAAzC,EAA+E;MAC7E,OAAOgH,GAAP;IACD;;IAED,OAAO,GAAGqL,MAAH,CAAUrL,GAAV,EAAe,CAACgI,MAAM,CAACC,YAAP,CAAoBjP,SAApB,CAAD,CAAf,CAAP;EACD,CANM,EAMJ,EANI,CAAP;AAOD,CARD;;AAUA,IAAI8d,WAAW,GAAG,SAASA,WAAT,CAAqBza,SAArB,EAAgC;EAChD,OAAOA,SAAS,CAAC9D,GAAV,CAAc,UAAUqP,QAAV,EAAoB;IACvC,IAAImP,UAAU,GAAGF,kBAAkB,CAACjP,QAAQ,CAAC/N,UAAT,CAAoBR,IAArB,CAAnC;IACA,IAAI2d,WAAW,GAAG,IAAIC,MAAJ,CAAWF,UAAU,CAACpQ,IAAX,CAAgB,GAAhB,CAAX,CAAlB;IACA,OAAO;MACLtM,MAAM,EAAEuN,QAAQ,CAACvN,MAAT,CAAgB2H,OAAhB,CAAwBgV,WAAxB,EAAqC,EAArC,CADH;MAELnd,UAAU,EAAE+N,QAAQ,CAAC/N;IAFhB,CAAP;EAID,CAPM,CAAP;AAQD,CATD;;AAWA,IAAIqd,aAAa,GAAG,CAACJ,WAAD,EAAcpP,WAAd,CAApB;;AAEA,IAAIyP,SAAS,GAAG,SAAStN,OAAT,CAAiBjQ,IAAjB,EAAuB;EACrC,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAACiU,KAAvB;AACD,CAFD;;AAIA,IAAIsN,gBAAgB,GAAG,SAASxb,cAAT,CAAwBhC,IAAxB,EAA8B;EACnD,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAACC,YAAvB;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIoG,YAAY,GAAG,SAASA,YAAT,CAAsBC,SAAtB,EAAiCC,QAAjC,EAA2Cib,UAA3C,EAAuDC,KAAvD,EAA8D;EAC/E,IAAIhb,eAAJ,EAAqBib,gBAArB;;EAEA,IAAID,KAAK,KAAK,KAAK,CAAnB,EAAsB;IACpBA,KAAK,GAAG,CAAR;EACD;;EAED,IAAI,CAAClb,QAAL,EAAe,OAAO,CAAC;IACrB/B,MAAM,EAAE;EADa,CAAD,CAAP;EAGf,IAAIgC,SAAS,GAAG,EAAhB;EACA,IAAImb,eAAe,GAAGpb,QAAQ,CAAC6H,KAA/B;EAAA,IACIwT,qBAAqB,GAAGD,eAAe,CAACla,KAD5C;EAAA,IAEIA,KAAK,GAAGma,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,OAAnC,GAA6CA,qBAFzD;EAAA,IAGIC,qBAAqB,GAAGF,eAAe,CAAC7a,UAH5C;EAAA,IAIIA,UAAU,GAAG+a,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,WAAnC,GAAiDA,qBAJlE;EAAA,IAKI9a,UAAU,GAAG4a,eAAe,CAAC5a,UALjC;EAAA,IAMIC,SAAS,GAAG2a,eAAe,CAAC3a,SANhC;EAAA,IAOI8a,qBAAqB,GAAGH,eAAe,CAAC1d,QAP5C;EAAA,IAQIA,QAAQ,GAAG6d,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBARvD;EAAA,IASIC,qBAAqB,GAAGJ,eAAe,CAACK,SAT5C;EAAA,IAUIA,SAAS,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,MAAnC,GAA4CA,qBAV5D;EAAA,IAWIE,UAAU,GAAGN,eAAe,CAACM,UAXjC;EAAA,IAYI/b,cAAc,GAAGyb,eAAe,CAACzb,cAZrC;EAAA,IAaIgB,mBAAmB,GAAGya,eAAe,CAACza,mBAb1C;EAAA,IAcIC,mBAAmB,GAAGwa,eAAe,CAACxa,mBAd1C;EAAA,IAeIC,aAAa,GAAGua,eAAe,CAACva,aAfpC;EAAA,IAgBI8a,aAAa,GAAGP,eAAe,CAACO,aAhBpC;EAAA,IAiBIC,UAAU,GAAGR,eAAe,CAACQ,UAjBjC;EAAA,IAkBI9a,OAAO,GAAGsa,eAAe,CAACta,OAlB9B;EAmBA,IAAI+a,IAAI,GAAG;IACTtb,UAAU,EAAEA,UADH;IAETC,UAAU,EAAEA,UAFH;IAGTC,SAAS,EAAEA;EAHF,CAAX;EAKA,IAAIM,GAAG,GAAGhB,SAAS,GAAGA,SAAS,CAACiB,OAAV,CAAkB6a,IAAlB,CAAH,GAA6B,IAAhD;EACA,IAAI5e,IAAI,GAAG8D,GAAG,GAAGA,GAAG,CAACE,IAAP,GAAcV,UAA5B,CApC+E,CAoCvC;;EAExC,IAAIub,eAAe,GAAGZ,KAAK,KAAK,CAAV,GAAc,IAAd,GAAqBlb,QAAQ,CAAC6H,KAAT,CAAeiU,eAA1D;EACA,IAAIre,UAAU,GAAG;IACfR,IAAI,EAAEA,IADS;IAEfiE,KAAK,EAAEA,KAFQ;IAGfJ,OAAO,EAAEA,OAHM;IAIfpD,QAAQ,EAAEA,QAJK;IAKfoe,eAAe,EAAEA,eALF;IAMfjW,KAAK,EAAE4V,SANQ;IAOfM,MAAM,EAAEH,UAPO;IAQfI,gBAAgB,EAAEL,aARH;IASfpa,WAAW,EAAEX,mBATE;IAUfO,cAAc,EAAEP,mBAVD;IAWfQ,SAAS,EAAEzB,cAAc,KAAK,WAAnB,IAAkCA,cAAc,KAAK,wBAArD,IAAiFA,cAAc,KAAK,wBAXhG;IAYf2B,MAAM,EAAE3B,cAAc,KAAK,cAAnB,IAAqCA,cAAc,KAAK,wBAAxD,IAAoFA,cAAc,KAAK,wBAZhG;IAaf6B,WAAW,EAAEb,mBAAmB,IAAIO,KAbrB;IAcfG,cAAc,EAAEV,mBAAmB,IAAIO,KAdxB;IAef+a,IAAI,EAAEhB,UAAU,KAAK,CAAC/a,eAAe,GAAGF,QAAQ,CAACG,KAA5B,MAAuC,IAAvC,IAA+CD,eAAe,KAAK,KAAK,CAAxE,GAA4E,KAAK,CAAjF,GAAqFA,eAAe,CAAC5E,GAA1G,CAAV,KAA6H,CAAC6f,gBAAgB,GAAGnb,QAAQ,CAACG,KAA7B,MAAwC,IAAxC,IAAgDgb,gBAAgB,KAAK,KAAK,CAA1E,GAA8E,KAAK,CAAnF,GAAuFA,gBAAgB,CAAC/O,IAArO,CAfS;IAgBfsP,UAAU,EAAEA,UAAU,GAAGA,UAAU,GAAGhe,QAAhB,GAA2B;EAhBlC,CAAjB;;EAmBA,KAAK,IAAIrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2D,QAAQ,CAACyB,QAAT,CAAkBjD,MAAtC,EAA8CnC,CAAC,IAAI,CAAnD,EAAsD;IACpD,IAAIqF,KAAK,GAAG1B,QAAQ,CAACyB,QAAT,CAAkBpF,CAAlB,CAAZ;;IAEA,IAAI0e,SAAS,CAACrZ,KAAD,CAAb,EAAsB;MACpBzB,SAAS,CAACtB,IAAV,CAAe;QACbV,MAAM,EAAE2N,MAAM,CAACC,YAAP,CAAoB,MAApB,CADK;QAEbpO,UAAU,EAAEhD,QAAQ,CAAC,EAAD,EAAKgD,UAAL,EAAiB;UACnCqO,UAAU,EAAE;YACVpJ,KAAK,EAAEhB,KAAK,CAACmG,KAAN,CAAYnF,KAAZ,IAAqBhF,QADlB;YAEViF,MAAM,EAAEjB,KAAK,CAACmG,KAAN,CAAYlF,MAAZ,IAAsBjF,QAFpB;YAGV0N,KAAK,EAAE1J,KAAK,CAAC0J,KAAN,CAAYnK;UAHT;QADuB,CAAjB;MAFP,CAAf;IAUD,CAXD,MAWO,IAAI+Z,gBAAgB,CAACtZ,KAAD,CAApB,EAA6B;MAClCzB,SAAS,CAACtB,IAAV,CAAe;QACbV,MAAM,EAAEjD,aAAa,CAAC0G,KAAK,CAACC,KAAP,EAAcd,aAAd,CADR;QAEbpD,UAAU,EAAEA;MAFC,CAAf;IAID,CALM,MAKA,IAAIiE,KAAJ,EAAW;MAChB,IAAIwa,UAAJ;;MAEA,CAACA,UAAU,GAAGjc,SAAd,EAAyBtB,IAAzB,CAA8BiD,KAA9B,CAAoCsa,UAApC,EAAgDpc,YAAY,CAACC,SAAD,EAAY2B,KAAZ,EAAmBjE,UAAU,CAACwe,IAA9B,EAAoCf,KAAK,GAAG,CAA5C,CAA5D;IACD;EACF;;EAED,KAAK,IAAIiB,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGrB,aAAa,CAACtc,MAApC,EAA4C2d,EAAE,IAAI,CAAlD,EAAqD;IACnD,IAAIC,YAAY,GAAGtB,aAAa,CAACqB,EAAD,CAAhC;IACAlc,SAAS,GAAGmc,YAAY,CAACnc,SAAD,CAAxB;EACD;;EAED,OAAOA,SAAP;AACD,CA1FD;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI6B,mBAAmB,GAAG,SAASA,mBAAT,CAA6B/B,SAA7B,EAAwCC,QAAxC,EAAkD;EAC1E,IAAIC,SAAS,GAAGH,YAAY,CAACC,SAAD,EAAYC,QAAZ,CAA5B;EACA,OAAO5F,aAAa,CAAC6F,SAAD,CAApB;AACD,CAHD;;AAKA,IAAIoc,OAAO,GAAG;EACZtiB,WAAW,EAAEA,WADD;EAEZC,aAAa,EAAEA,aAFH;EAGZ2F,cAAc,EAAExF,gBAHJ;EAIZF,cAAc,EAAEA,cAJJ;EAKZC,eAAe,EAAEA,eALL;EAMZ6D,gBAAgB,EAAEA;AANN,CAAd;AAQA,IAAIue,MAAM,GAAGxiB,YAAY,CAACuiB,OAAD,CAAzB;;AAEA,IAAIE,WAAW,GAAG,SAASA,WAAT,CAAqB/e,IAArB,EAA2B;EAC3C,IAAImS,WAAJ;;EAEA,OAAO,CAACA,WAAW,GAAGnS,IAAI,CAACqK,KAApB,MAA+B,IAA/B,IAAuC8H,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAAC6M,QAA5F;AACD,CAJD;;AAMA,IAAIC,eAAe,GAAG,SAASA,eAAT,CAAyBjf,IAAzB,EAA+B;EACnD,IAAIoS,YAAJ;;EAEA,OAAO,CAACA,YAAY,GAAGpS,IAAI,CAACqK,KAArB,MAAgC,IAAhC,IAAwC+H,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAAC8M,YAA/F;AACD,CAJD;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIvX,YAAY,GAAG,SAASA,YAAT,CAAsBzC,KAAtB,EAA6BC,MAA7B,EAAqCnF,IAArC,EAA2C;EAC5D,IAAIgf,QAAQ,GAAGD,WAAW,CAAC/e,IAAD,CAA1B;EACA,IAAIkf,YAAY,GAAGD,eAAe,CAACjf,IAAD,CAAlC;EACA,OAAO;IACL+E,CAAC,EAAE,CADE;IAELC,CAAC,EAAE,CAFE;IAGLE,KAAK,EAAEA,KAHF;IAIL8Z,QAAQ,EAAEA,QAJL;IAKL7Z,MAAM,EAAEA,MAAM,IAAI8W,QALb;IAMLkD,YAAY,EAAED;EANT,CAAP;AAQD,CAXD;AAYA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIE,gBAAgB,GAAG,SAASA,gBAAT,CAA0B7c,SAA1B,EAAqCvC,IAArC,EAA2C;EAChE,OAAO;IACLqf,kBAAkB,EAAErf,IAAI,CAAC2C,KAAL,CAAW0c,kBAD1B;IAEL7a,sBAAsB,EAAE;MACtBC,MAAM,EAAE,CAAC,GADa;MAEtBC,KAAK,EAAE,CAAC;IAFc,CAFnB;IAMLU,mBAAmB,EAAEpF,IAAI,CAAC2C,KAAL,CAAWyC,mBAAX,KAAmC7C,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAAC8C,sBAAV,EAAzF,KAAgI;EANhJ,CAAP;AAQD,CATD;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIO,UAAU,GAAG,SAASA,UAAT,CAAoB5F,IAApB,EAA0BkF,KAA1B,EAAiCC,MAAjC,EAAyC5C,SAAzC,EAAoD;EACnE,IAAIuC,gBAAgB,GAAGR,mBAAmB,CAAC/B,SAAD,EAAYvC,IAAZ,CAA1C;EACA,IAAIiF,SAAS,GAAG0C,YAAY,CAACzC,KAAD,EAAQC,MAAR,EAAgBnF,IAAhB,CAA5B;EACA,IAAIsf,OAAO,GAAGF,gBAAgB,CAAC7c,SAAD,EAAYvC,IAAZ,CAA9B;EACA,IAAIuF,KAAK,GAAGuZ,MAAM,CAACha,gBAAD,EAAmBG,SAAnB,EAA8Bqa,OAA9B,CAAlB;EACA,OAAO/Z,KAAK,CAACY,MAAN,CAAa,UAAUC,GAAV,EAAe+R,IAAf,EAAqB;IACvC,OAAO,GAAG1G,MAAH,CAAUrL,GAAV,EAAe+R,IAAf,CAAP;EACD,CAFM,EAEJ,EAFI,CAAP;AAGD,CARD;;AAUA,IAAIoH,QAAQ,GAAG,SAAS5W,MAAT,CAAgB1G,IAAhB,EAAsB;EACnC,OAAO,UAAUjC,IAAV,EAAgB;IACrB,OAAOA,IAAI,CAACiC,IAAL,KAAcA,IAArB;EACD,CAFD;AAGD,CAJD;;AAMA,IAAIud,OAAO,GAAGD,QAAQ,CAACtjB,CAAC,CAAC4M,GAAH,CAAtB;AACA,IAAI4W,QAAQ,GAAGF,QAAQ,CAACtjB,CAAC,CAAC8M,IAAH,CAAvB;;AAEA,IAAI2W,aAAa,GAAG,SAASA,aAAT,CAAuB1f,IAAvB,EAA6B;EAC/C,OAAO,CAACwf,OAAO,CAACxf,IAAD,CAAR,IAAkB,CAACyf,QAAQ,CAACzf,IAAD,CAAlC;AACD,CAFD;;AAIA,IAAI2f,gBAAgB,GAAG,SAASA,gBAAT,CAA0B3f,IAA1B,EAAgC;EACrD,OAAOyf,QAAQ,CAACzf,IAAD,CAAR,IAAkB,CAACA,IAAI,CAACuF,KAA/B;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIqa,iBAAiB,GAAG,SAASA,iBAAT,CAA2B5f,IAA3B,EAAiCuC,SAAjC,EAA4C;EAClE,IAAIod,gBAAgB,CAAC3f,IAAD,CAApB,EAA4B;IAC1B,IAAIkF,KAAK,GAAGlF,IAAI,CAAC+R,GAAL,CAAS7M,KAAT,IAAkBlF,IAAI,CAAC+R,GAAL,CAAS4I,YAAT,GAAwB3a,IAAI,CAAC+R,GAAL,CAASgJ,WAAnD,CAAZ;IACA,IAAI5V,MAAM,GAAGnF,IAAI,CAAC+R,GAAL,CAAS5M,MAAT,IAAmBnF,IAAI,CAAC+R,GAAL,CAASwH,UAAT,GAAsBvZ,IAAI,CAAC+R,GAAL,CAASmH,aAAlD,CAAb,CAF0B,CAEqD;;IAE/ElZ,IAAI,CAACuF,KAAL,GAAaK,UAAU,CAAC5F,IAAD,EAAOkF,KAAP,EAAcC,MAAd,EAAsB5C,SAAtB,CAAvB;EACD;;EAED,IAAImd,aAAa,CAAC1f,IAAD,CAAjB,EAAyB;IACvB,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;;IAEpB,IAAI6f,QAAQ,GAAG,SAASA,QAAT,CAAkB3b,KAAlB,EAAyB;MACtC,OAAO0b,iBAAiB,CAAC1b,KAAD,EAAQ3B,SAAR,CAAxB;IACD,CAFD;;IAIA,IAAI0B,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBkhB,QAAlB,CAAf;IACA,OAAOpa,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;MAC7BiE,QAAQ,EAAEA;IADmB,CAAxB,CAAP;EAGD;;EAED,OAAOjE,IAAP;AACD,CAtBD;;AAwBA,IAAI8f,oBAAoB,GAAG,CAAC,OAAD,EAAU,YAAV,EAAwB,UAAxB,EAAoC,WAApC,EAAiD,YAAjD,EAA+D,eAA/D,EAAgF,SAAhF,EAA2F,gBAA3F,EAA6G,eAA7G,EAA8H,YAA9H,EAA4I,WAA5I,EAAyJ,YAAzJ,EAAuK,aAAvK,CAA3B;;AAEA,IAAIC,OAAO,GAAG,SAASC,KAAT,CAAehgB,IAAf,EAAqB;EACjC,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAAC4M,GAAvB;AACD,CAFD,C,CAEG;;;AAGH,IAAIoX,WAAW,GAAG,SAASA,WAAT,CAAqBC,SAArB,EAAgC/b,KAAhC,EAAuCgc,cAAvC,EAAuD;EACvE,QAAQD,SAAR;IACE,KAAK,gBAAL;MACE;QACE;QACA,OAAO,CAACC,cAAD,EAAiBhc,KAAjB,EAAwBqC,MAAxB,CAA+B,UAAU+F,CAAV,EAAa;UACjD,OAAOA,CAAC,IAAIA,CAAC,KAAK,MAAlB;QACD,CAFM,EAEJQ,IAFI,CAEC,GAFD,CAAP;MAGD;;IAEH;MACE,OAAO5I,KAAP;EAVJ;AAYD,CAbD,C,CAaG;;;AAGH,IAAIic,KAAK,GAAG,SAASA,KAAT,CAAeC,eAAf,EAAgChW,KAAhC,EAAuC;EACjD,IAAIiW,YAAY,GAAGrjB,QAAQ,CAAC,EAAD,EAAKojB,eAAL,CAA3B;;EAEA5a,MAAM,CAAC8a,OAAP,CAAelW,KAAf,EAAsBuG,OAAtB,CAA8B,UAAUpQ,IAAV,EAAgB;IAC5C,IAAI0f,SAAS,GAAG1f,IAAI,CAAC,CAAD,CAApB;IAAA,IACI2D,KAAK,GAAG3D,IAAI,CAAC,CAAD,CADhB;IAEA8f,YAAY,CAACJ,SAAD,CAAZ,GAA0BD,WAAW,CAACC,SAAD,EAAY/b,KAAZ,EAAmBkc,eAAe,CAACH,SAAD,CAAlC,CAArC;EACD,CAJD;EAKA,OAAOI,YAAP;AACD,CATD;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIlW,WAAW,GAAG,SAASA,WAAT,CAAqBiW,eAArB,EAAsC;EACtD,OAAO,UAAUrgB,IAAV,EAAgB;IACrB,IAAIqK,KAAK,GAAG+V,KAAK,CAACC,eAAD,EAAkBrgB,IAAI,CAACqK,KAAL,IAAc,EAAhC,CAAjB;IACA,OAAO5E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;MAC7BqK,KAAK,EAAEA;IADsB,CAAxB,CAAP;EAGD,CALD;AAMD,CAPD;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAImW,kBAAkB,GAAG,SAASA,kBAAT,CAA4BxgB,IAA5B,EAAkC;EACzD,IAAI+f,OAAO,CAAC/f,IAAD,CAAX,EAAmB,OAAOA,IAAP;EACnB,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;EACpB,IAAIygB,aAAa,GAAGllB,IAAI,CAACukB,oBAAD,EAAuB9f,IAAI,CAACqK,KAAL,IAAc,EAArC,CAAxB;EACA,IAAIU,YAAY,GAAGvP,OAAO,CAACglB,kBAAD,EAAqBpW,WAAW,CAACqW,aAAD,CAAhC,CAA1B;EACA,IAAIxc,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBoM,YAAlB,CAAf;EACA,OAAOtF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CATD;;AAWA,IAAIyc,iBAAiB,GAAG,SAASA,iBAAT,CAA2B1gB,IAA3B,EAAiCoa,IAAjC,EAAuC;EAC7D,IAAIC,QAAQ,GAAGra,IAAI,CAACsa,SAApB;EACA,OAAOD,QAAQ,GAAGA,QAAQ,CAACqG,iBAAT,CAA2BtG,IAA3B,CAAH,GAAsC,IAArD;AACD,CAHD;AAIA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIuG,SAAS,GAAG,SAASA,SAAT,CAAmB3gB,IAAnB,EAAyB;EACvC,IAAIqK,KAAK,GAAGrK,IAAI,CAACqK,KAAjB;EAAA,IACI0H,GAAG,GAAG/R,IAAI,CAAC+R,GADf;EAEA,IAAIuH,SAAS,GAAGoH,iBAAiB,CAAC1gB,IAAD,EAAO3C,IAAI,CAACmd,QAAZ,CAAjB,KAA2CzI,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACuH,SAAzF,MAAwGjP,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACiP,SAA5J,MAA2KjP,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACuW,cAA/N,MAAmPvW,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACwW,MAAvS,KAAkT,CAAlU;EACA,IAAIC,WAAW,GAAGJ,iBAAiB,CAAC1gB,IAAD,EAAO3C,IAAI,CAACud,UAAZ,CAAjB,KAA6C7I,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAAC+O,WAA3F,MAA4GzW,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACyW,WAAhK,MAAiLzW,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAAC0W,gBAArO,MAA2P1W,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACwW,MAA/S,KAA0T,CAA5U;EACA,IAAI5H,YAAY,GAAGyH,iBAAiB,CAAC1gB,IAAD,EAAO3C,IAAI,CAACyd,WAAZ,CAAjB,KAA8C/I,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACkH,YAA5F,MAA8G5O,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAAC4O,YAAlK,MAAoL5O,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACuW,cAAxO,MAA4PvW,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACwW,MAAhT,KAA2T,CAA9U;EACA,IAAIG,UAAU,GAAGN,iBAAiB,CAAC1gB,IAAD,EAAO3C,IAAI,CAAC2d,SAAZ,CAAjB,KAA4CjJ,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACiP,UAA1F,MAA0G3W,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAAC2W,UAA9J,MAA8K3W,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAAC0W,gBAAlO,MAAwP1W,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACwW,MAA5S,KAAuT,CAAxU;EACA,OAAO;IACLvH,SAAS,EAAEA,SADN;IAELwH,WAAW,EAAEA,WAFR;IAGL7H,YAAY,EAAEA,YAHT;IAIL+H,UAAU,EAAEA;EAJP,CAAP;AAMD,CAbD;AAeA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBjhB,IAArB,EAA2B;EAC3C,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;EACA,OAAO;IACL9H,GAAG,EAAE,CAAC6H,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC6G,cAAT,EAArD,KAAmF,CADnF;IAELC,KAAK,EAAE,CAAC9G,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC+G,gBAAT,EAArD,KAAqF,CAFvF;IAGLC,MAAM,EAAE,CAAChH,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACiH,iBAAT,EAArD,KAAsF,CAHzF;IAIL/O,IAAI,EAAE,CAAC8H,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACkH,eAAT,EAArD,KAAoF;EAJrF,CAAP;AAMD,CARD;;AAUA,IAAIC,iBAAiB,GAAG;EACtBtc,KAAK,EAAE,CADe;EAEtBC,MAAM,EAAE;AAFc,CAAxB;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIsc,YAAY,GAAG,SAASA,YAAT,CAAsBzhB,IAAtB,EAA4B;EAC7C,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;EACA,IAAI,CAACD,QAAL,EAAe,OAAOmH,iBAAP;EACf,OAAO;IACLtc,KAAK,EAAEmV,QAAQ,CAACqH,gBAAT,EADF;IAELvc,MAAM,EAAEkV,QAAQ,CAACsH,iBAAT;EAFH,CAAP;AAID,CAPD;;AASA,IAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BvH,QAA3B,EAAqCD,IAArC,EAA2C;EACjE,OAAOC,QAAQ,GAAGA,QAAQ,CAACuH,iBAAT,CAA2BxH,IAA3B,CAAH,GAAsC,CAArD;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIyH,cAAc,GAAG,SAASA,cAAT,CAAwB7hB,IAAxB,EAA8B;EACjD,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;EACA,OAAO;IACLjB,cAAc,EAAEuI,iBAAiB,CAACvH,QAAD,EAAWhd,IAAI,CAACmd,QAAhB,CAD5B;IAELsH,gBAAgB,EAAEF,iBAAiB,CAACvH,QAAD,EAAWhd,IAAI,CAACud,UAAhB,CAF9B;IAGL5B,iBAAiB,EAAE4I,iBAAiB,CAACvH,QAAD,EAAWhd,IAAI,CAACyd,WAAhB,CAH/B;IAILiH,eAAe,EAAEH,iBAAiB,CAACvH,QAAD,EAAWhd,IAAI,CAAC2d,SAAhB;EAJ7B,CAAP;AAMD,CARD;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIgH,UAAU,GAAG,SAASA,UAAT,CAAoB7d,KAApB,EAA2B;EAC1C,OAAO,UAAUnE,IAAV,EAAgB;IACrB,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;;IAEA,IAAID,QAAJ,EAAc;MACZA,QAAQ,CAAC2H,UAAT,CAAoB7d,KAAK,KAAK,MAAV,GAAmB9G,IAAI,CAAC4kB,YAAxB,GAAuC5kB,IAAI,CAAC6kB,YAAhE;IACD;;IAED,OAAOliB,IAAP;EACD,CARD;AASD,CAVD;;AAYA,IAAImiB,QAAQ,GAAG;EACbC,MAAM,EAAE/kB,IAAI,CAACglB,eADA;EAEbC,MAAM,EAAEjlB,IAAI,CAACklB;AAFA,CAAf;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBre,KAArB,EAA4B;EAC5C,OAAO,UAAUnE,IAAV,EAAgB;IACrB,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;;IAEA,IAAI,CAAC1e,KAAK,CAACuI,KAAD,CAAN,IAAiBkW,QAArB,EAA+B;MAC7B,IAAIoI,QAAQ,GAAGN,QAAQ,CAAChe,KAAD,CAAR,IAAmB9G,IAAI,CAACqlB,gBAAvC;MACArI,QAAQ,CAACmI,WAAT,CAAqBC,QAArB;IACD;;IAED,OAAOziB,IAAP;EACD,CATD;AAUD,CAXD;;AAaA,IAAI2iB,SAAS,GAAG;EACd3T,IAAI,EAAE3R,IAAI,CAACulB,SADG;EAEd,gBAAgBvlB,IAAI,CAACwlB;AAFP,CAAhB;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqB3e,KAArB,EAA4B;EAC5C,OAAO,UAAUnE,IAAV,EAAgB;IACrB,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;;IAEA,IAAID,QAAJ,EAAc;MACZ,IAAI0I,QAAQ,GAAGJ,SAAS,CAACxe,KAAD,CAAT,IAAoB9G,IAAI,CAAC2lB,YAAxC;MACA3I,QAAQ,CAACyI,WAAT,CAAqBC,QAArB;IACD;;IAED,OAAO/iB,IAAP;EACD,CATD;AAUD,CAXD;AAaA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIijB,YAAY,GAAG,SAASA,YAAT,CAAsBC,IAAtB,EAA4B9I,IAA5B,EAAkC;EACnD,OAAO,UAAUjW,KAAV,EAAiB;IACtB,OAAO,UAAUnE,IAAV,EAAgB;MACrB,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;;MAEA,IAAI,CAAC1e,KAAK,CAACuI,KAAD,CAAN,IAAiBkW,QAArB,EAA+B;QAC7B,IAAI8I,OAAO,GAAG,CAACvnB,KAAK,CAACwe,IAAD,CAApB;QACA,IAAIgJ,WAAW,GAAG,QAAQhoB,UAAU,CAAC8nB,IAAD,CAApC;QACA,IAAIG,UAAU,GAAGD,WAAW,GAAG,MAA/B;QACA,IAAIE,aAAa,GAAGF,WAAW,GAAG,SAAlC;QACA,IAAIla,OAAO,GAAGxN,YAAY,CAACyI,KAAD,CAA1B;;QAEA,IAAI+E,OAAO,IAAI,CAACmR,QAAQ,CAACiJ,aAAD,CAAxB,EAAyC;UACvC,MAAM,IAAIxT,KAAJ,CAAU,yCAAyCoT,IAAzC,GAAgD,WAA1D,CAAN;QACD;;QAED,IAAIha,OAAJ,EAAa;UACX,IAAIia,OAAJ,EAAa;YACX,IAAII,qBAAJ;;YAEA,CAACA,qBAAqB,GAAGlJ,QAAQ,CAACiJ,aAAD,CAAjC,MAAsD,IAAtD,IAA8DC,qBAAqB,KAAK,KAAK,CAA7F,GAAiG,KAAK,CAAtG,GAA0GA,qBAAqB,CAACC,IAAtB,CAA2BnJ,QAA3B,EAAqCD,IAArC,EAA2ClR,OAAO,CAAC/E,KAAnD,CAA1G;UACD,CAJD,MAIO;YACL,IAAIsf,sBAAJ;;YAEA,CAACA,sBAAsB,GAAGpJ,QAAQ,CAACiJ,aAAD,CAAlC,MAAuD,IAAvD,IAA+DG,sBAAsB,KAAK,KAAK,CAA/F,GAAmG,KAAK,CAAxG,GAA4GA,sBAAsB,CAACD,IAAvB,CAA4BnJ,QAA5B,EAAsCnR,OAAO,CAAC/E,KAA9C,CAA5G;UACD;QACF,CAVD,MAUO,IAAIA,KAAK,KAAK,MAAd,EAAsB;UAC3B,IAAIgf,OAAJ,EAAa;YACX,IAAIO,oBAAJ;;YAEA,CAACA,oBAAoB,GAAGrJ,QAAQ,CAACgJ,UAAD,CAAhC,MAAkD,IAAlD,IAA0DK,oBAAoB,KAAK,KAAK,CAAxF,GAA4F,KAAK,CAAjG,GAAqGA,oBAAoB,CAACF,IAArB,CAA0BnJ,QAA1B,EAAoCD,IAApC,CAArG;UACD,CAJD,MAIO,IAAI8I,IAAI,KAAK,WAAb,EAA0B;YAC/B;YACA7I,QAAQ,CAACsJ,YAAT,CAAsBtmB,IAAI,CAACumB,SAA3B;UACD,CAHM,MAGA;YACL,IAAIC,qBAAJ;;YAEA,CAACA,qBAAqB,GAAGxJ,QAAQ,CAACgJ,UAAD,CAAjC,MAAmD,IAAnD,IAA2DQ,qBAAqB,KAAK,KAAK,CAA1F,GAA8F,KAAK,CAAnG,GAAuGA,qBAAqB,CAACL,IAAtB,CAA2BnJ,QAA3B,CAAvG;UACD;QACF,CAbM,MAaA,IAAI8I,OAAJ,EAAa;UAClB,IAAIW,qBAAJ;;UAEA,CAACA,qBAAqB,GAAGzJ,QAAQ,CAAC+I,WAAD,CAAjC,MAAoD,IAApD,IAA4DU,qBAAqB,KAAK,KAAK,CAA3F,GAA+F,KAAK,CAApG,GAAwGA,qBAAqB,CAACN,IAAtB,CAA2BnJ,QAA3B,EAAqCD,IAArC,EAA2CjW,KAA3C,CAAxG;QACD,CAJM,MAIA;UACL,IAAI4f,sBAAJ;;UAEA,CAACA,sBAAsB,GAAG1J,QAAQ,CAAC+I,WAAD,CAAlC,MAAqD,IAArD,IAA6DW,sBAAsB,KAAK,KAAK,CAA7F,GAAiG,KAAK,CAAtG,GAA0GA,sBAAsB,CAACP,IAAvB,CAA4BnJ,QAA5B,EAAsClW,KAAtC,CAA1G;QACD;MACF;;MAED,OAAOnE,IAAP;IACD,CAjDD;EAkDD,CAnDD;AAoDD,CArDD;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIgkB,WAAW,GAAG,SAASA,WAAT,CAAqB7f,KAArB,EAA4B;EAC5C,OAAO,UAAUnE,IAAV,EAAgB;IACrB,OAAOijB,YAAY,CAAC,UAAD,CAAZ,CAAyB9e,KAAK,IAAI,CAAlC,EAAqCnE,IAArC,CAAP;EACD,CAFD;AAGD,CAJD;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAI2jB,YAAY,GAAGV,YAAY,CAAC,WAAD,CAA/B;AAEA,IAAIgB,KAAK,GAAG;EACV,cAAc5mB,IAAI,CAAC6mB,gBADT;EAEVC,MAAM,EAAE9mB,IAAI,CAAC+mB,YAFH;EAGV,YAAY/mB,IAAI,CAACgnB,cAHP;EAIVC,OAAO,EAAEjnB,IAAI,CAACknB,aAJJ;EAKVC,QAAQ,EAAEnnB,IAAI,CAAConB,cALL;EAMV,iBAAiBpnB,IAAI,CAACqnB,mBANZ;EAOV,gBAAgBrnB,IAAI,CAACsnB;AAPX,CAAZ;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,QAAQ,GAAG,SAASA,QAAT,CAAkB1B,IAAlB,EAAwB;EACrC,OAAO,UAAU/e,KAAV,EAAiB;IACtB,OAAO,UAAUnE,IAAV,EAAgB;MACrB,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;MACA,IAAIuK,YAAY,GAAG3B,IAAI,KAAK,OAAT,GAAmB7lB,IAAI,CAACknB,aAAxB,GAAwClnB,IAAI,CAACynB,UAAhE;;MAEA,IAAIzK,QAAJ,EAAc;QACZ,IAAIhS,KAAK,GAAG4b,KAAK,CAAC9f,KAAD,CAAL,IAAgB0gB,YAA5B;QACAxK,QAAQ,CAAC,aAAajf,UAAU,CAAC8nB,IAAD,CAAxB,CAAR,CAAwC7a,KAAxC;MACD;;MAED,OAAOrI,IAAP;IACD,CAVD;EAWD,CAZD;AAaD,CAdD;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAI+kB,YAAY,GAAGH,QAAQ,CAAC,MAAD,CAA3B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAII,aAAa,GAAGJ,QAAQ,CAAC,OAAD,CAA5B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIK,aAAa,GAAG,SAASA,aAAT,CAAuB9gB,KAAvB,EAA8B;EAChD,OAAO,UAAUnE,IAAV,EAAgB;IACrB,OAAOijB,YAAY,CAAC,YAAD,CAAZ,CAA2B9e,KAAK,IAAI,CAApC,EAAuCnE,IAAvC,CAAP;EACD,CAFD;AAGD,CAJD;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIklB,cAAc,GAAG,SAASA,cAAT,CAAwB/gB,KAAxB,EAA+B;EAClD,OAAO,UAAUnE,IAAV,EAAgB;IACrB,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;;IAEA,IAAI,CAAC1e,KAAK,CAACuI,KAAD,CAAN,IAAiBkW,QAArB,EAA+B;MAC7BA,QAAQ,CAAC6K,cAAT,CAAwB/gB,KAAxB;IACD;;IAED,OAAOnE,IAAP;EACD,CARD;AASD,CAVD;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAImlB,eAAe,GAAGP,QAAQ,CAAC,SAAD,CAA9B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIQ,eAAe,GAAG,SAASA,eAAT,CAAyBjhB,KAAzB,EAAgC;EACpD,OAAO,UAAUnE,IAAV,EAAgB;IACrB,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;;IAEA,IAAI,CAAC1e,KAAK,CAACuI,KAAD,CAAN,IAAiBkW,QAArB,EAA+B;MAC7BA,QAAQ,CAAC+K,eAAT,CAAyBjhB,KAAK,KAAK,UAAV,GAAuB9G,IAAI,CAACgoB,sBAA5B,GAAqDhoB,IAAI,CAACioB,sBAAnF;IACD;;IAED,OAAOtlB,IAAP;EACD,CARD;AASD,CAVD;;AAYA,IAAIulB,eAAe,GAAG;EACpBC,GAAG,EAAEnoB,IAAI,CAACooB,kBADU;EAEpB,eAAepoB,IAAI,CAACqoB,0BAFA;EAGpB,kBAAkBroB,IAAI,CAACsoB;AAHH,CAAtB;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,gBAAgB,GAAG,SAASA,gBAAT,CAA0BzhB,KAA1B,EAAiC;EACtD,OAAO,UAAUnE,IAAV,EAAgB;IACrB,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;;IAEA,IAAID,QAAJ,EAAc;MACZ,IAAIwL,aAAa,GAAGN,eAAe,CAACphB,KAAD,CAAf,IAA0B9G,IAAI,CAACyoB,qBAAnD;MACAzL,QAAQ,CAACuL,gBAAT,CAA0BC,aAA1B;IACD;;IAED,OAAO7lB,IAAP;EACD,CATD;AAUD,CAXD;;AAaA,IAAI+lB,eAAe,GAAG;EACpB5B,MAAM,EAAE9mB,IAAI,CAAC2oB,cADO;EAEpB,YAAY3oB,IAAI,CAAC4oB,gBAFG;EAGpB,iBAAiB5oB,IAAI,CAAC6oB,qBAHF;EAIpB,gBAAgB7oB,IAAI,CAAC8oB,oBAJD;EAKpB,gBAAgB9oB,IAAI,CAAC+oB;AALD,CAAtB;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BliB,KAA3B,EAAkC;EACxD,OAAO,UAAUnE,IAAV,EAAgB;IACrB,IAAIqa,QAAQ,GAAGra,IAAI,CAACsa,SAApB;;IAEA,IAAI,CAAC1e,KAAK,CAACuI,KAAD,CAAN,IAAiBkW,QAArB,EAA+B;MAC7B,IAAIiM,cAAc,GAAGP,eAAe,CAAC5hB,KAAD,CAAf,IAA0B9G,IAAI,CAACkpB,kBAApD;MACAlM,QAAQ,CAACgM,iBAAT,CAA2BC,cAA3B;IACD;;IAED,OAAOtmB,IAAP;EACD,CATD;AAUD,CAXD;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIwmB,YAAY,GAAGvD,YAAY,CAAC,QAAD,EAAW5lB,IAAI,CAACmd,QAAhB,CAA/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIiM,cAAc,GAAGxD,YAAY,CAAC,QAAD,EAAW5lB,IAAI,CAACud,UAAhB,CAAjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI8L,eAAe,GAAGzD,YAAY,CAAC,QAAD,EAAW5lB,IAAI,CAACyd,WAAhB,CAAlC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI6L,aAAa,GAAG1D,YAAY,CAAC,QAAD,EAAW5lB,IAAI,CAAC2d,SAAhB,CAAhC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI4L,aAAa,GAAG3D,YAAY,CAAC,SAAD,EAAY5lB,IAAI,CAACmd,QAAjB,CAAhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIqM,eAAe,GAAG5D,YAAY,CAAC,SAAD,EAAY5lB,IAAI,CAACud,UAAjB,CAAlC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIkM,gBAAgB,GAAG7D,YAAY,CAAC,SAAD,EAAY5lB,IAAI,CAACyd,WAAjB,CAAnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIiM,cAAc,GAAG9D,YAAY,CAAC,SAAD,EAAY5lB,IAAI,CAAC2d,SAAjB,CAAjC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIgM,YAAY,GAAG/D,YAAY,CAAC,QAAD,EAAW5lB,IAAI,CAACmd,QAAhB,CAA/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIyM,cAAc,GAAGhE,YAAY,CAAC,QAAD,EAAW5lB,IAAI,CAACud,UAAhB,CAAjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIsM,eAAe,GAAGjE,YAAY,CAAC,QAAD,EAAW5lB,IAAI,CAACyd,WAAhB,CAAlC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIqM,aAAa,GAAGlE,YAAY,CAAC,QAAD,EAAW5lB,IAAI,CAAC2d,SAAhB,CAAhC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIoM,cAAc,GAAGnE,YAAY,CAAC,UAAD,EAAa5lB,IAAI,CAACmd,QAAlB,CAAjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI6M,gBAAgB,GAAGpE,YAAY,CAAC,UAAD,EAAa5lB,IAAI,CAACud,UAAlB,CAAnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI0M,iBAAiB,GAAGrE,YAAY,CAAC,UAAD,EAAa5lB,IAAI,CAACyd,WAAlB,CAApC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIyM,eAAe,GAAGtE,YAAY,CAAC,UAAD,EAAa5lB,IAAI,CAAC2d,SAAlB,CAAlC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIwM,QAAQ,GAAGvE,YAAY,CAAC,OAAD,CAA3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIwE,WAAW,GAAGxE,YAAY,CAAC,UAAD,CAA9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIyE,WAAW,GAAGzE,YAAY,CAAC,UAAD,CAA9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI0E,SAAS,GAAG1E,YAAY,CAAC,QAAD,CAA5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI2E,YAAY,GAAG3E,YAAY,CAAC,WAAD,CAA/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI4E,YAAY,GAAG5E,YAAY,CAAC,WAAD,CAA/B;;AAEA,IAAI6E,cAAc,GAAG,SAASA,cAAT,CAAwBlgB,OAAxB,EAAiC;EACpD,IAAI,CAACA,OAAL,EAAc,OAAO,IAAP;EACd,OAAO,CAACA,OAAO,CAACJ,IAAR,GAAeI,OAAO,CAACN,IAAxB,KAAiCM,OAAO,CAACH,IAAR,GAAeG,OAAO,CAACL,IAAxD,CAAP;AACD,CAHD;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIwgB,eAAe,GAAG,SAASC,aAAT,CAAuBpW,IAAvB,EAA6B5R,IAA7B,EAAmC;EACvD,OAAO,UAAUkF,KAAV,EAAiB+iB,SAAjB,EAA4B9iB,MAA5B,EAAoC+iB,UAApC,EAAgD;IACrD,IAAIC,WAAW,GAAGL,cAAc,CAAC9nB,IAAI,CAAC2C,KAAL,CAAWkF,OAAZ,CAAd,IAAsC,CAAxD;;IAEA,IAAIogB,SAAS,KAAK5qB,IAAI,CAAC+qB,oBAAnB,IAA2CH,SAAS,KAAK5qB,IAAI,CAACgrB,oBAAlE,EAAwF;MACtF,OAAO;QACLnjB,KAAK,EAAEA,KADF;QAELC,MAAM,EAAED,KAAK,GAAGijB;MAFX,CAAP;IAID;;IAED,IAAID,UAAU,KAAK7qB,IAAI,CAAC+qB,oBAAxB,EAA8C;MAC5C,OAAO;QACLljB,KAAK,EAAEC,MAAM,GAAGgjB;MADX,CAAP;IAGD;;IAED,OAAO,EAAP;EACD,CAjBD;AAkBD,CAnBD;AAqBA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIG,UAAU,GAAG,SAASA,UAAT,CAAoBtoB,IAApB,EAA0B;EACzC,IAAI,CAACA,IAAI,CAACuF,KAAV,EAAiB,OAAO,CAAP;EACjB,OAAOiJ,IAAI,CAACuN,GAAL,CAAS3X,KAAT,CAAeoK,IAAf,EAAqB,CAAC,CAAD,EAAIiD,MAAJ,CAAWzR,IAAI,CAACuF,KAAL,CAAW5G,GAAX,CAAe,UAAUwZ,IAAV,EAAgB;IACpE,OAAO5a,YAAY,CAAC4a,IAAD,CAAnB;EACD,CAFsC,CAAX,CAArB,CAAP;AAGD,CALD;AAOA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIoQ,WAAW,GAAG,SAASA,WAAT,CAAqBvoB,IAArB,EAA2B;EAC3C,IAAI,CAACA,IAAI,CAACuF,KAAV,EAAiB,OAAO,CAAC,CAAR;EACjB,OAAOvF,IAAI,CAACuF,KAAL,CAAWY,MAAX,CAAkB,UAAUC,GAAV,EAAe+R,IAAf,EAAqB;IAC5C,OAAO/R,GAAG,GAAG+R,IAAI,CAACpG,GAAL,CAAS5M,MAAtB;EACD,CAFM,EAEJ,CAFI,CAAP;AAGD,CALD;AAOA;;;AACA,IAAIqjB,iBAAiB,GAAG;EACtBrE,MAAM,EAAE,GADc;EAEtBhD,KAAK,EAAE;AAFe,CAAxB;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIsH,WAAW,GAAG,SAASA,WAAT,CAAqB7W,IAArB,EAA2B5R,IAA3B,EAAiCuC,SAAjC,EAA4C;EAC5D,OAAO,UAAU2C,KAAV,EAAiB+iB,SAAjB,EAA4B9iB,MAA5B,EAAoC;IACzC,IAAI8iB,SAAS,KAAK5qB,IAAI,CAAC+qB,oBAAvB,EAA6C;MAC3C,IAAI,CAACpoB,IAAI,CAACuF,KAAV,EAAiBvF,IAAI,CAACuF,KAAL,GAAaK,UAAU,CAAC5F,IAAD,EAAOkF,KAAP,EAAcC,MAAd,EAAsB5C,SAAtB,CAAvB;MACjB,OAAO;QACL4C,MAAM,EAAEojB,WAAW,CAACvoB,IAAD;MADd,CAAP;IAGD;;IAED,IAAIioB,SAAS,KAAK5qB,IAAI,CAACgrB,oBAAvB,EAA6C;MAC3C,IAAIlW,WAAJ;;MAEA,IAAIuW,WAAW,GAAGF,iBAAiB,CAAC,CAACrW,WAAW,GAAGnS,IAAI,CAACqK,KAApB,MAA+B,IAA/B,IAAuC8H,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAAC8L,SAAtF,CAAjB,IAAqH,CAAvI;;MAEA,IAAI,CAACje,IAAI,CAACuF,KAAV,EAAiB;QACfvF,IAAI,CAACuF,KAAL,GAAaK,UAAU,CAAC5F,IAAD,EAAOkF,KAAP,EAAcC,MAAd,EAAsB5C,SAAtB,CAAvB;QACAvC,IAAI,CAAC2oB,WAAL,GAAmB,CAACzjB,KAAK,GAAGojB,UAAU,CAACtoB,IAAD,CAAnB,IAA6B0oB,WAAhD,CAFe,CAE8C;MAC9D;;MAED,OAAO;QACLvjB,MAAM,EAAEojB,WAAW,CAACvoB,IAAD,CADd;QAELkF,KAAK,EAAEsJ,IAAI,CAACwN,GAAL,CAAS9W,KAAT,EAAgBojB,UAAU,CAACtoB,IAAD,CAA1B;MAFF,CAAP;IAID;;IAED,OAAO,EAAP;EACD,CAzBD;AA0BD,CA3BD;AA6BA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAI4oB,QAAQ,GAAG,SAASA,QAAT,CAAkB5oB,IAAlB,EAAwB;EACrC,IAAI6oB,WAAJ;;EAEA,OAAO,CAACA,WAAW,GAAG7oB,IAAI,CAAC4N,KAApB,MAA+B,IAA/B,IAAuCib,WAAW,KAAK,KAAK,CAA5D,IAAiEA,WAAW,CAACplB,IAA7E,GAAoFzD,IAAI,CAAC4N,KAAL,CAAW1I,KAAX,GAAmBlF,IAAI,CAAC4N,KAAL,CAAWzI,MAAlH,GAA2H,CAAlI;AACD,CAJD;AAMA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAI2jB,YAAY,GAAG,SAASA,YAAT,CAAsBlX,IAAtB,EAA4B;EAC7C,IAAImX,SAAJ;;EAEA,OAAOntB,KAAK,CAAC,CAACmtB,SAAS,GAAGnX,IAAI,CAACG,GAAlB,MAA2B,IAA3B,IAAmCgX,SAAS,KAAK,KAAK,CAAtD,GAA0D,KAAK,CAA/D,GAAmEA,SAAS,CAAC5jB,MAA9E,CAAZ;AACD,CAJD;;AAMA,IAAI6jB,eAAe,GAAG,EAAtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,YAAY,GAAG,SAASA,YAAT,CAAsBrX,IAAtB,EAA4B5R,IAA5B,EAAkC;EACnD,OAAO,UAAUkF,KAAV,EAAiB+iB,SAAjB,EAA4B9iB,MAA5B,EAAoC+iB,UAApC,EAAgD;IACrD,IAAIgB,UAAU,GAAGN,QAAQ,CAAC5oB,IAAD,CAAzB;IACA,IAAImpB,WAAW,GAAGxI,SAAS,CAAC3gB,IAAD,CAA3B;IACA,IAAIopB,WAAW,GAAG7O,UAAU,CAAC3I,IAAD,CAA5B;IACA,IAAIyX,QAAQ,GAAGP,YAAY,CAAClX,IAAD,CAAZ,GAAqBqK,QAArB,GAAgCrK,IAAI,CAACG,GAAL,CAAS5M,MAAT,GAAkBikB,WAAW,CAAC7P,UAA9B,GAA2C6P,WAAW,CAAClQ,aAAvD,GAAuEiQ,WAAW,CAAC7P,SAAnF,GAA+F6P,WAAW,CAAClQ,YAA3G,GAA0H+P,eAAzK,CAJqD,CAIqI;;IAE1L,IAAI,CAAChpB,IAAI,CAAC4N,KAAV,EAAiB,OAAO;MACtB1I,KAAK,EAAE,CADe;MAEtBC,MAAM,EAAE;IAFc,CAAP;;IAKjB,IAAI8iB,SAAS,KAAK5qB,IAAI,CAAC+qB,oBAAnB,IAA2CF,UAAU,KAAK7qB,IAAI,CAACisB,sBAAnE,EAA2F;MACzF,IAAIC,YAAY,GAAGrkB,KAAK,GAAGgkB,UAA3B;MACA,OAAO;QACL/jB,MAAM,EAAEqJ,IAAI,CAACwN,GAAL,CAASqN,QAAT,EAAmBE,YAAnB;MADH,CAAP;IAGD;;IAED,IAAIrB,UAAU,KAAK7qB,IAAI,CAAC+qB,oBAApB,KAA6CH,SAAS,KAAK5qB,IAAI,CAACgrB,oBAAnB,IAA2CJ,SAAS,KAAK5qB,IAAI,CAACisB,sBAA3G,CAAJ,EAAwI;MACtI,OAAO;QACLpkB,KAAK,EAAEsJ,IAAI,CAACwN,GAAL,CAAS7W,MAAM,GAAG+jB,UAAlB,EAA8BhkB,KAA9B;MADF,CAAP;IAGD;;IAED,IAAI+iB,SAAS,KAAK5qB,IAAI,CAAC+qB,oBAAnB,IAA2CF,UAAU,KAAK7qB,IAAI,CAACgrB,oBAAnE,EAAyF;MACvF,IAAImB,aAAa,GAAGtkB,KAAK,GAAGgkB,UAA5B;;MAEA,OAAO;QACL/jB,MAAM,EAAEqJ,IAAI,CAACwN,GAAL,CAAS7W,MAAT,EAAiBkkB,QAAjB,EAA2BG,aAA3B;MADH,CAAP;IAGD;;IAED,IAAIvB,SAAS,KAAK5qB,IAAI,CAACgrB,oBAAnB,IAA2CH,UAAU,KAAK7qB,IAAI,CAACgrB,oBAAnE,EAAyF;MACvF,IAAIa,UAAU,GAAG,CAAjB,EAAoB;QAClB,OAAO;UACLhkB,KAAK,EAAEA,KADF;UAELC,MAAM,EAAEqJ,IAAI,CAACwN,GAAL,CAAS9W,KAAK,GAAGgkB,UAAjB,EAA6B/jB,MAA7B;QAFH,CAAP;MAID;;MAED,OAAO;QACLA,MAAM,EAAEA,MADH;QAELD,KAAK,EAAEsJ,IAAI,CAACwN,GAAL,CAAS7W,MAAM,GAAG+jB,UAAlB,EAA8BhkB,KAA9B;MAFF,CAAP;IAID;;IAED,OAAO;MACLC,MAAM,EAAEA,MADH;MAELD,KAAK,EAAEA;IAFF,CAAP;EAID,CAlDD;AAmDD,CApDD;AAsDA;;;AACA,IAAIukB,aAAa,GAAG,EAApB;;AAEA,IAAIC,MAAM,GAAG,SAASA,MAAT,CAAgBxjB,MAAhB,EAAwB;EACnC,OAAOsI,IAAI,CAACuN,GAAL,CAAS3X,KAAT,CAAeoK,IAAf,EAAqB,CAAC,CAACyN,QAAF,EAAYxK,MAAZ,CAAmBvL,MAAnB,CAArB,CAAP;AACD,CAFD;AAGA;AACA;AACA;AACA;;;AAGA,IAAIyjB,UAAU,GAAG,SAASA,UAAT,GAAsB;EACrC,IAAIC,GAAG,GAAG,EAAV;EACA,IAAIC,MAAM,GAAG,EAAb;;EAEA,IAAIC,GAAG,GAAG,SAASA,GAAT,GAAe;IACvB,OAAOF,GAAP;EACD,CAFD;;EAIA,IAAIG,QAAQ,GAAG,SAASA,QAAT,CAAkBhlB,CAAlB,EAAqBC,CAArB,EAAwB;IACrC,OAAO6kB,MAAM,CAAC1oB,IAAP,CAAY,CAAC4D,CAAD,EAAIC,CAAJ,CAAZ,CAAP;EACD,CAFD;;EAIA,IAAIglB,MAAM,GAAG,SAASA,MAAT,GAAkB;IAC7BD,QAAQ,CAAC3lB,KAAT,CAAe,KAAK,CAApB,EAAuBiI,SAAvB;IACA,OAAOud,GAAP;EACD,CAHD;;EAKA,IAAIK,IAAI,GAAG,SAASA,IAAT,CAAcllB,CAAd,EAAiBC,CAAjB,EAAoBklB,CAApB,EAAuBC,CAAvB,EAA0B;IACnCJ,QAAQ,CAAChlB,CAAD,EAAIC,CAAJ,CAAR;IACA+kB,QAAQ,CAAChlB,CAAC,GAAGmlB,CAAL,EAAQllB,CAAR,CAAR;IACA+kB,QAAQ,CAAChlB,CAAD,EAAIC,CAAC,GAAGmlB,CAAR,CAAR;IACAJ,QAAQ,CAAChlB,CAAC,GAAGmlB,CAAL,EAAQllB,CAAC,GAAGmlB,CAAZ,CAAR;IACA,OAAOP,GAAP;EACD,CAND;;EAQA,IAAIQ,OAAO,GAAG,SAASA,OAAT,CAAiBrlB,CAAjB,EAAoBC,CAApB,EAAuB0E,EAAvB,EAA2BC,EAA3B,EAA+B;IAC3CA,EAAE,GAAGA,EAAE,IAAID,EAAX;IACAqgB,QAAQ,CAAChlB,CAAC,GAAG2E,EAAL,EAAS1E,CAAC,GAAG2E,EAAb,CAAR;IACAogB,QAAQ,CAAChlB,CAAC,GAAG2E,EAAL,EAAS1E,CAAC,GAAG2E,EAAb,CAAR;IACAogB,QAAQ,CAAChlB,CAAC,GAAG2E,EAAL,EAAS1E,CAAC,GAAG2E,EAAb,CAAR;IACAogB,QAAQ,CAAChlB,CAAC,GAAG2E,EAAL,EAAS1E,CAAC,GAAG2E,EAAb,CAAR;IACA,OAAOigB,GAAP;EACD,CAPD;;EASA,IAAIS,OAAO,GAAG,SAASA,OAAT,GAAmB;IAC/BR,MAAM,CAAC1oB,IAAP,CAAYiD,KAAZ,CAAkBylB,MAAlB,EAA0Bxd,SAA1B;IACA,OAAOud,GAAP;EACD,CAHD,CAlCqC,CAqClC;;;EAGHA,GAAG,CAACK,IAAJ,GAAWA,IAAX;EACAL,GAAG,CAACI,MAAJ,GAAaA,MAAb;EACAJ,GAAG,CAACU,MAAJ,GAAaN,MAAb;EACAJ,GAAG,CAACW,MAAJ,GAAaH,OAAb;EACAR,GAAG,CAACS,OAAJ,GAAcA,OAAd;EACAT,GAAG,CAACQ,OAAJ,GAAcA,OAAd;EACAR,GAAG,CAACY,WAAJ,GAAkBP,IAAlB,CA9CqC,CA8Cb;;EAExBL,GAAG,CAACnsB,IAAJ,GAAWqsB,GAAX;EACAF,GAAG,CAACa,IAAJ,GAAWX,GAAX;EACAF,GAAG,CAACc,SAAJ,GAAgBZ,GAAhB;EACAF,GAAG,CAACe,aAAJ,GAAoBb,GAApB;EACAF,GAAG,CAACgB,gBAAJ,GAAuBd,GAAvB;EACAF,GAAG,CAAC/nB,KAAJ,GAAYioB,GAAZ;EACAF,GAAG,CAACiB,MAAJ,GAAaf,GAAb;EACAF,GAAG,CAACkB,SAAJ,GAAgBhB,GAAhB,CAvDqC,CAuDhB;;EAErBF,GAAG,CAACmB,IAAJ,GAAWjB,GAAX;EACAF,GAAG,CAACoB,IAAJ,GAAWlB,GAAX;EACAF,GAAG,CAACqB,IAAJ,GAAWnB,GAAX;EACAF,GAAG,CAAC/mB,IAAJ,GAAWinB,GAAX;EACAF,GAAG,CAACnqB,IAAJ,GAAWqqB,GAAX;EACAF,GAAG,CAAC7f,MAAJ,GAAa+f,GAAb;EACAF,GAAG,CAACsB,OAAJ,GAAcpB,GAAd;EACAF,GAAG,CAACtmB,OAAJ,GAAcwmB,GAAd;EACAF,GAAG,CAACuB,OAAJ,GAAcrB,GAAd;EACAF,GAAG,CAACwB,QAAJ,GAAetB,GAAf;EACAF,GAAG,CAAC1pB,QAAJ,GAAe4pB,GAAf;EACAF,GAAG,CAACyB,SAAJ,GAAgBvB,GAAhB;EACAF,GAAG,CAAC0B,UAAJ,GAAiBxB,GAAjB;EACAF,GAAG,CAAC2B,WAAJ,GAAkBzB,GAAlB;EACAF,GAAG,CAAC4B,WAAJ,GAAkB1B,GAAlB;EACAF,GAAG,CAAC6B,aAAJ,GAAoB3B,GAApB;EACAF,GAAG,CAAC8B,cAAJ,GAAqB5B,GAArB;EACAF,GAAG,CAAC+B,cAAJ,GAAqB7B,GAArB;;EAEAF,GAAG,CAACgC,QAAJ,GAAe,YAAY;IACzB,OAAOlC,MAAM,CAACG,MAAM,CAAClrB,GAAP,CAAW,UAAUktB,CAAV,EAAa;MACpC,OAAOA,CAAC,CAAC,CAAD,CAAR;IACD,CAFa,CAAD,CAAb;EAGD,CAJD;;EAMAjC,GAAG,CAACkC,SAAJ,GAAgB,YAAY;IAC1B,OAAOpC,MAAM,CAACG,MAAM,CAAClrB,GAAP,CAAW,UAAUktB,CAAV,EAAa;MACpC,OAAOA,CAAC,CAAC,CAAD,CAAR;IACD,CAFa,CAAD,CAAb;EAGD,CAJD;;EAMA,OAAOjC,GAAP;AACD,CAzFD;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI5B,aAAa,GAAG,SAASA,aAAT,CAAuBpW,IAAvB,EAA6B5R,IAA7B,EAAmC;EACrD,OAAO,YAAY;IACjB,IAAImpB,WAAW,GAAGxI,SAAS,CAAC3gB,IAAD,CAA3B;IACA,IAAIopB,WAAW,GAAG7O,UAAU,CAAC3I,IAAD,CAA5B;IACA,IAAIyX,QAAQ,GAAGP,YAAY,CAAClX,IAAD,CAAZ,GAAqBqK,QAArB,GAAgCrK,IAAI,CAACG,GAAL,CAAS5M,MAAT,GAAkBikB,WAAW,CAAC7P,UAA9B,GAA2C6P,WAAW,CAAClQ,aAAvD,GAAuEiQ,WAAW,CAAC7P,SAAnF,GAA+F6P,WAAW,CAAClQ,YAA3G,GAA0HwQ,aAAzK;IACA,IAAIG,GAAG,GAAGD,UAAU,EAApB;IACA3pB,IAAI,CAAC2C,KAAL,CAAWopB,KAAX,CAAiBnC,GAAjB;IACA,IAAI1kB,KAAK,GAAG0kB,GAAG,CAACgC,QAAJ,EAAZ;IACA,IAAIzmB,MAAM,GAAGqJ,IAAI,CAACwN,GAAL,CAASqN,QAAT,EAAmBO,GAAG,CAACkC,SAAJ,EAAnB,CAAb;IACA,OAAO;MACL3mB,MAAM,EAAEA,MADH;MAELD,KAAK,EAAEA;IAFF,CAAP;EAID,CAZD;AAaD,CAdD;;AAgBA,IAAI8mB,SAAS,GAAG,WAAhB;AACA,IAAIC,WAAW,GAAG5uB,IAAI,CAAC6uB,MAAL,CAAYC,MAAZ,EAAlB;AACAF,WAAW,CAACG,mBAAZ,CAAgC,CAAhC;;AAEA,IAAIC,QAAQ,GAAG,SAAS1jB,MAAT,CAAgB1G,IAAhB,EAAsB;EACnC,OAAO,UAAUjC,IAAV,EAAgB;IACrB,OAAOA,IAAI,CAACiC,IAAL,KAAcA,IAArB;EACD,CAFD;AAGD,CAJD;;AAMA,IAAI+d,KAAK,GAAGqM,QAAQ,CAACpwB,CAAC,CAAC4M,GAAH,CAApB;AACA,IAAIyjB,QAAQ,GAAGD,QAAQ,CAACpwB,CAAC,CAAC8M,IAAH,CAAvB;AACA,IAAIwjB,MAAM,GAAGF,QAAQ,CAACpwB,CAAC,CAAC+d,IAAH,CAArB;AACA,IAAIwS,MAAM,GAAGH,QAAQ,CAACpwB,CAAC,CAACwwB,IAAH,CAArB;AACA,IAAIxc,OAAO,GAAGoc,QAAQ,CAACpwB,CAAC,CAACiU,KAAH,CAAtB;AACA,IAAIwc,QAAQ,GAAGL,QAAQ,CAACpwB,CAAC,CAACge,MAAH,CAAvB;AACA,IAAI0S,gBAAgB,GAAGN,QAAQ,CAACpwB,CAAC,CAACC,YAAH,CAA/B;;AAEA,IAAI0wB,aAAa,GAAG,SAASA,aAAT,CAAuB5sB,IAAvB,EAA6B;EAC/C,IAAImE,KAAK,GAAGqoB,MAAM,CAACxsB,IAAD,CAAN,GAAeA,IAAI,CAAC+R,GAAL,CAAS5M,MAAxB,GAAiCnF,IAAI,CAACqK,KAAL,CAAWlF,MAAxD;EACA,OAAOwiB,SAAS,CAACxjB,KAAD,CAAhB;AACD,CAHD;AAIA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI0oB,aAAa,GAAG,SAASA,aAAT,CAAuB7sB,IAAvB,EAA6B;EAC/CxE,OAAO,CAACoxB,aAAa,CAAC5sB,IAAD,CAAd,EAAsBwnB,QAAQ,CAACxnB,IAAI,CAACqK,KAAL,CAAWnF,KAAZ,CAA9B,EAAkDuiB,WAAW,CAACznB,IAAI,CAACqK,KAAL,CAAWyiB,QAAZ,CAA7D,EAAoFpF,WAAW,CAAC1nB,IAAI,CAACqK,KAAL,CAAW0iB,QAAZ,CAA/F,EAAsHnF,YAAY,CAAC5nB,IAAI,CAACqK,KAAL,CAAW2iB,SAAZ,CAAlI,EAA0JnF,YAAY,CAAC7nB,IAAI,CAACqK,KAAL,CAAW4iB,SAAZ,CAAtK,EAA8LzG,YAAY,CAACxmB,IAAI,CAACqK,KAAL,CAAWiP,SAAZ,CAA1M,EAAkOmN,cAAc,CAACzmB,IAAI,CAACqK,KAAL,CAAWyW,WAAZ,CAAhP,EAA0Q4F,eAAe,CAAC1mB,IAAI,CAACqK,KAAL,CAAW4O,YAAZ,CAAzR,EAAoT0N,aAAa,CAAC3mB,IAAI,CAACqK,KAAL,CAAW2W,UAAZ,CAAjU,EAA0V4F,aAAa,CAAC5mB,IAAI,CAACqK,KAAL,CAAWkP,UAAZ,CAAvW,EAAgYsN,eAAe,CAAC7mB,IAAI,CAACqK,KAAL,CAAWsQ,YAAZ,CAA/Y,EAA0amM,gBAAgB,CAAC9mB,IAAI,CAACqK,KAAL,CAAW6O,aAAZ,CAA1b,EAAsd6N,cAAc,CAAC/mB,IAAI,CAACqK,KAAL,CAAW0Q,WAAZ,CAApe,EAA8fqK,eAAe,CAACplB,IAAI,CAACqK,KAAL,CAAW6iB,QAAZ,CAA7gB,EAAoiB9F,cAAc,CAACpnB,IAAI,CAACqK,KAAL,CAAWmI,GAAZ,CAAljB,EAAokB6U,gBAAgB,CAACrnB,IAAI,CAACqK,KAAL,CAAW8W,KAAZ,CAAplB,EAAwmBmG,iBAAiB,CAACtnB,IAAI,CAACqK,KAAL,CAAWgX,MAAZ,CAAznB,EAA8oBkG,eAAe,CAACvnB,IAAI,CAACqK,KAAL,CAAWkI,IAAZ,CAA7pB,EAAgrByU,YAAY,CAAChnB,IAAI,CAACqK,KAAL,CAAWgP,cAAZ,CAA5rB,EAAytB4N,cAAc,CAACjnB,IAAI,CAACqK,KAAL,CAAWyX,gBAAZ,CAAvuB,EAAswBoF,eAAe,CAAClnB,IAAI,CAACqK,KAAL,CAAW2O,iBAAZ,CAArxB,EAAqzBmO,aAAa,CAACnnB,IAAI,CAACqK,KAAL,CAAW0X,eAAZ,CAAl0B,EAAg2BC,UAAU,CAAChiB,IAAI,CAACqK,KAAL,CAAW8iB,OAAZ,CAA12B,EAAg4BvH,gBAAgB,CAAC5lB,IAAI,CAACqK,KAAL,CAAWwb,aAAZ,CAAh5B,EAA46Bd,YAAY,CAAC/kB,IAAI,CAACqK,KAAL,CAAW+iB,SAAZ,CAAx7B,EAAg9BjI,eAAe,CAACnlB,IAAI,CAACqK,KAAL,CAAWgjB,YAAZ,CAA/9B,EAA0/BrI,aAAa,CAAChlB,IAAI,CAACqK,KAAL,CAAWijB,UAAZ,CAAvgC,EAAgiCjH,iBAAiB,CAACrmB,IAAI,CAACqK,KAAL,CAAWic,cAAZ,CAAjjC,EAA8kCxD,WAAW,CAAC9iB,IAAI,CAACqK,KAAL,CAAW0Y,QAAZ,CAAzlC,EAAgnCP,WAAW,CAACxiB,IAAI,CAACqK,KAAL,CAAWoY,QAAZ,CAA3nC,EAAkpCyC,cAAc,CAACllB,IAAI,CAACqK,KAAL,CAAW8d,WAAZ,CAAhqC,EAA0rCxE,YAAY,CAAC3jB,IAAI,CAACqK,KAAL,CAAWkjB,SAAZ,CAAtsC,EAA8tCvJ,WAAW,CAAChkB,IAAI,CAACqK,KAAL,CAAWmjB,QAAZ,CAAzuC,EAAgwCvI,aAAa,CAACjlB,IAAI,CAACqK,KAAL,CAAWojB,UAAZ,CAA7wC,CAAP,CAA6yCztB,IAA7yC;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI0tB,eAAe,GAAG,SAASA,eAAT,CAAyBja,MAAzB,EAAiC;EACrD,OAAO,UAAUvP,KAAV,EAAiB;IACtBuP,MAAM,CAACka,WAAP,CAAmBzpB,KAAK,CAAC8nB,SAAD,CAAxB,EAAqCvY,MAAM,CAACma,aAAP,EAArC;IACA,OAAO1pB,KAAP;EACD,CAHD;AAID,CALD;;AAOA,IAAI2pB,cAAc,GAAG,SAASA,cAAT,CAAwB7tB,IAAxB,EAA8B4R,IAA9B,EAAoCrP,SAApC,EAA+C;EAClE,IAAI8X,QAAQ,GAAGra,IAAI,CAACgsB,SAAD,CAAnB;;EAEA,IAAIM,QAAQ,CAACtsB,IAAD,CAAZ,EAAoB;IAClBqa,QAAQ,CAACwT,cAAT,CAAwBpF,WAAW,CAAC7W,IAAD,EAAO5R,IAAP,EAAauC,SAAb,CAAnC;EACD;;EAED,IAAI0N,OAAO,CAACjQ,IAAD,CAAX,EAAmB;IACjBqa,QAAQ,CAACwT,cAAT,CAAwB5E,YAAY,CAACrX,IAAD,EAAO5R,IAAP,CAApC;EACD;;EAED,IAAI0sB,QAAQ,CAAC1sB,IAAD,CAAZ,EAAoB;IAClBqa,QAAQ,CAACwT,cAAT,CAAwB7F,aAAa,CAACpW,IAAD,EAAO5R,IAAP,CAArC;EACD;;EAED,IAAIggB,KAAK,CAAChgB,IAAD,CAAT,EAAiB;IACfqa,QAAQ,CAACwT,cAAT,CAAwB9F,eAAe,CAACnW,IAAD,EAAO5R,IAAP,CAAvC;EACD;;EAED,OAAOA,IAAP;AACD,CApBD;;AAsBA,IAAI8tB,eAAe,GAAG,SAASA,eAAT,CAAyB9tB,IAAzB,EAA+B;EACnD,OAAO,CAACssB,QAAQ,CAACtsB,IAAD,CAAT,IAAmB,CAACusB,MAAM,CAACvsB,IAAD,CAA1B,IAAoC,CAACggB,KAAK,CAAChgB,IAAD,CAAjD;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI+tB,eAAe,GAAG,SAASA,eAAT,CAAyBnc,IAAzB,EAA+BrP,SAA/B,EAA0C;EAC9D,OAAO,UAAUvC,IAAV,EAAgB;IACrB,IAAIqa,QAAQ,GAAGhd,IAAI,CAAC2wB,IAAL,CAAUC,gBAAV,CAA2BhC,WAA3B,CAAf;IACA,IAAIle,MAAM,GAAGtI,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,CAAb;IACA+N,MAAM,CAACie,SAAD,CAAN,GAAoB3R,QAApB;IACAwS,aAAa,CAAC9e,MAAD,CAAb;;IAEA,IAAI+f,eAAe,CAAC9tB,IAAD,CAAf,IAAyBA,IAAI,CAACiE,QAAlC,EAA4C;MAC1C,IAAI8G,YAAY,GAAGvP,OAAO,CAACkyB,eAAe,CAACrT,QAAD,CAAhB,EAA4B0T,eAAe,CAACnc,IAAD,EAAOrP,SAAP,CAA3C,CAA1B;MACAwL,MAAM,CAAC9J,QAAP,GAAkBjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBoM,YAAlB,CAAlB;IACD;;IAED8iB,cAAc,CAAC9f,MAAD,EAAS6D,IAAT,EAAerP,SAAf,CAAd;IACA,OAAOwL,MAAP;EACD,CAbD;AAcD,CAfD;AAgBA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAImgB,eAAe,GAAG,SAASA,eAAT,CAAyBtc,IAAzB,EAA+B;EACnDA,IAAI,CAACoa,SAAD,CAAJ,CAAgBkC,eAAhB;EACA,OAAOtc,IAAP;AACD,CAHD;AAIA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIuc,iBAAiB,GAAG,SAASA,iBAAT,CAA2BnuB,IAA3B,EAAiC;EACvD,IAAI2sB,gBAAgB,CAAC3sB,IAAD,CAApB,EAA4B,OAAOA,IAAP;EAC5B,IAAI+R,GAAG,GAAGtM,MAAM,CAACC,MAAP,CAAc6U,UAAU,CAACva,IAAD,CAAxB,EAAgC2gB,SAAS,CAAC3gB,IAAD,CAAzC,EAAiD6hB,cAAc,CAAC7hB,IAAD,CAA/D,EAAuEihB,WAAW,CAACjhB,IAAD,CAAlF,EAA0FyhB,YAAY,CAACzhB,IAAD,CAAtG,CAAV;EACA,IAAIiT,OAAO,GAAGxN,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IACpC+R,GAAG,EAAEA;EAD+B,CAAxB,CAAd;EAGA,IAAI,CAAC/R,IAAI,CAACiE,QAAV,EAAoB,OAAOgP,OAAP;EACpB,IAAIhP,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBwvB,iBAAlB,CAAf;EACA,OAAO1oB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuN,OAAlB,EAA2B;IAChChP,QAAQ,EAAEA;EADsB,CAA3B,CAAP;AAGD,CAXD;AAYA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAImqB,gBAAgB,GAAG,SAASA,gBAAT,CAA0BpuB,IAA1B,EAAgC;EACrD,IAAIiT,OAAO,GAAGxN,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,CAAd;EACA,OAAOiT,OAAO,CAAC+Y,SAAD,CAAd;EACA,IAAI,CAAChsB,IAAI,CAACiE,QAAV,EAAoB,OAAOgP,OAAP;EACpB,IAAIhP,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkByvB,gBAAlB,CAAf;EACA,OAAO3oB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuN,OAAlB,EAA2B;IAChChP,QAAQ,EAAEA;EADsB,CAA3B,CAAP;AAGD,CARD;AASA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIoqB,aAAa,GAAG,SAASA,aAAT,CAAuBruB,IAAvB,EAA6B;EAC/C,IAAIA,IAAI,CAACgsB,SAAD,CAAR,EAAqBhsB,IAAI,CAACgsB,SAAD,CAAJ,CAAgBsC,aAAhB;EACrB,OAAOtuB,IAAP;AACD,CAHD;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIuuB,qBAAqB,GAAG,SAASA,qBAAT,CAA+B3c,IAA/B,EAAqCrP,SAArC,EAAgD;EAC1E,IAAI3G,KAAK,CAACgW,IAAD,CAAT,EAAiB,OAAO,IAAP;EACjB,OAAOpW,OAAO,CAAC4yB,gBAAD,EAAmBC,aAAnB,EAAkCF,iBAAlC,EAAqDD,eAArD,EAAsEH,eAAe,CAACnc,IAAD,EAAOrP,SAAP,CAArF,CAAP,CAA+GqP,IAA/G,CAAP;AACD,CAHD;AAIA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAI4c,iBAAiB,GAAG,SAASA,iBAAT,CAA2BxuB,IAA3B,EAAiCuC,SAAjC,EAA4C;EAClE,IAAI,CAACvC,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;;EAEpB,IAAI+K,YAAY,GAAG,SAASA,YAAT,CAAsB7G,KAAtB,EAA6B;IAC9C,OAAOqqB,qBAAqB,CAACrqB,KAAD,EAAQ3B,SAAR,CAA5B;EACD,CAFD;;EAIA,IAAI0B,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBoM,YAAlB,CAAf;EACA,OAAOtF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAXD;;AAaA,IAAIwqB,QAAQ,GAAG,SAASC,MAAT,CAAgB1uB,IAAhB,EAAsB;EACnC,OAAOA,IAAI,CAACiC,IAAL,KAAchG,CAAC,CAAC8M,IAAvB;AACD,CAFD,C,CAEG;;;AAGH,IAAI4lB,eAAe,GAAG,KAAtB;;AAEA,IAAIC,cAAc,GAAG,SAASA,cAAT,CAAwB3qB,QAAxB,EAAkCjE,IAAlC,EAAwC;EAC3D,OAAOyF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAJD;;AAMA,IAAI0V,MAAM,GAAG,SAASA,MAAT,CAAgB3Z,IAAhB,EAAsB;EACjC,IAAIsS,SAAJ;;EAEA,OAAO,CAAC,CAACA,SAAS,GAAGtS,IAAI,CAAC+R,GAAlB,MAA2B,IAA3B,IAAmCO,SAAS,KAAK,KAAK,CAAtD,GAA0D,KAAK,CAA/D,GAAmEA,SAAS,CAACE,GAA9E,KAAsF,CAA7F;AACD,CAJD;;AAMA,IAAIqc,QAAQ,GAAG,SAASA,QAAT,CAAkB/S,KAAlB,EAAyB;EACtC,OAAOA,KAAK,CAACgT,KAAN,CAAY9W,OAAZ,CAAP;AACD,CAFD;;AAIA,IAAI+W,SAAS,GAAG,SAASA,SAAT,CAAmB/uB,IAAnB,EAAyB;EACvC,IAAI4E,WAAJ;;EAEA,OAAO,CAAChJ,KAAK,CAAC,CAACgJ,WAAW,GAAG5E,IAAI,CAAC2C,KAApB,MAA+B,IAA/B,IAAuCiC,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACoqB,MAAtF,CAAb;AACD,CAJD;;AAMA,IAAIC,YAAY,GAAGzzB,OAAO,CAACokB,iBAAD,EAAoBY,kBAApB,EAAwC+N,qBAAxC,CAA1B;;AAEA,IAAIW,oBAAoB,GAAG,SAASA,oBAAT,CAA8BlvB,IAA9B,EAAoC;EAC7D4P,OAAO,CAACC,IAAR,CAAa,kBAAkB7P,IAAI,CAACiC,IAAvB,GAA8B,sEAA3C;AACD,CAFD;;AAIA,IAAIktB,UAAU,GAAG,SAASA,UAAT,CAAoBhqB,MAApB,EAA4BiqB,WAA5B,EAAyCtT,KAAzC,EAAgD;EAC/D,IAAIuT,eAAe,GAAG,EAAtB;EACA,IAAIzT,YAAY,GAAG,EAAnB;;EAEA,KAAK,IAAI/c,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGid,KAAK,CAAC9a,MAA1B,EAAkCnC,CAAC,IAAI,CAAvC,EAA0C;IACxC,IAAIqF,KAAK,GAAG4X,KAAK,CAACjd,CAAD,CAAjB;IACA,IAAIywB,WAAW,GAAGxT,KAAK,CAACva,KAAN,CAAY1C,CAAC,GAAG,CAAhB,CAAlB;IACA,IAAI0wB,gBAAgB,GAAGD,WAAW,CAAC9oB,MAAZ,CAAmBwR,OAAnB,CAAvB;IACA,IAAI8B,OAAO,GAAGH,MAAM,CAACzV,KAAD,CAApB;IACA,IAAIsrB,UAAU,GAAGtrB,KAAK,CAAC6N,GAAN,CAAU5M,MAA3B;IACA,IAAIsqB,SAAS,GAAGtqB,MAAM,IAAI2U,OAA1B;IACA,IAAI4V,aAAa,GAAG/S,WAAW,CAACzY,KAAD,EAAQorB,WAAR,EAAqBnqB,MAArB,CAA/B;IACA,IAAI2X,WAAW,GAAG3X,MAAM,GAAGwpB,eAAT,GAA2B7U,OAAO,GAAG0V,UAAvD;IACA,IAAIG,OAAO,GAAGzV,OAAO,CAAChW,KAAD,CAArB;IACA,IAAI0rB,cAAc,GAAGJ,UAAU,IAAIJ,WAAnC;;IAEA,IAAIpX,OAAO,CAAC9T,KAAD,CAAX,EAAoB;MAClB0X,YAAY,CAACza,IAAb,CAAkB+C,KAAlB;MACAmrB,eAAe,CAACluB,IAAhB,CAAqB+C,KAArB;MACA;IACD;;IAED,IAAIurB,SAAJ,EAAe;MACb,IAAI1d,GAAG,GAAGtM,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBxB,KAAK,CAAC6N,GAAxB,EAA6B;QACrCS,GAAG,EAAEtO,KAAK,CAAC6N,GAAN,CAAUS,GAAV,GAAgBrN;MADgB,CAA7B,CAAV;MAGA,IAAIiK,IAAI,GAAG3J,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBxB,KAAlB,EAAyB;QAClC6N,GAAG,EAAEA;MAD6B,CAAzB,CAAX;MAGA6J,YAAY,CAACza,IAAb,CAAkBiO,IAAlB;MACA;IACD;;IAED,IAAI,CAACwgB,cAAD,IAAmB,CAACD,OAAxB,EAAiC;MAC/BN,eAAe,CAACluB,IAAhB,CAAqB+C,KAArB;MACA0X,YAAY,CAACza,IAAb,CAAkBiD,KAAlB,CAAwBwX,YAAxB,EAAsC0T,WAAtC;MACAJ,oBAAoB,CAAChrB,KAAD,CAApB;MACA;IACD;;IAED,IAAIwrB,aAAJ,EAAmB;MACjB,IAAIG,IAAI,GAAGpqB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBxB,KAAK,CAAC6N,GAAxB,EAA6B;QACtCS,GAAG,EAAEtO,KAAK,CAAC6N,GAAN,CAAUS,GAAV,GAAgBrN;MADiB,CAA7B,CAAX;;MAIA,IAAIxC,KAAK,GAAG8C,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBxB,KAAK,CAACvB,KAAxB,EAA+B;QACzCqM,IAAI,EAAE,IADmC;QAEzCmN,KAAK,EAAE;MAFkC,CAA/B,CAAZ;;MAKA,IAAI2T,KAAK,GAAGrqB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBxB,KAAlB,EAAyB;QACnC6N,GAAG,EAAE8d,IAD8B;QAEnCltB,KAAK,EAAEA;MAF4B,CAAzB,CAAZ;;MAKA0sB,eAAe,CAACluB,IAAhB,CAAqBiD,KAArB,CAA2BirB,eAA3B,EAA4CE,gBAA5C;MACA3T,YAAY,CAACza,IAAb,CAAkBiD,KAAlB,CAAwBwX,YAAxB,EAAsC,CAACkU,KAAD,EAAQre,MAAR,CAAe6d,WAAf,CAAtC;MACA;IACD;;IAED,IAAIxS,WAAJ,EAAiB;MACf,IAAIiT,MAAM,GAAG3oB,KAAK,CAAClD,KAAD,EAAQiB,MAAR,EAAgBiqB,WAAhB,CAAlB;MAAA,IACIY,YAAY,GAAGD,MAAM,CAAC,CAAD,CADzB;MAAA,IAEIE,SAAS,GAAGF,MAAM,CAAC,CAAD,CAFtB;;MAIA,IAAIC,YAAJ,EAAkBX,eAAe,CAACluB,IAAhB,CAAqB6uB,YAArB;MAClB,IAAIC,SAAJ,EAAerU,YAAY,CAACza,IAAb,CAAkB8uB,SAAlB;MACf;IACD;;IAEDZ,eAAe,CAACluB,IAAhB,CAAqB+C,KAArB;EACD;;EAED,OAAO,CAACmrB,eAAD,EAAkBzT,YAAlB,CAAP;AACD,CA1ED;;AA4EA,IAAIsU,aAAa,GAAG,SAASA,aAAT,CAAuB/qB,MAAvB,EAA+BiqB,WAA/B,EAA4CpvB,IAA5C,EAAkD;EACpE,IAAIiE,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,IAAiB,EAAhC;EACA,IAAIksB,eAAe,GAAGhrB,MAAM,GAAGwU,MAAM,CAAC3Z,IAAD,CAArC;EACA,OAAOmvB,UAAU,CAACgB,eAAD,EAAkBf,WAAlB,EAA+BnrB,QAA/B,CAAjB;AACD,CAJD;;AAMA,IAAImsB,SAAS,GAAG,SAASA,SAAT,CAAmBpwB,IAAnB,EAAyBmF,MAAzB,EAAiCiqB,WAAjC,EAA8C;EAC5D,IAAIiB,UAAU,GAAGxW,SAAS,CAAC7Z,IAAD,EAAOmF,MAAP,CAA1B;EAAA,IACImrB,WAAW,GAAGD,UAAU,CAAC,CAAD,CAD5B;EAAA,IAEIE,QAAQ,GAAGF,UAAU,CAAC,CAAD,CAFzB;;EAIA,IAAIG,cAAc,GAAGN,aAAa,CAAC/qB,MAAD,EAASiqB,WAAT,EAAsBpvB,IAAtB,CAAlC;EAAA,IACIywB,aAAa,GAAGD,cAAc,CAAC,CAAD,CADlC;EAAA,IAEI5U,YAAY,GAAG4U,cAAc,CAAC,CAAD,CAFjC;;EAIA,OAAO,CAAC5B,cAAc,CAAC6B,aAAD,EAAgBH,WAAhB,CAAf,EAA6C1B,cAAc,CAAChT,YAAD,EAAe2U,QAAf,CAA3D,CAAP;AACD,CAVD;;AAYA,IAAInpB,KAAK,GAAG,SAASA,KAAT,CAAepH,IAAf,EAAqBmF,MAArB,EAA6BiqB,WAA7B,EAA0C;EACpD,OAAOX,QAAQ,CAACzuB,IAAD,CAAR,GAAiB2Y,SAAS,CAAC3Y,IAAD,EAAOmF,MAAP,CAA1B,GAA2CirB,SAAS,CAACpwB,IAAD,EAAOmF,MAAP,EAAeiqB,WAAf,CAA3D;AACD,CAFD;;AAIA,IAAIsB,yBAAyB,GAAG,SAASA,yBAAT,CAAmC1wB,IAAnC,EAAyC;EACvE,IAAIiE,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,IAAiB,EAAhC;EACA,OAAO8qB,SAAS,CAAC/uB,IAAD,CAAT,IAAmBiE,QAAQ,CAAC0sB,IAAT,CAAcD,yBAAd,CAA1B;AACD,CAHD;;AAKA,IAAIE,mBAAmB,GAAG,SAASA,mBAAT,CAA6BjuB,KAA7B,EAAoC3C,IAApC,EAA0C;EAClE,IAAI6wB,aAAa,GAAG9B,SAAS,CAAC/uB,IAAD,CAA7B,CADkE,CAC7B;;EAErC,IAAIkL,eAAe,GAAG,SAASA,eAAT,CAAyBjH,QAAzB,EAAmC;IACvD,IAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;MACvBA,QAAQ,GAAG,EAAX;IACD;;IAED,IAAI4sB,aAAJ,EAAmB;MACjB,IAAI9vB,GAAG,GAAGf,IAAI,CAAC2C,KAAL,CAAWqsB,MAAX,CAAkBrsB,KAAlB,CAAV;MACA,OAAO,CAAC6Y,cAAc,CAACza,GAAD,CAAf,EAAsByF,MAAtB,CAA6BsqB,OAA7B,CAAP;IACD;;IAED,OAAO7sB,QAAQ,CAACtF,GAAT,CAAa,UAAUoyB,CAAV,EAAa;MAC/B,OAAOH,mBAAmB,CAACjuB,KAAD,EAAQouB,CAAR,CAA1B;IACD,CAFM,CAAP;EAGD,CAbD,CAHkE,CAgB/D;;;EAGH,IAAIC,WAAW,GAAGH,aAAa,IAAIpC,QAAQ,CAACzuB,IAAD,CAA3C;EACA,IAAI+R,GAAG,GAAGif,WAAW,GAAG/zB,QAAQ,CAAC,EAAD,EAAK+C,IAAI,CAAC+R,GAAV,EAAe;IAC7C5M,MAAM,EAAE;EADqC,CAAf,CAAX,GAEhBnF,IAAI,CAAC+R,GAFV;EAGA,IAAI9N,QAAQ,GAAGiH,eAAe,CAAClL,IAAI,CAACiE,QAAN,CAA9B;EACA,IAAIsB,KAAK,GAAGsrB,aAAa,GAAG,IAAH,GAAU7wB,IAAI,CAACuF,KAAxC;EACA,OAAOE,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7B+R,GAAG,EAAEA,GADwB;IAE7BxM,KAAK,EAAEA,KAFsB;IAG7BtB,QAAQ,EAAEA;EAHmB,CAAxB,CAAP;AAKD,CA9BD;;AAgCA,IAAIgtB,kBAAkB,GAAG,SAASA,kBAAT,CAA4BtuB,KAA5B,EAAmCiP,IAAnC,EAAyCrP,SAAzC,EAAoD;EAC3E,IAAImuB,yBAAyB,CAAC9e,IAAD,CAA7B,EAAqC;IACnC,IAAIsf,YAAY,GAAGN,mBAAmB,CAACjuB,KAAD,EAAQiP,IAAR,CAAtC;IACA,OAAOqd,YAAY,CAACiC,YAAD,EAAe3uB,SAAf,CAAnB;EACD;;EAED,OAAOqP,IAAP;AACD,CAPD;;AASA,IAAIuf,SAAS,GAAG,SAASA,SAAT,CAAmBvf,IAAnB,EAAyBwf,UAAzB,EAAqC7uB,SAArC,EAAgD;EAC9D,IAAI8uB,QAAQ,GAAGpW,WAAW,CAACrJ,IAAD,CAA1B;EACA,IAAIwd,WAAW,GAAGhU,cAAc,CAACxJ,IAAD,CAAhC;EACA,IAAI0f,WAAW,GAAGL,kBAAkB,CAAC;IACnCG,UAAU,EAAEA;EADuB,CAAD,EAEjCxf,IAFiC,EAE3BrP,SAF2B,CAApC;EAGA,IAAI4C,MAAM,GAAGyM,IAAI,CAACvH,KAAL,CAAWlF,MAAxB;;EAEA,IAAIosB,WAAW,GAAGpC,UAAU,CAACkC,QAAD,EAAWjC,WAAX,EAAwBkC,WAAW,CAACrtB,QAApC,CAA5B;EAAA,IACIwsB,aAAa,GAAGc,WAAW,CAAC,CAAD,CAD/B;EAAA,IAEIC,UAAU,GAAGD,WAAW,CAAC,CAAD,CAF5B;;EAIA,IAAIE,QAAQ,GAAG,SAASA,QAAT,CAAkBzxB,IAAlB,EAAwB;IACrC,OAAOivB,YAAY,CAACjvB,IAAD,EAAOuC,SAAP,CAAnB;EACD,CAFD;;EAIA,IAAImvB,UAAU,GAAGz0B,QAAQ,CAAC,EAAD,EAAK2U,IAAI,CAACG,GAAV,EAAe;IACtC5M,MAAM,EAAEA;EAD8B,CAAf,CAAzB;;EAIA,IAAIwsB,WAAW,GAAGF,QAAQ,CAAChsB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBkM,IAAlB,EAAwB;IACjDG,GAAG,EAAE2f,UAD4C;IAEjDztB,QAAQ,EAAEwsB;EAFuC,CAAxB,CAAD,CAA1B;EAIA,IAAIe,UAAU,CAACxwB,MAAX,KAAsB,CAAtB,IAA2B6tB,QAAQ,CAAC2C,UAAD,CAAvC,EAAqD,OAAO,CAACG,WAAD,EAAc,IAAd,CAAP;EACrD,IAAIC,OAAO,GAAG71B,IAAI,CAAC,QAAD,EAAW6V,IAAI,CAACG,GAAhB,CAAlB;EACA,IAAI8f,SAAS,GAAG91B,IAAI,CAAC,UAAD,EAAa6V,IAAI,CAACjP,KAAlB,CAApB;EACA,IAAImvB,QAAQ,GAAGL,QAAQ,CAAChsB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBkM,IAAlB,EAAwB;IAC9CjP,KAAK,EAAEkvB,SADuC;IAE9C9f,GAAG,EAAE6f,OAFyC;IAG9C3tB,QAAQ,EAAEutB;EAHoC,CAAxB,CAAD,CAAvB;EAKA,OAAO,CAACG,WAAD,EAAcG,QAAd,CAAP;AACD,CAjCD;;AAmCA,IAAIC,kBAAkB,GAAG,SAASA,kBAAT,CAA4BxvB,SAA5B,EAAuCqP,IAAvC,EAA6Cwf,UAA7C,EAAyDY,KAAzD,EAAgE;EACvF,IAAIC,UAAU,GAAGD,KAAK,CAAChxB,MAAvB;EACA,IAAI2B,KAAK,GAAG;IACVsvB,UAAU,EAAEA,UADF;IAEVb,UAAU,EAAEA,UAAU,GAAG,CAFf;IAGVc,aAAa,EAAEtgB,IAAI,CAACsgB,aAAL,GAAqB,CAH1B;IAIVC,iBAAiB,EAAEvgB,IAAI,CAACugB;EAJd,CAAZ;EAMA,OAAOlB,kBAAkB,CAACtuB,KAAD,EAAQiP,IAAR,EAAcrP,SAAd,CAAzB;AACD,CATD;;AAWA,IAAI6vB,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,QAA1B,EAAoC;EACzD,OAAOA,QAAQ,CAAC1zB,GAAT,CAAa,UAAUiT,IAAV,EAAgB/S,CAAhB,EAAmB;IACrC,OAAO5B,QAAQ,CAAC,EAAD,EAAK2U,IAAL,EAAW;MACxBsgB,aAAa,EAAErzB,CADS;MAExBszB,iBAAiB,EAAEE,QAAQ,CAACrxB;IAFJ,CAAX,CAAf;EAID,CALM,CAAP;AAMD,CAPD;;AASA,IAAIsxB,iBAAiB,GAAG,SAASA,iBAAT,CAA2B1gB,IAA3B,EAAiC;EACvD,OAAO7V,IAAI,CAAC,CAAC,eAAD,EAAkB,mBAAlB,CAAD,EAAyC6V,IAAzC,CAAX;AACD,CAFD;;AAIA,IAAI2gB,QAAQ,GAAG,SAASA,QAAT,CAAkB3gB,IAAlB,EAAwBwf,UAAxB,EAAoC7uB,SAApC,EAA+C;EAC5D,IAAI,CAACqP,IAAL,EAAW,OAAO,EAAP;EACX,IAAI4gB,YAAY,GAAGrB,SAAS,CAACvf,IAAD,EAAOwf,UAAP,EAAmB7uB,SAAnB,CAA5B;EACA,IAAIyvB,KAAK,GAAG,CAACQ,YAAY,CAAC,CAAD,CAAb,CAAZ;EACA,IAAIV,QAAQ,GAAGU,YAAY,CAAC,CAAD,CAA3B;;EAEA,OAAOV,QAAQ,KAAK,IAApB,EAA0B;IACxBU,YAAY,GAAGrB,SAAS,CAACW,QAAD,EAAWV,UAAU,GAAGY,KAAK,CAAChxB,MAA9B,EAAsCuB,SAAtC,CAAxB;IACAyvB,KAAK,CAAC7wB,IAAN,CAAWqxB,YAAY,CAAC,CAAD,CAAvB;IACAV,QAAQ,GAAGU,YAAY,CAAC,CAAD,CAAvB;EACD;;EAED,OAAOR,KAAP;AACD,CAbD;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIS,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,GAA3B,EAAgCnwB,SAAhC,EAA2C;EACjE,IAAIyvB,KAAK,GAAG,EAAZ;EACA,IAAIZ,UAAU,GAAG,CAAjB;;EAEA,KAAK,IAAIvyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6zB,GAAG,CAACzuB,QAAJ,CAAajD,MAAjC,EAAyCnC,CAAC,IAAI,CAA9C,EAAiD;IAC/C,IAAI+S,IAAI,GAAG8gB,GAAG,CAACzuB,QAAJ,CAAapF,CAAb,CAAX;IACA,IAAIwzB,QAAQ,GAAGE,QAAQ,CAAC3gB,IAAD,EAAOwf,UAAP,EAAmB7uB,SAAnB,CAAvB;IACA8vB,QAAQ,GAAGD,gBAAgB,CAACC,QAAD,CAA3B;IACAjB,UAAU,IAAIiB,QAAQ,CAACrxB,MAAvB;IACAgxB,KAAK,GAAGA,KAAK,CAACvgB,MAAN,CAAa4gB,QAAb,CAAR;EACD;;EAEDL,KAAK,GAAGA,KAAK,CAACrzB,GAAN,CAAU,YAAY;IAC5B,KAAK,IAAIg0B,IAAI,GAAGtmB,SAAS,CAACrL,MAArB,EAA6B4xB,IAAI,GAAG,IAAIhmB,KAAJ,CAAU+lB,IAAV,CAApC,EAAqDE,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGF,IAA3E,EAAiFE,IAAI,EAArF,EAAyF;MACvFD,IAAI,CAACC,IAAD,CAAJ,GAAaxmB,SAAS,CAACwmB,IAAD,CAAtB;IACD;;IAED,OAAOP,iBAAiB,CAACP,kBAAkB,CAAC3tB,KAAnB,CAAyB,KAAK,CAA9B,EAAiC,CAAC7B,SAAD,EAAYkP,MAAZ,CAAmBmhB,IAAnB,CAAjC,CAAD,CAAxB;EACD,CANO,CAAR;EAOA,OAAOhE,cAAc,CAACoD,KAAD,EAAQU,GAAR,CAArB;AACD,CApBD;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAII,4BAA4B,GAAG,SAASA,4BAAT,CAAsC7tB,SAAtC,EAAiD;EAClF,OAAO,UAAUd,KAAV,EAAiB;IACtB,IAAI0C,KAAK,GAAGnL,YAAY,CAACyI,KAAD,CAAxB;IACA,OAAO0C,KAAK,GAAGA,KAAK,CAACqC,OAAN,GAAgBjE,SAAS,CAACC,KAA7B,GAAqCf,KAAjD;EACD,CAHD;AAID,CALD;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI4uB,0BAA0B,GAAG,SAASA,0BAAT,CAAoC9tB,SAApC,EAA+C;EAC9E,OAAO,UAAUd,KAAV,EAAiB;IACtB,IAAI0C,KAAK,GAAGnL,YAAY,CAACyI,KAAD,CAAxB;IACA,OAAO0C,KAAK,GAAGA,KAAK,CAACqC,OAAN,GAAgBjE,SAAS,CAACE,MAA7B,GAAsChB,KAAlD;EACD,CAHD;AAID,CALD;AAMA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI6uB,mBAAmB,GAAG,SAASA,mBAAT,CAA6BphB,IAA7B,EAAmC;EAC3D,IAAI3M,SAAS,GAAG2M,IAAI,CAACvH,KAArB;EACA,IAAIA,KAAK,GAAG1O,MAAM,CAAC;IACjB4d,UAAU,EAAEwZ,0BAA0B,CAAC9tB,SAAD,CADrB;IAEjB8V,WAAW,EAAE+X,4BAA4B,CAAC7tB,SAAD,CAFxB;IAGjB0V,YAAY,EAAEmY,4BAA4B,CAAC7tB,SAAD,CAHzB;IAIjBiU,aAAa,EAAE6Z,0BAA0B,CAAC9tB,SAAD;EAJxB,CAAD,EAKf2M,IAAI,CAACvH,KALU,CAAlB;EAMA,OAAO5E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBkM,IAAlB,EAAwB;IAC7BvH,KAAK,EAAEA;EADsB,CAAxB,CAAP;AAGD,CAXD;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI4oB,oBAAoB,GAAG,SAASA,oBAAT,CAA8BhsB,IAA9B,EAAoC;EAC7D,IAAI,CAACA,IAAI,CAAChD,QAAV,EAAoB,OAAOgD,IAAP;EACpB,IAAIhD,QAAQ,GAAGgD,IAAI,CAAChD,QAAL,CAActF,GAAd,CAAkBq0B,mBAAlB,CAAf;EACA,OAAOvtB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuB,IAAlB,EAAwB;IAC7BhD,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAND;AAQA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIivB,aAAa,GAAG,SAASA,aAAT,CAAuBjuB,SAAvB,EAAkC;EACpD,OAAO,UAAUd,KAAV,EAAiB;IACtB,IAAI,CAACA,KAAL,EAAY,OAAOwC,SAAP;IACZ,IAAIE,KAAK,GAAGnL,YAAY,CAACyI,KAAD,CAAxB;IACA,OAAO0C,KAAK,GAAGA,KAAK,CAACqC,OAAN,GAAgBsF,IAAI,CAACwN,GAAL,CAAS/W,SAAS,CAACC,KAAnB,EAA0BD,SAAS,CAACE,MAApC,CAAnB,GAAiEhB,KAA7E;EACD,CAJD;AAKD,CAND;AAOA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIgvB,oBAAoB,GAAG,SAASA,oBAAT,CAA8BnzB,IAA9B,EAAoC;EAC7D,IAAIqK,KAAK,GAAG1O,MAAM,CAAC;IACjB6d,mBAAmB,EAAE0Z,aAAa,CAAClzB,IAAI,CAAC+R,GAAN,CADjB;IAEjB0H,oBAAoB,EAAEyZ,aAAa,CAAClzB,IAAI,CAAC+R,GAAN,CAFlB;IAGjBqH,uBAAuB,EAAE8Z,aAAa,CAAClzB,IAAI,CAAC+R,GAAN,CAHrB;IAIjBoH,sBAAsB,EAAE+Z,aAAa,CAAClzB,IAAI,CAAC+R,GAAN;EAJpB,CAAD,EAKf/R,IAAI,CAACqK,KAAL,IAAc,EALC,CAAlB;EAMA,IAAI4I,OAAO,GAAGxN,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IACpCqK,KAAK,EAAEA;EAD6B,CAAxB,CAAd;EAGA,IAAI,CAACrK,IAAI,CAACiE,QAAV,EAAoB,OAAOgP,OAAP;EACpB,IAAIhP,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBw0B,oBAAlB,CAAf;EACA,OAAO1tB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuN,OAAlB,EAA2B;IAChChP,QAAQ,EAAEA;EADsB,CAA3B,CAAP;AAGD,CAfD;AAiBA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAImvB,eAAe,GAAG,SAASA,eAAT,CAAyB/J,QAAzB,EAAmClkB,MAAnC,EAA2C;EAC/D,IAAI0B,KAAK,GAAGnL,YAAY,CAACyJ,MAAD,CAAxB;EACA,OAAO0B,KAAK,GAAGA,KAAK,CAACqC,OAAN,GAAgBmgB,QAAnB,GAA8BlkB,MAA1C;AACD,CAHD;AAIA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIkuB,WAAW,GAAG,SAASA,WAAT,CAAqBzhB,IAArB,EAA2B;EAC3C,IAAIsJ,WAAJ,EAAiBoY,YAAjB;;EAEA,IAAIC,UAAU,GAAG3hB,IAAI,CAACvH,KAAL,CAAWlF,MAA5B;EACA,IAAIquB,cAAc,GAAG,CAAC,CAACtY,WAAW,GAAGtJ,IAAI,CAACvH,KAApB,MAA+B,IAA/B,IAAuC6Q,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAAC3B,UAAtF,KAAqG,CAA1H;EACA,IAAIka,iBAAiB,GAAG,CAAC,CAACH,YAAY,GAAG1hB,IAAI,CAACvH,KAArB,MAAgC,IAAhC,IAAwCipB,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAACpa,aAAzF,KAA2G,CAAnI;EACA,OAAOqa,UAAU,GAAGC,cAAb,GAA8BC,iBAArC;AACD,CAPD;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIC,wBAAwB,GAAG,SAASA,wBAAT,CAAkC9hB,IAAlC,EAAwC5R,IAAxC,EAA8C;EAC3E,IAAI2zB,YAAJ,EAAkBxhB,WAAlB;;EAEA,IAAIvW,KAAK,CAAC,CAAC+3B,YAAY,GAAG/hB,IAAI,CAACvH,KAArB,MAAgC,IAAhC,IAAwCspB,YAAY,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,YAAY,CAACxuB,MAAzF,CAAT,EAA2G,OAAOnF,IAAP;EAC3G,IAAIpE,KAAK,CAAC,CAACuW,WAAW,GAAGnS,IAAI,CAACqK,KAApB,MAA+B,IAA/B,IAAuC8H,WAAW,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAAChN,MAAtF,CAAT,EAAwG,OAAOnF,IAAP;EACxG,IAAIqpB,QAAQ,GAAGgK,WAAW,CAACzhB,IAAD,CAA1B;EACA,IAAIzM,MAAM,GAAGiuB,eAAe,CAAC/J,QAAD,EAAWrpB,IAAI,CAACqK,KAAL,CAAWlF,MAAtB,CAA5B;EACA,IAAIkF,KAAK,GAAG5E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAI,CAACqK,KAAvB,EAA8B;IACxClF,MAAM,EAAEA;EADgC,CAA9B,CAAZ;EAGA,OAAOM,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BqK,KAAK,EAAEA;EADsB,CAAxB,CAAP;AAGD,CAbD;AAcA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIupB,wBAAwB,GAAG,SAASA,wBAAT,CAAkChiB,IAAlC,EAAwC;EACrE,IAAI,CAACA,IAAI,CAAC3N,QAAV,EAAoB,OAAO2N,IAAP;;EAEpB,IAAI7G,YAAY,GAAG,SAASA,YAAT,CAAsB7G,KAAtB,EAA6B;IAC9C,OAAOwvB,wBAAwB,CAAC9hB,IAAD,EAAO1N,KAAP,CAA/B;EACD,CAFD;;EAIA,IAAID,QAAQ,GAAG2N,IAAI,CAAC3N,QAAL,CAActF,GAAd,CAAkBoM,YAAlB,CAAf;EACA,OAAOtF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBkM,IAAlB,EAAwB;IAC7B3N,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAXD;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI4vB,oBAAoB,GAAG,SAASA,oBAAT,CAA8B5sB,IAA9B,EAAoC;EAC7D,IAAI,CAACA,IAAI,CAAChD,QAAV,EAAoB,OAAOgD,IAAP;EACpB,IAAIhD,QAAQ,GAAGgD,IAAI,CAAChD,QAAL,CAActF,GAAd,CAAkBi1B,wBAAlB,CAAf;EACA,OAAOnuB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBuB,IAAlB,EAAwB;IAC7BhD,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAND;;AAQA,IAAI0E,MAAM,GAAG,SAASA,MAAT,CAAgB1G,IAAhB,EAAsB;EACjC,OAAO,UAAUjC,IAAV,EAAgB;IACrB,OAAOA,IAAI,CAACiC,IAAL,KAAcA,IAArB;EACD,CAFD;AAGD,CAJD;;AAMA,IAAIkP,MAAM,GAAGxI,MAAM,CAAC1M,CAAC,CAACmV,IAAH,CAAnB;AACA,IAAIsd,MAAM,GAAG/lB,MAAM,CAAC1M,CAAC,CAAC8M,IAAH,CAAnB;AACA,IAAI/G,cAAc,GAAG2G,MAAM,CAAC1M,CAAC,CAACC,YAAH,CAA3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI43B,aAAa,GAAG,SAASA,aAAT,CAAuB9zB,IAAvB,EAA6B;EAC/C,IAAI4E,WAAJ;;EAEA,OAAO,CAAC,EAAE,CAACA,WAAW,GAAG5E,IAAI,CAAC2C,KAApB,MAA+B,IAA/B,IAAuCiC,WAAW,KAAK,KAAK,CAA5D,IAAiEA,WAAW,CAACoqB,MAA/E,CAAR;AACD,CAJD;AAKA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAI+E,UAAU,GAAG,SAASA,UAAT,CAAoB/zB,IAApB,EAA0B;EACzC,OAAO0uB,MAAM,CAAC1uB,IAAD,CAAN,IAAgBgC,cAAc,CAAChC,IAAD,CAArC;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIg0B,UAAU,GAAG,SAASA,UAAT,CAAoBh0B,IAApB,EAA0B;EACzC,IAAIiE,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,IAAiB,EAAhC,CADyC,CACL;;EAEpC,IAAIA,QAAQ,CAAC6qB,KAAT,CAAe9sB,cAAf,CAAJ,EAAoC,OAAO,IAAP,CAHK,CAGQ;;EAEjD,IAAIiC,QAAQ,CAAC6qB,KAAT,CAAeJ,MAAf,CAAJ,EAA4B,OAAO,KAAP;EAC5B,OAAOzqB,QAAQ,CAAC6qB,KAAT,CAAeiF,UAAf,CAAP;AACD,CAPD;AAQA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIE,QAAQ,GAAG,SAASA,QAAT,CAAkBj0B,IAAlB,EAAwB;EACrC,IAAIk0B,WAAW,GAAG;IAChBjyB,IAAI,EAAEhG,CAAC,CAAC8M,IADQ;IAEhBpG,KAAK,EAAE,EAFS;IAGhB0H,KAAK,EAAE,EAHS;IAIhB0H,GAAG,EAAE,EAJW;IAKhB9N,QAAQ,EAAEjE,IAAI,CAACiE;EALC,CAAlB;EAOA,OAAOwB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAE,CAACiwB,WAAD;EADmB,CAAxB,CAAP;AAGD,CAXD;;AAaA,IAAIC,aAAa,GAAG,SAASA,aAAT,CAAuBn0B,IAAvB,EAA6B;EAC/C,IAAI,CAACmR,MAAM,CAACnR,IAAD,CAAX,EAAmB,OAAOA,IAAP,CAD4B,CACf;EAChC;;EAEA,IAAI8zB,aAAa,CAAC9zB,IAAD,CAAjB,EAAyB,OAAOyF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IACtDiC,IAAI,EAAEhG,CAAC,CAAC8M;EAD8C,CAAxB,CAAP,CAJsB,CAM3C;EACJ;;EAEA,IAAIirB,UAAU,CAACh0B,IAAD,CAAd,EAAsB,OAAOi0B,QAAQ,CAACj0B,IAAD,CAAf;EACtB,OAAOA,IAAP;AACD,CAXD;AAYA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIo0B,uBAAuB,GAAG,SAASA,uBAAT,CAAiCp0B,IAAjC,EAAuC;EACnE,IAAI,CAACA,IAAI,CAACiE,QAAV,EAAoB,OAAOjE,IAAP;EACpB,IAAI+K,YAAY,GAAGvP,OAAO,CAAC24B,aAAD,EAAgBC,uBAAhB,CAA1B;EACA,IAAInwB,QAAQ,GAAGjE,IAAI,CAACiE,QAAL,CAActF,GAAd,CAAkBoM,YAAlB,CAAf;EACA,OAAOtF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1F,IAAlB,EAAwB;IAC7BiE,QAAQ,EAAEA;EADmB,CAAxB,CAAP;AAGD,CAPD;;AASA,IAAI5F,MAAM,GAAGrC,YAAY,CAAC8P,aAAD,EAAgBoH,aAAhB,EAA+Buf,iBAA/B,EAAkD7S,iBAAlD,EAAqEuT,oBAArE,EAA2F3E,iBAA3F,EAA8GpjB,UAA9G,EAA0H0F,aAA1H,EAAyI0P,kBAAzI,EAA6JqT,oBAA7J,EAAmLZ,oBAAnL,EAAyMjhB,aAAzM,EAAwNoiB,uBAAxN,EAAiP7gB,gBAAjP,EAAmQwE,gBAAnQ,CAAzB;AAEA,SAAS1Z,MAAM,IAAIg2B,OAAnB"},"metadata":{},"sourceType":"module"}