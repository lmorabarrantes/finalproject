{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Pipe17/Desktop/practicaReact/loginfirebase/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Pipe17/Desktop/practicaReact/loginfirebase/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Pipe17/Desktop/practicaReact/loginfirebase/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useState}from\"react\";import\"../styles/login.css\";import PopUp from\"./PopUp\";import{useNavigate,Link}from\"react-router-dom\";import db from\"../firebase\";import{getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword}from\"firebase/auth\";import{doc,setDoc}from\"firebase/firestore\";import{async}from\"@firebase/util\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),pass=_useState4[0],setPass=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),nombreLogin=_useState6[0],setNombreLogin=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),esRegistro=_useState10[0],setesRegistro=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loginJoin=_useState12[0],setLoginJoin=_useState12[1];var navigate=useNavigate();//PROCESAR DATOS verify if in register or login\nvar procesarDatos=function procesarDatos(e){e.preventDefault();if(email===\"\"){setErrorMessage(\"Email Vacio\");return;}if(pass===\"\"){setErrorMessage(\"Password Vacio\");return;}if(pass.length<6){setErrorMessage(\"Password inferior a 6 caracteres\");return;}if(esRegistro){register();}else{login();}};//LOGEAR USUARIOS\nvar login=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var auth,respuesta;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;auth=getAuth();_context.next=4;return signInWithEmailAndPassword(auth,email,pass);case 4:respuesta=_context.sent;console.log(respuesta);setEmail(null);setPass(null);setErrorMessage(null);setNombreLogin(null);setLoginJoin(true);navigate(\"../panelcontrol\",{replace:true});_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);if(_context.t0.code===\"auth/user-not-found\"){setErrorMessage(\"USUARIO INVALIDO\");}if(_context.t0.code===\"auth/invalid-email\"){setErrorMessage(\"Email no valido\");}case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);})),[email,pass]);//REGISTRAR USUARIOS\nvar register=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var auth,respuesta;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;auth=getAuth();_context2.next=4;return createUserWithEmailAndPassword(auth,email,pass);case 4:respuesta=_context2.sent;console.log(respuesta);_context2.next=8;return setDoc(doc(db,\"usuarios\",respuesta.user.email),{nombre:nombreLogin,email:respuesta.user.email,uid:respuesta.user.uid});case 8:setEmail(null);setPass(null);setErrorMessage(null);setNombreLogin(null);setLoginJoin(true);navigate(\"../panelcontrol\",{replace:true});_context2.next=21;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);if(_context2.t0.code===\"auth/invalid-email\"){setErrorMessage(\"Email no valido\");}if(_context2.t0.code===\"auth/email-already-in-use\"){setErrorMessage(\"Usuario ya Registrado\");}case 21:case\"end\":return _context2.stop();}}},_callee2,null,[[0,16]]);})),[email,pass,nombreLogin]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{class:\"bg\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg bg2\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg bg3\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:esRegistro?/*#__PURE__*/_jsx(\"p\",{children:\"REGISTER\"}):/*#__PURE__*/_jsx(\"p\",{children:\"LOGIN\"})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 items-center m-5\",children:[errorMessage?/*#__PURE__*/_jsxs(\"p\",{className:\"text-center border mb-5 bg-red-400 border-red-800 font-bold text-white col-start-2 text-2xl bg-red p-5 rounded-md uppercase\",children:[errorMessage,\" \"]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"border p-8 col-start-1 md:col-start-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"Inicia sesi\\xF3n para empezar\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:procesarDatos,children:[esRegistro?/*#__PURE__*/_jsx(\"div\",{className:\"flex w-full\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"border mb-5 mt-5\",placeholder:\"Nombre\",onChange:function onChange(e){return setNombreLogin(e.target.value);}})}):null,/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"w-full text-center border mb-5 mt-5\",placeholder:\"Email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\" w-full text-center border block\",placeholder:\"Contrase\\xF1a\",onChange:function onChange(e){return setPass(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\" text-white font-bold py-5 px-4 rounded mt-2 bg-teal-500 hover:bg-teal-600 active:bg-teal-700 focus:outline-none focus:ring focus:ring-teal-300 \",children:esRegistro?/*#__PURE__*/_jsx(\"p\",{children:\"REGISTER\"}):/*#__PURE__*/_jsx(\"p\",{children:\"LOGIN\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setesRegistro(true);},className:\" text-white font-bold py-2 px-2 rounded mt-2 bg-blue-500 hover:bg-blue-600 active:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300 \",children:esRegistro?/*#__PURE__*/_jsx(\"p\",{children:\"\\xBFPosees una Cuenta?\"}):/*#__PURE__*/_jsx(\"p\",{children:\"\\xBFCREAR CUENTA?\"})})]})]})]})]})]})})]});};export default Login;","map":{"version":3,"names":["useCallback","useState","PopUp","useNavigate","Link","db","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","doc","setDoc","async","Login","email","setEmail","pass","setPass","nombreLogin","setNombreLogin","errorMessage","setErrorMessage","esRegistro","setesRegistro","loginJoin","setLoginJoin","navigate","procesarDatos","e","preventDefault","length","register","login","auth","respuesta","console","log","replace","code","user","nombre","uid","target","value"],"sources":["C:/Users/Pipe17/Desktop/practicaReact/loginfirebase/src/components/Login.jsx"],"sourcesContent":["import { useCallback, useState } from \"react\";\r\nimport \"../styles/login.css\";\r\nimport PopUp from \"./PopUp\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport db from \"../firebase\";\r\nimport {\r\n  getAuth,\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n} from \"firebase/auth\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\nimport { async } from \"@firebase/util\";\r\nconst Login = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [pass, setPass] = useState(\"\");\r\n  const [nombreLogin, setNombreLogin] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [esRegistro, setesRegistro] = useState(false);\r\n  const [loginJoin, setLoginJoin] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n  //PROCESAR DATOS verify if in register or login\r\n  const procesarDatos = (e) => {\r\n    e.preventDefault();\r\n    if (email === \"\") {\r\n      setErrorMessage(\"Email Vacio\");\r\n      return;\r\n    }\r\n    if (pass === \"\") {\r\n      setErrorMessage(\"Password Vacio\");\r\n      return;\r\n    }\r\n    if (pass.length < 6) {\r\n      setErrorMessage(\"Password inferior a 6 caracteres\");\r\n      return;\r\n    }\r\n    if (esRegistro) {\r\n      register();\r\n    } else {\r\n      login();\r\n    }\r\n  };\r\n  //LOGEAR USUARIOS\r\n  const login = useCallback(async () => {\r\n    try {\r\n      const auth = getAuth();\r\n      const respuesta = await signInWithEmailAndPassword(auth, email, pass);\r\n      console.log(respuesta);\r\n      setEmail(null);\r\n      setPass(null);\r\n      setErrorMessage(null);\r\n      setNombreLogin(null);\r\n      setLoginJoin(true);\r\n      navigate(\"../panelcontrol\", { replace: true });\r\n    } catch (error) {\r\n      if (error.code === \"auth/user-not-found\") {\r\n        setErrorMessage(\"USUARIO INVALIDO\");\r\n      }\r\n      if (error.code === \"auth/invalid-email\") {\r\n        setErrorMessage(\"Email no valido\");\r\n      }\r\n    }\r\n  }, [email, pass]);\r\n\r\n  //REGISTRAR USUARIOS\r\n  const register = useCallback(async () => {\r\n    try {\r\n      const auth = getAuth();\r\n      const respuesta = await createUserWithEmailAndPassword(auth, email, pass);\r\n      console.log(respuesta);\r\n      await setDoc(doc(db, \"usuarios\", respuesta.user.email), {\r\n        nombre: nombreLogin,\r\n        email: respuesta.user.email,\r\n        uid: respuesta.user.uid,\r\n      });\r\n\r\n      setEmail(null);\r\n      setPass(null);\r\n      setErrorMessage(null);\r\n      setNombreLogin(null);\r\n      setLoginJoin(true);\r\n\r\n      navigate(\"../panelcontrol\", { replace: true });\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.code === \"auth/invalid-email\") {\r\n        setErrorMessage(\"Email no valido\");\r\n      }\r\n      if (error.code === \"auth/email-already-in-use\") {\r\n        setErrorMessage(\"Usuario ya Registrado\");\r\n      }\r\n    }\r\n  }, [email, pass, nombreLogin]);\r\n\r\n  return (\r\n    <>\r\n      <div class=\"bg\"></div>\r\n      <div class=\"bg bg2\"></div>\r\n      <div class=\"bg bg3\"></div>\r\n      <div>\r\n        <div className=\"mt-5\">\r\n          <h3 className=\"text-center\">\r\n            {esRegistro ? <p>REGISTER</p> : <p>LOGIN</p>}\r\n          </h3>\r\n          <hr />\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 items-center m-5\">\r\n            {errorMessage ? (\r\n              <p className=\"text-center border mb-5 bg-red-400 border-red-800 font-bold text-white col-start-2 text-2xl bg-red p-5 rounded-md uppercase\">\r\n                {errorMessage}{\" \"}\r\n              </p>\r\n            ) : null}\r\n            <div className=\"border p-8 col-start-1 md:col-start-2\">\r\n              <h3 className=\"text-center\">Inicia sesión para empezar</h3>\r\n              <form onSubmit={procesarDatos}>\r\n                {esRegistro ? (\r\n                  <div className=\"flex w-full\">\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"border mb-5 mt-5\"\r\n                      placeholder=\"Nombre\"\r\n                      onChange={(e) => setNombreLogin(e.target.value)}\r\n                    />\r\n                  </div>\r\n                ) : null}\r\n                <input\r\n                  type=\"email\"\r\n                  className=\"w-full text-center border mb-5 mt-5\"\r\n                  placeholder=\"Email\"\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                />\r\n                <input\r\n                  type=\"password\"\r\n                  className=\" w-full text-center border block\"\r\n                  placeholder=\"Contraseña\"\r\n                  onChange={(e) => setPass(e.target.value)}\r\n                />\r\n                <div className=\"flex flex-col\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\" text-white font-bold py-5 px-4 rounded mt-2 bg-teal-500 hover:bg-teal-600 active:bg-teal-700 focus:outline-none focus:ring focus:ring-teal-300 \"\r\n                  >\r\n                    {esRegistro ? <p>REGISTER</p> : <p>LOGIN</p>}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setesRegistro(true)}\r\n                    className=\" text-white font-bold py-2 px-2 rounded mt-2 bg-blue-500 hover:bg-blue-600 active:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300 \"\r\n                  >\r\n                    {esRegistro ? (\r\n                      <p>¿Posees una Cuenta?</p>\r\n                    ) : (\r\n                      <p>¿CREAR CUENTA?</p>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}