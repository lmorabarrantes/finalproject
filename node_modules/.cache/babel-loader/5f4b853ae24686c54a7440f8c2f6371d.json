{"ast":null,"code":"import * as P from '@react-pdf/primitives';\nimport { isNil, matchPercent } from '@react-pdf/fns';\nimport advanceWidth from '@react-pdf/textkit/lib/run/advanceWidth';\nimport lineWidth from '@react-pdf/textkit/lib/attributedString/advanceWidth';\nimport absPath from 'abs-svg-path';\nimport parsePath from 'parse-svg-path';\nimport normalizePath from 'normalize-svg-path';\nimport runHeight from '@react-pdf/textkit/lib/run/height';\nimport runDescent from '@react-pdf/textkit/lib/run/descent';\nimport ascent from '@react-pdf/textkit/lib/attributedString/ascent';\nimport colorString from 'color-string';\nimport _extends from '@babel/runtime/helpers/extends';\n\nvar renderPath = function renderPath(ctx, node) {\n  var _node$props;\n\n  var d = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.d;\n  if (d) ctx.path(node.props.d);\n};\n\nvar KAPPA$3 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar renderRect = function renderRect(ctx, node) {\n  var _node$props, _node$props2, _node$props3, _node$props4, _node$props5, _node$props6;\n\n  var x = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.x) || 0;\n  var y = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.y) || 0;\n  var rx = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.rx) || 0;\n  var ry = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.ry) || 0;\n  var width = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.width) || 0;\n  var height = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.height) || 0;\n  if (!width || !height) return;\n\n  if (rx && ry) {\n    var krx = rx * KAPPA$3;\n    var kry = ry * KAPPA$3;\n    ctx.moveTo(x + rx, y);\n    ctx.lineTo(x - rx + width, y);\n    ctx.bezierCurveTo(x - rx + width + krx, y, x + width, y + ry - kry, x + width, y + ry);\n    ctx.lineTo(x + width, y + height - ry);\n    ctx.bezierCurveTo(x + width, y + height - ry + kry, x - rx + width + krx, y + height, x - rx + width, y + height);\n    ctx.lineTo(x + rx, y + height);\n    ctx.bezierCurveTo(x + rx - krx, y + height, x, y + height - ry + kry, x, y + height - ry);\n    ctx.lineTo(x, y + ry);\n    ctx.bezierCurveTo(x, y + ry - kry, x + rx - krx, y, x + rx, y);\n  } else {\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + width, y);\n    ctx.lineTo(x + width, y + height);\n    ctx.lineTo(x, y + height);\n  }\n\n  ctx.closePath();\n};\n\nvar renderLine$1 = function renderLine(ctx, node) {\n  var _ref = node.props || {},\n      x1 = _ref.x1,\n      x2 = _ref.x2,\n      y1 = _ref.y1,\n      y2 = _ref.y2;\n\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n};\n\nvar renderGroup = function renderGroup() {// noop\n};\n\nvar KAPPA$2 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar drawEllipse = function drawEllipse(ctx, cx, cy, rx, ry) {\n  var x = cx - rx;\n  var y = cy - ry;\n  var ox = rx * KAPPA$2;\n  var oy = ry * KAPPA$2;\n  var xe = x + rx * 2;\n  var ye = y + ry * 2;\n  var xm = x + rx;\n  var ym = y + ry;\n  ctx.moveTo(x, ym);\n  ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n  ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n  ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n  ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n  ctx.closePath();\n};\n\nvar renderEllipse = function renderEllipse(ctx, node) {\n  var _ref = node.props || {},\n      cx = _ref.cx,\n      cy = _ref.cy,\n      rx = _ref.rx,\n      ry = _ref.ry;\n\n  drawEllipse(ctx, cx, cy, rx, ry);\n};\n\nvar renderCircle = function renderCircle(ctx, node) {\n  var _node$props, _node$props2, _node$props3;\n\n  var cx = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.cx;\n  var cy = (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.cy;\n  var r = (_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.r;\n  drawEllipse(ctx, cx, cy, r, r);\n};\n\nvar renderGlyphs = function renderGlyphs(ctx, glyphs, positions, x, y, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var scale = 1000 / ctx._fontSize;\n  var unitsPerEm = ctx._font.font.unitsPerEm || 1000;\n  var advanceWidthScale = 1000 / unitsPerEm; // Glyph encoding and positioning\n\n  var encodedGlyphs = ctx._font.encodeGlyphs(glyphs);\n\n  var encodedPositions = positions.map(function (pos, i) {\n    return {\n      xAdvance: pos.xAdvance * scale,\n      yAdvance: pos.yAdvance * scale,\n      xOffset: pos.xOffset,\n      yOffset: pos.yOffset,\n      advanceWidth: glyphs[i].advanceWidth * advanceWidthScale\n    };\n  });\n  return ctx._glyphs(encodedGlyphs, encodedPositions, x, y, options);\n};\n\nvar renderRun$1 = function renderRun(ctx, run) {\n  var runAdvanceWidth = advanceWidth(run);\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      color = _run$attributes.color,\n      opacity = _run$attributes.opacity;\n  ctx.fillColor(color);\n  ctx.fillOpacity(opacity);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      renderGlyphs(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(runAdvanceWidth, 0);\n};\n\nvar renderSpan = function renderSpan(ctx, line, textAnchor, dominantBaseline) {\n  var _line$box, _line$box2, _line$runs$, _line$runs$2, _line$runs$2$attribut;\n\n  ctx.save();\n  var x = ((_line$box = line.box) === null || _line$box === void 0 ? void 0 : _line$box.x) || 0;\n  var y = ((_line$box2 = line.box) === null || _line$box2 === void 0 ? void 0 : _line$box2.y) || 0;\n  var font = (_line$runs$ = line.runs[0]) === null || _line$runs$ === void 0 ? void 0 : _line$runs$.attributes.font;\n  var scale = ((_line$runs$2 = line.runs[0]) === null || _line$runs$2 === void 0 ? void 0 : (_line$runs$2$attribut = _line$runs$2.attributes) === null || _line$runs$2$attribut === void 0 ? void 0 : _line$runs$2$attribut.scale) || 1;\n  var width = lineWidth(line);\n  var ascent = font.ascent * scale;\n  var xHeight = font.xHeight * scale;\n  var descent = font.descent * scale;\n  var capHeight = font.capHeight * scale;\n  var xTranslate = x;\n  var yTranslate = y;\n\n  switch (textAnchor) {\n    case 'middle':\n      xTranslate = x - width / 2;\n      break;\n\n    case 'end':\n      xTranslate = x - width;\n      break;\n\n    default:\n      xTranslate = x;\n      break;\n  }\n\n  switch (dominantBaseline) {\n    case 'middle':\n    case 'central':\n      yTranslate = y + capHeight / 2;\n      break;\n\n    case 'hanging':\n      yTranslate = y + capHeight;\n      break;\n\n    case 'mathematical':\n      yTranslate = y + xHeight;\n      break;\n\n    case 'text-after-edge':\n      yTranslate = y + descent;\n      break;\n\n    case 'text-before-edge':\n      yTranslate = y + ascent;\n      break;\n\n    default:\n      yTranslate = y;\n      break;\n  }\n\n  ctx.translate(xTranslate, yTranslate);\n  line.runs.forEach(function (run) {\n    return renderRun$1(ctx, run);\n  });\n  ctx.restore();\n};\n\nvar renderSvgText = function renderSvgText(ctx, node) {\n  node.children.forEach(function (span) {\n    return renderSpan(ctx, span.lines[0], span.props.textAnchor, span.props.dominantBaseline);\n  });\n};\n\nvar pairs = function pairs(values) {\n  var result = [];\n\n  for (var i = 0; i < values.length; i += 2) {\n    result.push([values[i], values[i + 1]]);\n  }\n\n  return result;\n};\n/**\n * Parse svg-like points into number arrays\n *\n * @param {String} points string ex. \"20,30 50,60\"\n * @return {Array} points array ex. [[20, 30], [50, 60]]\n */\n\n\nvar parsePoints = function parsePoints(points) {\n  var values = (points || '').trim().replace(/,/g, ' ').replace(/(\\d)-(\\d)/g, '$1 -$2').split(/\\s+/);\n\n  if (values.length % 2 !== 0) {\n    values = values.slice(0, -1);\n  }\n\n  values = values.map(parseFloat);\n  return pairs(values);\n};\n\nvar drawPolyline = function drawPolyline(ctx, points) {\n  if (points.length > 0) {\n    ctx.moveTo(points[0][0], points[0][1]);\n    points.slice(1).forEach(function (p) {\n      return ctx.lineTo(p[0], p[1]);\n    });\n  }\n};\n\nvar renderPolyline = function renderPolyline(ctx, node) {\n  var points = parsePoints(node.props.points || '');\n  drawPolyline(ctx, points);\n};\n\nvar renderPolygon = function renderPolygon(ctx, node) {\n  renderPolyline(ctx, node);\n  ctx.closePath();\n};\n\nvar renderImage$1 = function renderImage(ctx, node) {\n  if (!node.image.data) return;\n  var _node$props = node.props,\n      x = _node$props.x,\n      y = _node$props.y;\n  var _node$style = node.style,\n      width = _node$style.width,\n      height = _node$style.height,\n      opacity = _node$style.opacity;\n  var paddingTop = node.box.paddingLeft || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n\n  if (width === 0 || height === 0) {\n    console.warn(\"Image with src '\" + node.props.href + \"' skipped due to invalid dimensions\");\n    return;\n  }\n\n  ctx.save();\n  ctx.fillOpacity(opacity || 1).image(node.image.data, x + paddingLeft, y + paddingTop, {\n    width: width,\n    height: height\n  });\n  ctx.restore();\n}; // This constant is used to approximate a symmetrical arc using a cubic\n// Bezier curve.\n\n\nvar KAPPA$1 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar clipNode = function clipNode(ctx, node) {\n  if (!node.style) return;\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var _node$style = node.style,\n      _node$style$borderTop = _node$style.borderTopLeftRadius,\n      borderTopLeftRadius = _node$style$borderTop === void 0 ? 0 : _node$style$borderTop,\n      _node$style$borderTop2 = _node$style.borderTopRightRadius,\n      borderTopRightRadius = _node$style$borderTop2 === void 0 ? 0 : _node$style$borderTop2,\n      _node$style$borderBot = _node$style.borderBottomRightRadius,\n      borderBottomRightRadius = _node$style$borderBot === void 0 ? 0 : _node$style$borderBot,\n      _node$style$borderBot2 = _node$style.borderBottomLeftRadius,\n      borderBottomLeftRadius = _node$style$borderBot2 === void 0 ? 0 : _node$style$borderBot2; // Border top\n\n  var rtr = Math.min(borderTopRightRadius, 0.5 * width, 0.5 * height);\n  var ctr = rtr * (1.0 - KAPPA$1);\n  ctx.moveTo(left + rtr, top);\n  ctx.lineTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - ctr, top, left + width, top + ctr, left + width, top + rtr); // Border right\n\n  var rbr = Math.min(borderBottomRightRadius, 0.5 * width, 0.5 * height);\n  var cbr = rbr * (1.0 - KAPPA$1);\n  ctx.lineTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - cbr, left + width - cbr, top + height, left + width - rbr, top + height); // Border bottom\n\n  var rbl = Math.min(borderBottomLeftRadius, 0.5 * width, 0.5 * height);\n  var cbl = rbl * (1.0 - KAPPA$1);\n  ctx.lineTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + cbl, top + height, left, top + height - cbl, left, top + height - rbl); // Border left\n\n  var rtl = Math.min(borderTopLeftRadius, 0.5 * width, 0.5 * height);\n  var ctl = rtl * (1.0 - KAPPA$1);\n  ctx.lineTo(left, top + rtl);\n  ctx.bezierCurveTo(left, top + ctl, left + ctl, top, left + rtl, top);\n  ctx.closePath();\n  ctx.clip();\n}; // TODO: Implement using only matrices to support skew and even more operations than css.\n\n\nvar applySingleTransformation = function applySingleTransformation(ctx, transform, origin) {\n  var operation = transform.operation,\n      value = transform.value;\n\n  switch (operation) {\n    case 'scale':\n      {\n        var scaleX = value[0],\n            scaleY = value[1];\n        ctx.scale(scaleX, scaleY, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'rotate':\n      {\n        var angle = value[0];\n        ctx.rotate(angle, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'translate':\n      {\n        var x = value[0],\n            y = value[1];\n        ctx.translate(x, y, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'matrix':\n      {\n        ctx.transform.apply(ctx, value);\n        break;\n      }\n\n    default:\n      {\n        console.error(\"Transform operation: '\" + operation + \"' doesn't supported\");\n      }\n  }\n};\n\nvar applyTransformations = function applyTransformations(ctx, node) {\n  var _node$style, _node$props;\n\n  if (!node.origin) return;\n  var origin = [node.origin.left, node.origin.top];\n  var operations = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.transform) || ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.transform) || [];\n  operations.forEach(function (operation) {\n    applySingleTransformation(ctx, operation, origin);\n  });\n};\n\nvar _boundingBoxFns;\n\nvar getPathBoundingBox = function getPathBoundingBox(node) {\n  var _node$props;\n\n  var path = normalizePath(absPath(parsePath(((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.d) || '')));\n  if (!path.length) return [0, 0, 0, 0];\n  var bounds = [Infinity, Infinity, -Infinity, -Infinity];\n\n  for (var i = 0, l = path.length; i < l; i += 1) {\n    var points = path[i].slice(1);\n\n    for (var j = 0; j < points.length; j += 2) {\n      if (points[j + 0] < bounds[0]) bounds[0] = points[j + 0];\n      if (points[j + 1] < bounds[1]) bounds[1] = points[j + 1];\n      if (points[j + 0] > bounds[2]) bounds[2] = points[j + 0];\n      if (points[j + 1] > bounds[3]) bounds[3] = points[j + 1];\n    }\n  }\n\n  return bounds;\n};\n\nvar getCircleBoundingBox = function getCircleBoundingBox(node) {\n  var _node$props2, _node$props3, _node$props4;\n\n  var r = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.r) || 0;\n  var cx = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.cx) || 0;\n  var cy = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.cy) || 0;\n  return [cx - r, cy - r, cx + r, cy + r];\n};\n\nvar getEllipseBoundingBox = function getEllipseBoundingBox(node) {\n  var _node$props5, _node$props6, _node$props7, _node$props8;\n\n  var cx = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.cx) || 0;\n  var cy = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.cy) || 0;\n  var rx = ((_node$props7 = node.props) === null || _node$props7 === void 0 ? void 0 : _node$props7.rx) || 0;\n  var ry = ((_node$props8 = node.props) === null || _node$props8 === void 0 ? void 0 : _node$props8.ry) || 0;\n  return [cx - rx, cy - ry, cx + rx, cy + ry];\n};\n\nvar getLineBoundingBox = function getLineBoundingBox(node) {\n  var _node$props9, _node$props10, _node$props11, _node$props12;\n\n  var x1 = ((_node$props9 = node.props) === null || _node$props9 === void 0 ? void 0 : _node$props9.x1) || 0;\n  var y1 = ((_node$props10 = node.props) === null || _node$props10 === void 0 ? void 0 : _node$props10.y1) || 0;\n  var x2 = ((_node$props11 = node.props) === null || _node$props11 === void 0 ? void 0 : _node$props11.x2) || 0;\n  var y2 = ((_node$props12 = node.props) === null || _node$props12 === void 0 ? void 0 : _node$props12.y2) || 0;\n  return [Math.min(x1, x2), Math.min(y1, y2), Math.max(x1, x2), Math.max(y1, y2)];\n};\n\nvar getRectBoundingBox = function getRectBoundingBox(node) {\n  var _node$props13, _node$props14, _node$props15, _node$props16;\n\n  var x = ((_node$props13 = node.props) === null || _node$props13 === void 0 ? void 0 : _node$props13.x) || 0;\n  var y = ((_node$props14 = node.props) === null || _node$props14 === void 0 ? void 0 : _node$props14.y) || 0;\n  var width = ((_node$props15 = node.props) === null || _node$props15 === void 0 ? void 0 : _node$props15.width) || 0;\n  var height = ((_node$props16 = node.props) === null || _node$props16 === void 0 ? void 0 : _node$props16.height) || 0;\n  return [x, y, x + width, y + height];\n};\n\nvar max = function max(values) {\n  return Math.max.apply(Math, [-Infinity].concat(values));\n};\n\nvar min = function min(values) {\n  return Math.min.apply(Math, [Infinity].concat(values));\n};\n\nvar getPolylineBoundingBox = function getPolylineBoundingBox(node) {\n  var _node$props17;\n\n  var points = parsePoints(((_node$props17 = node.props) === null || _node$props17 === void 0 ? void 0 : _node$props17.points) || []);\n  var xValues = points.map(function (p) {\n    return p[0];\n  });\n  var yValues = points.map(function (p) {\n    return p[1];\n  });\n  return [min(xValues), min(yValues), max(xValues), max(yValues)];\n};\n\nvar boundingBoxFns = (_boundingBoxFns = {}, _boundingBoxFns[P.Rect] = getRectBoundingBox, _boundingBoxFns[P.Line] = getLineBoundingBox, _boundingBoxFns[P.Path] = getPathBoundingBox, _boundingBoxFns[P.Circle] = getCircleBoundingBox, _boundingBoxFns[P.Ellipse] = getEllipseBoundingBox, _boundingBoxFns[P.Polygon] = getPolylineBoundingBox, _boundingBoxFns[P.Polyline] = getPolylineBoundingBox, _boundingBoxFns);\n\nvar getBoundingBox = function getBoundingBox(node) {\n  var boundingBoxFn = boundingBoxFns[node.type];\n  return boundingBoxFn ? boundingBoxFn(node) : [0, 0, 0, 0];\n};\n\nvar _renderFns$1;\n\nvar setStrokeWidth = function setStrokeWidth(ctx, node) {\n  var _node$props;\n\n  var lineWidth = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.strokeWidth) || 0;\n  if (lineWidth) ctx.lineWidth(lineWidth);\n};\n\nvar setStrokeColor = function setStrokeColor(ctx, node) {\n  var _node$props2;\n\n  var strokeColor = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.stroke) || null;\n  if (strokeColor) ctx.strokeColor(strokeColor);\n};\n\nvar setOpacity = function setOpacity(ctx, node) {\n  var _node$props3;\n\n  var opacity = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.opacity) || null;\n  if (!isNil(opacity)) ctx.opacity(opacity);\n};\n\nvar setFillOpacity = function setFillOpacity(ctx, node) {\n  var _node$props4;\n\n  var fillOpacity = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.fillOpacity) || null;\n  if (!isNil(fillOpacity)) ctx.fillOpacity(fillOpacity);\n};\n\nvar setStrokeOpacity = function setStrokeOpacity(ctx, node) {\n  var _node$props5;\n\n  var strokeOpacity = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.strokeOpacity) || null;\n  if (!isNil(strokeOpacity)) ctx.strokeOpacity(strokeOpacity);\n};\n\nvar setLineJoin = function setLineJoin(ctx, node) {\n  var _node$props6;\n\n  var lineJoin = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.strokeLinejoin) || null;\n  if (lineJoin) ctx.lineJoin(lineJoin);\n};\n\nvar setLineCap = function setLineCap(ctx, node) {\n  var _node$props7;\n\n  var lineCap = ((_node$props7 = node.props) === null || _node$props7 === void 0 ? void 0 : _node$props7.strokeLinecap) || null;\n  if (lineCap) ctx.lineCap(lineCap);\n};\n\nvar setLineDash = function setLineDash(ctx, node) {\n  var _node$props8;\n\n  var value = ((_node$props8 = node.props) === null || _node$props8 === void 0 ? void 0 : _node$props8.strokeDasharray) || null;\n  if (value) ctx.dash(value.split(','));\n};\n\nvar hasLinearGradientFill = function hasLinearGradientFill(node) {\n  var _node$props9, _node$props9$fill;\n\n  return ((_node$props9 = node.props) === null || _node$props9 === void 0 ? void 0 : (_node$props9$fill = _node$props9.fill) === null || _node$props9$fill === void 0 ? void 0 : _node$props9$fill.type) === P.LinearGradient;\n};\n\nvar hasRadialGradientFill = function hasRadialGradientFill(node) {\n  var _node$props10, _node$props10$fill;\n\n  return ((_node$props10 = node.props) === null || _node$props10 === void 0 ? void 0 : (_node$props10$fill = _node$props10.fill) === null || _node$props10$fill === void 0 ? void 0 : _node$props10$fill.type) === P.RadialGradient;\n}; // Math simplified from https://github.com/devongovett/svgkit/blob/master/src/elements/SVGGradient.js#L104\n\n\nvar setLinearGradientFill = function setLinearGradientFill(ctx, node) {\n  var _node$props11;\n\n  var bbox = getBoundingBox(node);\n  var gradient = ((_node$props11 = node.props) === null || _node$props11 === void 0 ? void 0 : _node$props11.fill) || null;\n  var x1 = gradient.props.x1 || 0;\n  var y1 = gradient.props.y1 || 0;\n  var x2 = gradient.props.x2 || 1;\n  var y2 = gradient.props.y2 || 0;\n  var m0 = bbox[2] - bbox[0];\n  var m3 = bbox[3] - bbox[1];\n  var m4 = bbox[0];\n  var m5 = bbox[1];\n  var gx1 = m0 * x1 + m4;\n  var gy1 = m3 * y1 + m5;\n  var gx2 = m0 * x2 + m4;\n  var gy2 = m3 * y2 + m5;\n  var grad = ctx.linearGradient(gx1, gy1, gx2, gy2);\n  gradient.children.forEach(function (stop) {\n    grad.stop(stop.props.offset, stop.props.stopColor, stop.props.stopOpacity);\n  });\n  ctx.fill(grad);\n}; // Math simplified from https://github.com/devongovett/svgkit/blob/master/src/elements/SVGGradient.js#L155\n\n\nvar setRadialGradientFill = function setRadialGradientFill(ctx, node) {\n  var _node$props12;\n\n  var bbox = getBoundingBox(node);\n  var gradient = ((_node$props12 = node.props) === null || _node$props12 === void 0 ? void 0 : _node$props12.fill) || null;\n  var cx = gradient.props.cx || 0.5;\n  var cy = gradient.props.cy || 0.5;\n  var fx = gradient.props.fx || cx;\n  var fy = gradient.props.fy || cy;\n  var r = gradient.props.r || 0.5;\n  var m0 = bbox[2] - bbox[0];\n  var m3 = bbox[3] - bbox[1];\n  var m4 = bbox[0];\n  var m5 = bbox[1];\n  var gr = r * m0;\n  var gcx = m0 * cx + m4;\n  var gcy = m3 * cy + m5;\n  var gfx = m0 * fx + m4;\n  var gfy = m3 * fy + m5;\n  var grad = ctx.radialGradient(gfx, gfy, 0, gcx, gcy, gr);\n  gradient.children.forEach(function (stop) {\n    grad.stop(stop.props.offset, stop.props.stopColor, stop.props.stopOpacity);\n  });\n  ctx.fill(grad);\n};\n\nvar setFillColor = function setFillColor(ctx, node) {\n  var _node$props13;\n\n  var fillColor = ((_node$props13 = node.props) === null || _node$props13 === void 0 ? void 0 : _node$props13.fill) || null;\n  if (fillColor) ctx.fillColor(fillColor);\n};\n\nvar setFill = function setFill(ctx, node) {\n  if (hasLinearGradientFill(node)) return setLinearGradientFill(ctx, node);\n  if (hasRadialGradientFill(node)) return setRadialGradientFill(ctx, node);\n  return setFillColor(ctx, node);\n};\n\nvar draw = function draw(ctx, node) {\n  var props = node.props || {};\n\n  if (props.fill && props.stroke) {\n    ctx.fillAndStroke(props.fillRule);\n  } else if (props.fill) {\n    ctx.fill(props.fillRule);\n  } else if (props.stroke) {\n    ctx.stroke();\n  } else {\n    ctx.save();\n    ctx.opacity(0);\n    ctx.fill(null);\n    ctx.restore();\n  }\n};\n\nvar noop = function noop() {};\n\nvar renderFns$1 = (_renderFns$1 = {}, _renderFns$1[P.Tspan] = noop, _renderFns$1[P.TextInstance] = noop, _renderFns$1[P.Path] = renderPath, _renderFns$1[P.Rect] = renderRect, _renderFns$1[P.Line] = renderLine$1, _renderFns$1[P.G] = renderGroup, _renderFns$1[P.Text] = renderSvgText, _renderFns$1[P.Circle] = renderCircle, _renderFns$1[P.Image] = renderImage$1, _renderFns$1[P.Ellipse] = renderEllipse, _renderFns$1[P.Polygon] = renderPolygon, _renderFns$1[P.Polyline] = renderPolyline, _renderFns$1);\n\nvar renderNode$1 = function renderNode(ctx, node) {\n  var renderFn = renderFns$1[node.type];\n\n  if (renderFns$1) {\n    renderFn(ctx, node);\n  } else {\n    console.warn(\"SVG node of type \" + node.type + \" is not currenty supported\");\n  }\n};\n\nvar drawNode = function drawNode(ctx, node) {\n  setLineCap(ctx, node);\n  setLineDash(ctx, node);\n  setLineJoin(ctx, node);\n  setStrokeWidth(ctx, node);\n  setStrokeColor(ctx, node);\n  setFill(ctx, node);\n  setStrokeOpacity(ctx, node);\n  setFillOpacity(ctx, node);\n  setOpacity(ctx, node);\n  applyTransformations(ctx, node);\n  renderNode$1(ctx, node);\n  draw(ctx, node);\n};\n\nvar clipPath = function clipPath(ctx, node) {\n  var _node$props14;\n\n  var value = (_node$props14 = node.props) === null || _node$props14 === void 0 ? void 0 : _node$props14.clipPath;\n\n  if (value) {\n    var children = value.children || [];\n    children.forEach(function (child) {\n      return renderNode$1(ctx, child);\n    });\n    ctx.clip();\n  }\n};\n\nvar drawChildren = function drawChildren(ctx, node) {\n  var children = node.children || [];\n  children.forEach(function (child) {\n    ctx.save();\n    clipPath(ctx, child);\n    drawNode(ctx, child);\n    drawChildren(ctx, child);\n    ctx.restore();\n  });\n};\n\nvar resolveAspectRatio = function resolveAspectRatio(ctx, node) {\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height;\n  var _node$props15 = node.props,\n      viewBox = _node$props15.viewBox,\n      _node$props15$preserv = _node$props15.preserveAspectRatio,\n      preserveAspectRatio = _node$props15$preserv === void 0 ? {} : _node$props15$preserv;\n  var _preserveAspectRatio$ = preserveAspectRatio.meetOrSlice,\n      meetOrSlice = _preserveAspectRatio$ === void 0 ? 'meet' : _preserveAspectRatio$,\n      _preserveAspectRatio$2 = preserveAspectRatio.align,\n      align = _preserveAspectRatio$2 === void 0 ? 'xMidYMid' : _preserveAspectRatio$2;\n  if (viewBox == null || width == null || height == null) return;\n  var x = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.minX) || 0;\n  var y = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.minY) || 0;\n  var logicalWidth = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.maxX) || width;\n  var logicalHeight = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.maxY) || height;\n  var logicalRatio = logicalWidth / logicalHeight;\n  var physicalRatio = width / height;\n  var scaleX = width / logicalWidth;\n  var scaleY = height / logicalHeight;\n\n  if (align === 'none') {\n    ctx.scale(scaleX, scaleY);\n    ctx.translate(-x, -y);\n    return;\n  }\n\n  if (logicalRatio < physicalRatio && meetOrSlice === 'meet' || logicalRatio >= physicalRatio && meetOrSlice === 'slice') {\n    ctx.scale(scaleY, scaleY);\n\n    switch (align) {\n      case 'xMinYMin':\n      case 'xMinYMid':\n      case 'xMinYMax':\n        ctx.translate(-x, -y);\n        break;\n\n      case 'xMidYMin':\n      case 'xMidYMid':\n      case 'xMidYMax':\n        ctx.translate(-x - (logicalWidth - width * logicalHeight / height) / 2, -y);\n        break;\n\n      default:\n        ctx.translate(-x - (logicalWidth - width * logicalHeight / height), -y);\n    }\n  } else {\n    ctx.scale(scaleX, scaleX);\n\n    switch (align) {\n      case 'xMinYMin':\n      case 'xMidYMin':\n      case 'xMaxYMin':\n        ctx.translate(-x, -y);\n        break;\n\n      case 'xMinYMid':\n      case 'xMidYMid':\n      case 'xMaxYMid':\n        ctx.translate(-x, -y - (logicalHeight - height * logicalWidth / width) / 2);\n        break;\n\n      default:\n        ctx.translate(-x, -y - (logicalHeight - height * logicalWidth / width));\n    }\n  }\n};\n\nvar moveToOrigin = function moveToOrigin(ctx, node) {\n  var _node$box2 = node.box,\n      top = _node$box2.top,\n      left = _node$box2.left;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var paddingTop = node.box.paddingTop || 0;\n  ctx.translate(left + paddingLeft, top + paddingTop);\n};\n\nvar renderSvg = function renderSvg(ctx, node) {\n  ctx.save();\n  clipNode(ctx, node);\n  moveToOrigin(ctx, node);\n  resolveAspectRatio(ctx, node);\n  drawChildren(ctx, node);\n  ctx.restore();\n};\n\nvar parseColor = function parseColor(hex) {\n  var parsed = colorString.get(hex);\n  var value = colorString.to.hex(parsed.value.slice(0, 3));\n  var opacity = parsed.value[3];\n  return {\n    value: value,\n    opacity: opacity\n  };\n};\n/* eslint-disable no-param-reassign */\n\n\nvar DEST_REGEXP = /^#.+/;\n\nvar isSrcId$1 = function isSrcId(src) {\n  return src.match(DEST_REGEXP);\n};\n\nvar renderAttachment = function renderAttachment(ctx, attachment) {\n  var _attachment$xOffset = attachment.xOffset,\n      xOffset = _attachment$xOffset === void 0 ? 0 : _attachment$xOffset,\n      _attachment$yOffset = attachment.yOffset,\n      yOffset = _attachment$yOffset === void 0 ? 0 : _attachment$yOffset,\n      width = attachment.width,\n      height = attachment.height,\n      image = attachment.image;\n  ctx.translate(-width + xOffset, -height + yOffset);\n  ctx.image(image, 0, 0, {\n    fit: [width, height],\n    align: 'center',\n    valign: 'bottom'\n  });\n};\n\nvar renderAttachments = function renderAttachments(ctx, run) {\n  ctx.save();\n  var font = run.attributes.font;\n  var space = font.glyphForCodePoint(0x20);\n  var objectReplacement = font.glyphForCodePoint(0xfffc);\n  var attachmentAdvance = 0;\n\n  for (var i = 0; i < run.glyphs.length; i += 1) {\n    var position = run.positions[i];\n    var glyph = run.glyphs[i];\n    attachmentAdvance += position.xAdvance || 0;\n\n    if (glyph.id === objectReplacement.id && run.attributes.attachment) {\n      ctx.translate(attachmentAdvance, position.yOffset || 0);\n      renderAttachment(ctx, run.attributes.attachment);\n      run.glyphs[i] = space;\n      attachmentAdvance = 0;\n    }\n  }\n\n  ctx.restore();\n};\n\nvar renderRun = function renderRun(ctx, run, options) {\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      link = _run$attributes.link;\n  var color = parseColor(run.attributes.color);\n  var opacity = isNil(run.attributes.opacity) ? color.opacity : run.attributes.opacity;\n  var height = runHeight(run);\n  var descent = runDescent(run);\n  var runAdvanceWidth = advanceWidth(run);\n\n  if (options.outlineRuns) {\n    ctx.rect(0, -height, runAdvanceWidth, height).stroke();\n  }\n\n  ctx.fillColor(color.value);\n  ctx.fillOpacity(opacity);\n\n  if (link) {\n    if (isSrcId$1(link)) {\n      ctx.goTo(0, -height - descent, runAdvanceWidth, height, link.slice(1));\n    } else {\n      ctx.link(0, -height - descent, runAdvanceWidth, height, link);\n    }\n  }\n\n  renderAttachments(ctx, run);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      renderGlyphs(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(runAdvanceWidth, 0);\n};\n\nvar renderBackground$1 = function renderBackground(ctx, rect, backgroundColor) {\n  var color = parseColor(backgroundColor);\n  ctx.save();\n  ctx.fillOpacity(color.opacity);\n  ctx.rect(rect.x, rect.y, rect.width, rect.height);\n  ctx.fill(color.value);\n  ctx.restore();\n};\n\nvar renderDecorationLine = function renderDecorationLine(ctx, line) {\n  ctx.save();\n  ctx.lineWidth(line.rect.height);\n  ctx.strokeOpacity(line.opacity);\n\n  if (/dashed/.test(line.style)) {\n    ctx.dash(3 * line.rect.height);\n  } else if (/dotted/.test(line.style)) {\n    ctx.dash(line.rect.height);\n  }\n\n  if (/wavy/.test(line.style)) {\n    var dist = Math.max(2, line.rect.height);\n    var step = 1.1 * dist;\n    var stepCount = Math.floor(line.rect.width / (2 * step)); // Adjust step to fill entire width\n\n    var remainingWidth = line.rect.width - stepCount * 2 * step;\n    var adjustment = remainingWidth / stepCount / 2;\n    step += adjustment;\n    var cp1y = line.rect.y + dist;\n    var cp2y = line.rect.y - dist;\n    var x = line.rect.x;\n    ctx.moveTo(line.rect.x, line.rect.y);\n\n    for (var i = 0; i < stepCount; i += 1) {\n      ctx.bezierCurveTo(x + step, cp1y, x + step, cp2y, x + 2 * step, line.rect.y);\n      x += 2 * step;\n    }\n  } else {\n    ctx.moveTo(line.rect.x, line.rect.y);\n    ctx.lineTo(line.rect.x + line.rect.width, line.rect.y);\n\n    if (/double/.test(line.style)) {\n      ctx.moveTo(line.rect.x, line.rect.y + line.rect.height * 2);\n      ctx.lineTo(line.rect.x + line.rect.width, line.rect.y + line.rect.height * 2);\n    }\n  }\n\n  ctx.stroke(line.color);\n  ctx.restore();\n};\n\nvar renderLine = function renderLine(ctx, line, options) {\n  var lineAscent = ascent(line);\n\n  if (options.outlineLines) {\n    ctx.rect(line.box.x, line.box.y, line.box.width, line.box.height).stroke();\n  }\n\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y + lineAscent);\n\n  for (var i = 0; i < line.runs.length; i += 1) {\n    var run = line.runs[i];\n    var isLastRun = i === line.runs.length - 1;\n\n    if (run.attributes.backgroundColor) {\n      var overflowRight = isLastRun ? line.overflowRight : 0;\n      var backgroundRect = {\n        x: 0,\n        y: -lineAscent,\n        height: line.box.height,\n        width: advanceWidth(run) - overflowRight\n      };\n      renderBackground$1(ctx, backgroundRect, run.attributes.backgroundColor);\n    }\n\n    renderRun(ctx, run, options);\n  }\n\n  ctx.restore();\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y);\n\n  for (var _i = 0; _i < line.decorationLines.length; _i += 1) {\n    var decorationLine = line.decorationLines[_i];\n    renderDecorationLine(ctx, decorationLine);\n  }\n\n  ctx.restore();\n};\n\nvar renderBlock = function renderBlock(ctx, block, options) {\n  block.forEach(function (line) {\n    renderLine(ctx, line, options);\n  });\n};\n\nvar renderText = function renderText(ctx, node) {\n  var _node$box2, _node$box3;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var blocks = [node.lines];\n  var paddingTop = ((_node$box2 = node.box) === null || _node$box2 === void 0 ? void 0 : _node$box2.paddingTop) || 0;\n  var paddingLeft = ((_node$box3 = node.box) === null || _node$box3 === void 0 ? void 0 : _node$box3.paddingLeft) || 0;\n  var initialY = node.lines[0] ? node.lines[0].box.y : 0;\n  var offsetX = node.alignOffset || 0;\n  ctx.save();\n  ctx.translate(left + paddingLeft - offsetX, top + paddingTop - initialY);\n  blocks.forEach(function (block) {\n    renderBlock(ctx, block, {});\n  });\n  ctx.restore();\n};\n\nvar renderPage = function renderPage(ctx, node) {\n  var _node$props;\n\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height;\n  var dpi = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.dpi) || 72;\n  var userUnit = dpi / 72;\n  ctx.addPage({\n    size: [width, height],\n    margin: 0,\n    userUnit: userUnit\n  });\n};\n\nvar renderNote = function renderNote(ctx, node) {\n  var _node$children, _node$style, _node$style2;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var value = (node === null || node === void 0 ? void 0 : (_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children[0].value) || '';\n  var color = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.backgroundColor) || null;\n  var borderWidth = ((_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.borderWidth) || null;\n  ctx.note(left, top, 0, 0, value, {\n    color: color,\n    borderWidth: borderWidth\n  });\n};\n\nvar isNumeric = function isNumeric(n) {\n  return !Number.isNaN(parseFloat(n)) && Number.isFinite(n);\n};\n\nvar applyContainObjectFit = function applyContainObjectFit(cw, ch, iw, ih, px, py) {\n  var cr = cw / ch;\n  var ir = iw / ih;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n\n  if (cr > ir) {\n    var _height = ch;\n\n    var _width = _height * ir;\n\n    var _yOffset = isNumeric(py) ? py : 0;\n\n    var _xOffset = isNumeric(px) ? px : (cw - _width) * pxv;\n\n    return {\n      width: _width,\n      height: _height,\n      xOffset: _xOffset,\n      yOffset: _yOffset\n    };\n  }\n\n  var width = cw;\n  var height = width / ir;\n  var xOffset = isNumeric(px) ? px : 0;\n  var yOffset = isNumeric(py) ? py : (ch - height) * pyv;\n  return {\n    width: width,\n    height: height,\n    yOffset: yOffset,\n    xOffset: xOffset\n  };\n};\n\nvar applyNoneObjectFit = function applyNoneObjectFit(cw, ch, iw, ih, px, py) {\n  var width = iw;\n  var height = ih;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n  var xOffset = isNumeric(px) ? px : (cw - width) * pxv;\n  var yOffset = isNumeric(py) ? py : (ch - height) * pyv;\n  return {\n    width: width,\n    height: height,\n    xOffset: xOffset,\n    yOffset: yOffset\n  };\n};\n\nvar applyCoverObjectFit = function applyCoverObjectFit(cw, ch, iw, ih, px, py) {\n  var ir = iw / ih;\n  var cr = cw / ch;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n\n  if (cr > ir) {\n    var _width2 = cw;\n\n    var _height2 = _width2 / ir;\n\n    var _xOffset2 = isNumeric(px) ? px : 0;\n\n    var _yOffset2 = isNumeric(py) ? py : (ch - _height2) * pyv;\n\n    return {\n      width: _width2,\n      height: _height2,\n      yOffset: _yOffset2,\n      xOffset: _xOffset2\n    };\n  }\n\n  var height = ch;\n  var width = height * ir;\n  var xOffset = isNumeric(px) ? px : (cw - width) * pxv;\n  var yOffset = isNumeric(py) ? py : 0;\n  return {\n    width: width,\n    height: height,\n    xOffset: xOffset,\n    yOffset: yOffset\n  };\n};\n\nvar applyScaleDownObjectFit = function applyScaleDownObjectFit(cw, ch, iw, ih, px, py) {\n  var containDimension = applyContainObjectFit(cw, ch, iw, ih, px, py);\n  var noneDimension = applyNoneObjectFit(cw, ch, iw, ih, px, py);\n  return containDimension.width < noneDimension.width ? containDimension : noneDimension;\n};\n\nvar applyFillObjectFit = function applyFillObjectFit(cw, ch, px, py) {\n  return {\n    width: cw,\n    height: ch,\n    xOffset: matchPercent(px) ? 0 : px || 0,\n    yOffset: matchPercent(py) ? 0 : py || 0\n  };\n};\n\nvar resolveObjectFit = function resolveObjectFit(type, cw, ch, iw, ih, px, py) {\n  if (type === void 0) {\n    type = 'fill';\n  }\n\n  switch (type) {\n    case 'contain':\n      return applyContainObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'cover':\n      return applyCoverObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'none':\n      return applyNoneObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'scale-down':\n      return applyScaleDownObjectFit(cw, ch, iw, ih, px, py);\n\n    default:\n      return applyFillObjectFit(cw, ch, px, py);\n  }\n};\n\nvar drawImage = function drawImage(ctx, node, options) {\n  var _node$style, _node$style2, _node$style3, _node$style4;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top;\n  var opacity = (_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.opacity;\n  var objectFit = (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.objectFit;\n  var objectPositionX = (_node$style3 = node.style) === null || _node$style3 === void 0 ? void 0 : _node$style3.objectPositionX;\n  var objectPositionY = (_node$style4 = node.style) === null || _node$style4 === void 0 ? void 0 : _node$style4.objectPositionY;\n  var paddingTop = node.box.paddingTop || 0;\n  var paddingRight = node.box.paddingRight || 0;\n  var paddingBottom = node.box.paddingBottom || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var imageCache = options.imageCache || new Map();\n\n  var _resolveObjectFit = resolveObjectFit(objectFit, node.box.width - paddingLeft - paddingRight, node.box.height - paddingTop - paddingBottom, node.image.width, node.image.height, objectPositionX, objectPositionY),\n      width = _resolveObjectFit.width,\n      height = _resolveObjectFit.height,\n      xOffset = _resolveObjectFit.xOffset,\n      yOffset = _resolveObjectFit.yOffset;\n\n  if (node.image.data) {\n    if (width !== 0 && height !== 0) {\n      var cacheKey = node.image.key;\n      var image = imageCache.get(cacheKey) || ctx.embedImage(node.image.data);\n      if (cacheKey) imageCache.set(cacheKey, image);\n      var imageOpacity = isNil(opacity) ? 1 : opacity;\n      ctx.fillOpacity(imageOpacity).image(image, left + paddingLeft + xOffset, top + paddingTop + yOffset, {\n        width: width,\n        height: height\n      });\n    } else {\n      console.warn(\"Image with src '\" + JSON.stringify(node.props.src) + \"' skipped due to invalid dimensions\");\n    }\n  }\n};\n\nvar renderImage = function renderImage(ctx, node, options) {\n  ctx.save();\n  clipNode(ctx, node);\n  drawImage(ctx, node, options);\n  ctx.restore();\n};\n\nvar CONTENT_COLOR = '#a1c6e7';\nvar PADDING_COLOR = '#c4deb9';\nvar MARGIN_COLOR = '#f8cca1'; // TODO: Draw debug boxes using clipping to enhance quality\n\nvar debugContent = function debugContent(ctx, node) {\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top,\n      width = _node$box.width,\n      height = _node$box.height,\n      _node$box$paddingLeft = _node$box.paddingLeft,\n      paddingLeft = _node$box$paddingLeft === void 0 ? 0 : _node$box$paddingLeft,\n      _node$box$paddingTop = _node$box.paddingTop,\n      paddingTop = _node$box$paddingTop === void 0 ? 0 : _node$box$paddingTop,\n      _node$box$paddingRigh = _node$box.paddingRight,\n      paddingRight = _node$box$paddingRigh === void 0 ? 0 : _node$box$paddingRigh,\n      _node$box$paddingBott = _node$box.paddingBottom,\n      paddingBottom = _node$box$paddingBott === void 0 ? 0 : _node$box$paddingBott,\n      _node$box$borderLeftW = _node$box.borderLeftWidth,\n      borderLeftWidth = _node$box$borderLeftW === void 0 ? 0 : _node$box$borderLeftW,\n      _node$box$borderTopWi = _node$box.borderTopWidth,\n      borderTopWidth = _node$box$borderTopWi === void 0 ? 0 : _node$box$borderTopWi,\n      _node$box$borderRight = _node$box.borderRightWidth,\n      borderRightWidth = _node$box$borderRight === void 0 ? 0 : _node$box$borderRight,\n      _node$box$borderBotto = _node$box.borderBottomWidth,\n      borderBottomWidth = _node$box$borderBotto === void 0 ? 0 : _node$box$borderBotto;\n  ctx.fillColor(CONTENT_COLOR).opacity(0.5).rect(left + paddingLeft + borderLeftWidth, top + paddingTop + borderTopWidth, width - paddingLeft - paddingRight - borderRightWidth - borderLeftWidth, height - paddingTop - paddingBottom - borderTopWidth - borderBottomWidth).fill();\n};\n\nvar debugPadding = function debugPadding(ctx, node) {\n  var _node$box2 = node.box,\n      left = _node$box2.left,\n      top = _node$box2.top,\n      width = _node$box2.width,\n      height = _node$box2.height,\n      _node$box2$paddingLef = _node$box2.paddingLeft,\n      paddingLeft = _node$box2$paddingLef === void 0 ? 0 : _node$box2$paddingLef,\n      _node$box2$paddingTop = _node$box2.paddingTop,\n      paddingTop = _node$box2$paddingTop === void 0 ? 0 : _node$box2$paddingTop,\n      _node$box2$paddingRig = _node$box2.paddingRight,\n      paddingRight = _node$box2$paddingRig === void 0 ? 0 : _node$box2$paddingRig,\n      _node$box2$paddingBot = _node$box2.paddingBottom,\n      paddingBottom = _node$box2$paddingBot === void 0 ? 0 : _node$box2$paddingBot,\n      _node$box2$borderLeft = _node$box2.borderLeftWidth,\n      borderLeftWidth = _node$box2$borderLeft === void 0 ? 0 : _node$box2$borderLeft,\n      _node$box2$borderTopW = _node$box2.borderTopWidth,\n      borderTopWidth = _node$box2$borderTopW === void 0 ? 0 : _node$box2$borderTopW,\n      _node$box2$borderRigh = _node$box2.borderRightWidth,\n      borderRightWidth = _node$box2$borderRigh === void 0 ? 0 : _node$box2$borderRigh,\n      _node$box2$borderBott = _node$box2.borderBottomWidth,\n      borderBottomWidth = _node$box2$borderBott === void 0 ? 0 : _node$box2$borderBott;\n  ctx.fillColor(PADDING_COLOR).opacity(0.5); // Padding top\n\n  ctx.rect(left + paddingLeft + borderLeftWidth, top + borderTopWidth, width - paddingRight - paddingLeft - borderLeftWidth - borderRightWidth, paddingTop).fill(); // Padding left\n\n  ctx.rect(left + borderLeftWidth, top + borderTopWidth, paddingLeft, height - borderTopWidth - borderBottomWidth).fill(); // Padding right\n\n  ctx.rect(left + width - paddingRight - borderRightWidth, top + borderTopWidth, paddingRight, height - borderTopWidth - borderBottomWidth).fill(); // Padding bottom\n\n  ctx.rect(left + paddingLeft + borderLeftWidth, top + height - paddingBottom - borderBottomWidth, width - paddingRight - paddingLeft - borderLeftWidth - borderRightWidth, paddingBottom).fill();\n};\n\nvar getMargin = function getMargin(box) {\n  var marginLeft = box.marginLeft === 'auto' ? 0 : box.marginLeft;\n  var marginTop = box.marginTop === 'auto' ? 0 : box.marginTop;\n  var marginRight = box.marginRight === 'auto' ? 0 : box.marginRight;\n  var marginBottom = box.marginBottom === 'auto' ? 0 : box.marginBottom;\n  return {\n    marginLeft: marginLeft,\n    marginTop: marginTop,\n    marginRight: marginRight,\n    marginBottom: marginBottom\n  };\n};\n\nvar debugMargin = function debugMargin(ctx, node) {\n  var _node$box3 = node.box,\n      left = _node$box3.left,\n      top = _node$box3.top,\n      width = _node$box3.width,\n      height = _node$box3.height;\n\n  var _getMargin = getMargin(node.box),\n      _getMargin$marginLeft = _getMargin.marginLeft,\n      marginLeft = _getMargin$marginLeft === void 0 ? 0 : _getMargin$marginLeft,\n      _getMargin$marginTop = _getMargin.marginTop,\n      marginTop = _getMargin$marginTop === void 0 ? 0 : _getMargin$marginTop,\n      _getMargin$marginRigh = _getMargin.marginRight,\n      marginRight = _getMargin$marginRigh === void 0 ? 0 : _getMargin$marginRigh,\n      _getMargin$marginBott = _getMargin.marginBottom,\n      marginBottom = _getMargin$marginBott === void 0 ? 0 : _getMargin$marginBott;\n\n  ctx.fillColor(MARGIN_COLOR).opacity(0.5); // Margin top\n\n  ctx.rect(left, top - marginTop, width, marginTop).fill(); // Margin left\n\n  ctx.rect(left - marginLeft, top - marginTop, marginLeft, height + marginTop + marginBottom).fill(); // Margin right\n\n  ctx.rect(left + width, top - marginTop, marginRight, height + marginTop + marginBottom).fill(); // Margin bottom\n\n  ctx.rect(left, top + height, width, marginBottom).fill();\n};\n\nvar debugText = function debugText(ctx, node) {\n  var _node$box4 = node.box,\n      left = _node$box4.left,\n      top = _node$box4.top,\n      width = _node$box4.width,\n      height = _node$box4.height;\n\n  var _getMargin2 = getMargin(node.box),\n      _getMargin2$marginLef = _getMargin2.marginLeft,\n      marginLeft = _getMargin2$marginLef === void 0 ? 0 : _getMargin2$marginLef,\n      _getMargin2$marginTop = _getMargin2.marginTop,\n      marginTop = _getMargin2$marginTop === void 0 ? 0 : _getMargin2$marginTop,\n      _getMargin2$marginRig = _getMargin2.marginRight,\n      marginRight = _getMargin2$marginRig === void 0 ? 0 : _getMargin2$marginRig,\n      _getMargin2$marginBot = _getMargin2.marginBottom,\n      marginBottom = _getMargin2$marginBot === void 0 ? 0 : _getMargin2$marginBot;\n\n  var roundedWidth = Math.round(width + marginLeft + marginRight);\n  var roundedHeight = Math.round(height + marginTop + marginBottom);\n  ctx.fontSize(6).opacity(1).fillColor('black').text(roundedWidth + \" x \" + roundedHeight, left - marginLeft, Math.max(top - marginTop - 4, 1));\n};\n\nvar debugOrigin = function debugOrigin(ctx, node) {\n  if (node.origin) {\n    ctx.circle(node.origin.left, node.origin.top, 3).fill('red').circle(node.origin.left, node.origin.top, 5).stroke('red');\n  }\n};\n\nvar renderDebug = function renderDebug(ctx, node) {\n  var _node$props;\n\n  if (!((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.debug)) return;\n  ctx.save();\n  debugContent(ctx, node);\n  debugPadding(ctx, node);\n  debugMargin(ctx, node);\n  debugText(ctx, node);\n  debugOrigin(ctx, node);\n  ctx.restore();\n};\n\nvar availableMethods = ['dash', 'clip', 'save', 'path', 'fill', 'font', 'text', 'rect', 'scale', 'moveTo', 'lineTo', 'stroke', 'rotate', 'circle', 'lineCap', 'opacity', 'ellipse', 'polygon', 'restore', 'lineJoin', 'fontSize', 'fillColor', 'lineWidth', 'translate', 'miterLimit', 'strokeColor', 'fillOpacity', 'roundedRect', 'fillAndStroke', 'strokeOpacity', 'bezierCurveTo', 'quadraticCurveTo', 'linearGradient', 'radialGradient'];\n\nvar painter = function painter(ctx) {\n  var p = availableMethods.reduce(function (acc, prop) {\n    var _extends2;\n\n    return _extends({}, acc, (_extends2 = {}, _extends2[prop] = function () {\n      ctx[prop].apply(ctx, arguments);\n      return p;\n    }, _extends2));\n  }, {});\n  return p;\n};\n\nvar renderCanvas = function renderCanvas(ctx, node) {\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var paddingTop = node.box.paddingTop || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var paddingRight = node.box.paddingRight || 0;\n  var paddingBottom = node.box.paddingBottom || 0;\n  var availableWidth = width - paddingLeft - paddingRight;\n  var availableHeight = height - paddingTop - paddingBottom;\n\n  if (!availableWidth || !availableHeight) {\n    console.warn('Canvas element has null width or height. Please provide valid values via the `style` prop in order to correctly render it.');\n  }\n\n  ctx.save().translate(left + paddingLeft, top + paddingTop);\n\n  if (node.props.paint) {\n    node.props.paint(painter(ctx), availableWidth, availableHeight);\n  }\n\n  ctx.restore();\n}; // Ref: https://www.w3.org/TR/css-backgrounds-3/#borders\n// This constant is used to approximate a symmetrical arc using a cubic Bezier curve.\n\n\nvar KAPPA = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar clipBorderTop = function clipBorderTop(ctx, layout, style, rtr, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth; // Clip outer top border edge\n\n  ctx.moveTo(left + rtl, top);\n  ctx.lineTo(left + width - rtr, top); // Ellipse coefficients outer top right cap\n\n  var c0 = rtr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width - c0, top, left + width, top + c0, left + width, top + rtr); // Move down in case the margin exceedes the radius\n\n  var topRightYCoord = top + Math.max(borderTopWidth, rtr);\n  ctx.lineTo(left + width, topRightYCoord); // Clip inner top right cap\n\n  ctx.lineTo(left + width - borderRightWidth, topRightYCoord); // Ellipse coefficients inner top right cap\n\n  var innerTopRightRadiusX = Math.max(rtr - borderRightWidth, 0);\n  var innerTopRightRadiusY = Math.max(rtr - borderTopWidth, 0);\n  var c1 = innerTopRightRadiusX * (1.0 - KAPPA);\n  var c2 = innerTopRightRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth, top + borderTopWidth + c2, left + width - borderRightWidth - c1, top + borderTopWidth, left + width - borderRightWidth - innerTopRightRadiusX, top + borderTopWidth); // Clip inner top border edge\n\n  ctx.lineTo(left + Math.max(rtl, borderLeftWidth), top + borderTopWidth); // Ellipse coefficients inner top left cap\n\n  var innerTopLeftRadiusX = Math.max(rtl - borderLeftWidth, 0);\n  var innerTopLeftRadiusY = Math.max(rtl - borderTopWidth, 0);\n  var c3 = innerTopLeftRadiusX * (1.0 - KAPPA);\n  var c4 = innerTopLeftRadiusY * (1.0 - KAPPA);\n  var topLeftYCoord = top + Math.max(borderTopWidth, rtl); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth + c3, top + borderTopWidth, left + borderLeftWidth, top + borderTopWidth + c4, left + borderLeftWidth, topLeftYCoord);\n  ctx.lineTo(left, topLeftYCoord); // Move down in case the margin exceedes the radius\n\n  ctx.lineTo(left, top + rtl); // Ellipse coefficients outer top left cap\n\n  var c5 = rtl * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left, top + c5, left + c5, top, left + rtl, top);\n  ctx.closePath();\n  ctx.clip(); // Clip border top cap joins\n\n  if (borderRightWidth) {\n    var trSlope = -borderTopWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, trSlope * (-width / 2) + top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderLeftWidth) {\n    var _trSlope = -borderTopWidth / borderLeftWidth;\n\n    ctx.moveTo(left + width / 2, _trSlope * (-width / 2) + top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left + width, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderTop = function fillBorderTop(ctx, layout, style, rtr, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width;\n  var borderTopColor = style.borderTopColor,\n      borderTopWidth = style.borderTopWidth,\n      borderTopStyle = style.borderTopStyle,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth;\n  var c0 = rtl * (1.0 - KAPPA);\n  var c1 = rtr * (1.0 - KAPPA);\n  ctx.moveTo(left, top + Math.max(rtl, borderTopWidth));\n  ctx.bezierCurveTo(left, top + c0, left + c0, top, left + rtl, top);\n  ctx.lineTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - c1, top, left + width, top + c1, left + width, top + rtr);\n  ctx.strokeColor(borderTopColor);\n  ctx.lineWidth(Math.max(borderRightWidth, borderTopWidth, borderLeftWidth) * 2);\n\n  if (borderTopStyle === 'dashed') {\n    ctx.dash(borderTopWidth * 2, {\n      space: borderTopWidth * 1.2\n    });\n  } else if (borderTopStyle === 'dotted') {\n    ctx.dash(borderTopWidth, {\n      space: borderTopWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderRight = function clipBorderRight(ctx, layout, style, rtr, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderBottomWidth = style.borderBottomWidth; // Clip outer right border edge\n\n  ctx.moveTo(left + width, top + rtr);\n  ctx.lineTo(left + width, top + height - rbr); // Ellipse coefficients outer bottom right cap\n\n  var c0 = rbr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width, top + height - c0, left + width - c0, top + height, left + width - rbr, top + height); // Move left in case the margin exceedes the radius\n\n  var topBottomXCoord = left + width - Math.max(borderRightWidth, rbr);\n  ctx.lineTo(topBottomXCoord, top + height); // Clip inner bottom right cap\n\n  ctx.lineTo(topBottomXCoord, top + height - borderBottomWidth); // Ellipse coefficients inner bottom right cap\n\n  var innerBottomRightRadiusX = Math.max(rbr - borderRightWidth, 0);\n  var innerBottomRightRadiusY = Math.max(rbr - borderBottomWidth, 0);\n  var c1 = innerBottomRightRadiusX * (1.0 - KAPPA);\n  var c2 = innerBottomRightRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth - c1, top + height - borderBottomWidth, left + width - borderRightWidth, top + height - borderBottomWidth - c2, left + width - borderRightWidth, top + height - Math.max(rbr, borderBottomWidth)); // Clip inner right border edge\n\n  ctx.lineTo(left + width - borderRightWidth, top + Math.max(rtr, borderTopWidth)); // Ellipse coefficients inner top right cap\n\n  var innerTopRightRadiusX = Math.max(rtr - borderRightWidth, 0);\n  var innerTopRightRadiusY = Math.max(rtr - borderTopWidth, 0);\n  var c3 = innerTopRightRadiusX * (1.0 - KAPPA);\n  var c4 = innerTopRightRadiusY * (1.0 - KAPPA);\n  var topRightXCoord = left + width - Math.max(rtr, borderRightWidth); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth, top + borderTopWidth + c4, left + width - borderRightWidth - c3, top + borderTopWidth, topRightXCoord, top + borderTopWidth);\n  ctx.lineTo(topRightXCoord, top); // Move right in case the margin exceedes the radius\n\n  ctx.lineTo(left + width - rtr, top); // Ellipse coefficients outer top right cap\n\n  var c5 = rtr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width - c5, top, left + width, top + c5, left + width, top + rtr);\n  ctx.closePath();\n  ctx.clip(); // Clip border right cap joins\n\n  if (borderTopWidth) {\n    var trSlope = -borderTopWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, trSlope * (-width / 2) + top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderBottomWidth) {\n    var brSlope = borderBottomWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, brSlope * (-width / 2) + top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderRight = function fillBorderRight(ctx, layout, style, rtr, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderRightColor = style.borderRightColor,\n      borderRightStyle = style.borderRightStyle,\n      borderRightWidth = style.borderRightWidth,\n      borderTopWidth = style.borderTopWidth,\n      borderBottomWidth = style.borderBottomWidth;\n  var c0 = rbr * (1.0 - KAPPA);\n  var c1 = rtr * (1.0 - KAPPA);\n  ctx.moveTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - c1, top, left + width, top + c1, left + width, top + rtr);\n  ctx.lineTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - c0, left + width - c0, top + height, left + width - rbr, top + height);\n  ctx.strokeColor(borderRightColor);\n  ctx.lineWidth(Math.max(borderRightWidth, borderTopWidth, borderBottomWidth) * 2);\n\n  if (borderRightStyle === 'dashed') {\n    ctx.dash(borderRightWidth * 2, {\n      space: borderRightWidth * 1.2\n    });\n  } else if (borderRightStyle === 'dotted') {\n    ctx.dash(borderRightWidth, {\n      space: borderRightWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderBottom = function clipBorderBottom(ctx, layout, style, rbl, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderBottomWidth = style.borderBottomWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth; // Clip outer top border edge\n\n  ctx.moveTo(left + width - rbr, top + height);\n  ctx.lineTo(left + rbl, top + height); // Ellipse coefficients outer top right cap\n\n  var c0 = rbl * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl); // Move up in case the margin exceedes the radius\n\n  var bottomLeftYCoord = top + height - Math.max(borderBottomWidth, rbl);\n  ctx.lineTo(left, bottomLeftYCoord); // Clip inner bottom left cap\n\n  ctx.lineTo(left + borderLeftWidth, bottomLeftYCoord); // Ellipse coefficients inner top right cap\n\n  var innerBottomLeftRadiusX = Math.max(rbl - borderLeftWidth, 0);\n  var innerBottomLeftRadiusY = Math.max(rbl - borderBottomWidth, 0);\n  var c1 = innerBottomLeftRadiusX * (1.0 - KAPPA);\n  var c2 = innerBottomLeftRadiusY * (1.0 - KAPPA); // Clip inner bottom left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth, top + height - borderBottomWidth - c2, left + borderLeftWidth + c1, top + height - borderBottomWidth, left + borderLeftWidth + innerBottomLeftRadiusX, top + height - borderBottomWidth); // Clip inner bottom border edge\n\n  ctx.lineTo(left + width - Math.max(rbr, borderRightWidth), top + height - borderBottomWidth); // Ellipse coefficients inner top left cap\n\n  var innerBottomRightRadiusX = Math.max(rbr - borderRightWidth, 0);\n  var innerBottomRightRadiusY = Math.max(rbr - borderBottomWidth, 0);\n  var c3 = innerBottomRightRadiusX * (1.0 - KAPPA);\n  var c4 = innerBottomRightRadiusY * (1.0 - KAPPA);\n  var bottomRightYCoord = top + height - Math.max(borderBottomWidth, rbr); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth - c3, top + height - borderBottomWidth, left + width - borderRightWidth, top + height - borderBottomWidth - c4, left + width - borderRightWidth, bottomRightYCoord);\n  ctx.lineTo(left + width, bottomRightYCoord); // Move down in case the margin exceedes the radius\n\n  ctx.lineTo(left + width, top + height - rbr); // Ellipse coefficients outer top left cap\n\n  var c5 = rbr * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left + width, top + height - c5, left + width - c5, top + height, left + width - rbr, top + height);\n  ctx.closePath();\n  ctx.clip(); // Clip border bottom cap joins\n\n  if (borderRightWidth) {\n    var brSlope = borderBottomWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, brSlope * (-width / 2) + top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderLeftWidth) {\n    var trSlope = -borderBottomWidth / borderLeftWidth;\n    ctx.moveTo(left + width / 2, trSlope * (width / 2) + top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left + width, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderBottom = function fillBorderBottom(ctx, layout, style, rbl, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderBottomColor = style.borderBottomColor,\n      borderBottomStyle = style.borderBottomStyle,\n      borderBottomWidth = style.borderBottomWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth;\n  var c0 = rbl * (1.0 - KAPPA);\n  var c1 = rbr * (1.0 - KAPPA);\n  ctx.moveTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - c1, left + width - c1, top + height, left + width - rbr, top + height);\n  ctx.lineTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl);\n  ctx.strokeColor(borderBottomColor);\n  ctx.lineWidth(Math.max(borderBottomWidth, borderRightWidth, borderLeftWidth) * 2);\n\n  if (borderBottomStyle === 'dashed') {\n    ctx.dash(borderBottomWidth * 2, {\n      space: borderBottomWidth * 1.2\n    });\n  } else if (borderBottomStyle === 'dotted') {\n    ctx.dash(borderBottomWidth, {\n      space: borderBottomWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderLeft = function clipBorderLeft(ctx, layout, style, rbl, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderLeftWidth = style.borderLeftWidth,\n      borderBottomWidth = style.borderBottomWidth; // Clip outer left border edge\n\n  ctx.moveTo(left, top + height - rbl);\n  ctx.lineTo(left, top + rtl); // Ellipse coefficients outer top left cap\n\n  var c0 = rtl * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left, top + c0, left + c0, top, left + rtl, top); // Move right in case the margin exceedes the radius\n\n  var topLeftCoordX = left + Math.max(borderLeftWidth, rtl);\n  ctx.lineTo(topLeftCoordX, top); // Clip inner top left cap\n\n  ctx.lineTo(topLeftCoordX, top + borderTopWidth); // Ellipse coefficients inner top left cap\n\n  var innerTopLeftRadiusX = Math.max(rtl - borderLeftWidth, 0);\n  var innerTopLeftRadiusY = Math.max(rtl - borderTopWidth, 0);\n  var c1 = innerTopLeftRadiusX * (1.0 - KAPPA);\n  var c2 = innerTopLeftRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth + c1, top + borderTopWidth, left + borderLeftWidth, top + borderTopWidth + c2, left + borderLeftWidth, top + Math.max(rtl, borderTopWidth)); // Clip inner left border edge\n\n  ctx.lineTo(left + borderLeftWidth, top + height - Math.max(rbl, borderBottomWidth)); // Ellipse coefficients inner bottom left cap\n\n  var innerBottomLeftRadiusX = Math.max(rbl - borderLeftWidth, 0);\n  var innerBottomLeftRadiusY = Math.max(rbl - borderBottomWidth, 0);\n  var c3 = innerBottomLeftRadiusX * (1.0 - KAPPA);\n  var c4 = innerBottomLeftRadiusY * (1.0 - KAPPA);\n  var bottomLeftXCoord = left + Math.max(rbl, borderLeftWidth); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth, top + height - borderBottomWidth - c4, left + borderLeftWidth + c3, top + height - borderBottomWidth, bottomLeftXCoord, top + height - borderBottomWidth);\n  ctx.lineTo(bottomLeftXCoord, top + height); // Move left in case the margin exceedes the radius\n\n  ctx.lineTo(left + rbl, top + height); // Ellipse coefficients outer top right cap\n\n  var c5 = rbl * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + c5, top + height, left, top + height - c5, left, top + height - rbl);\n  ctx.closePath();\n  ctx.clip(); // Clip border right cap joins\n\n  if (borderBottomWidth) {\n    var trSlope = -borderBottomWidth / borderLeftWidth;\n    ctx.moveTo(left + width / 2, trSlope * (width / 2) + top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left + width, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderBottomWidth) {\n    var _trSlope2 = -borderTopWidth / borderLeftWidth;\n\n    ctx.moveTo(left + width / 2, _trSlope2 * (-width / 2) + top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderLeft = function fillBorderLeft(ctx, layout, style, rbl, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      height = layout.height;\n  var borderLeftColor = style.borderLeftColor,\n      borderLeftStyle = style.borderLeftStyle,\n      borderLeftWidth = style.borderLeftWidth,\n      borderTopWidth = style.borderTopWidth,\n      borderBottomWidth = style.borderBottomWidth;\n  var c0 = rbl * (1.0 - KAPPA);\n  var c1 = rtl * (1.0 - KAPPA);\n  ctx.moveTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl);\n  ctx.lineTo(left, top + rtl);\n  ctx.bezierCurveTo(left, top + c1, left + c1, top, left + rtl, top);\n  ctx.strokeColor(borderLeftColor);\n  ctx.lineWidth(Math.max(borderLeftWidth, borderTopWidth, borderBottomWidth) * 2);\n\n  if (borderLeftStyle === 'dashed') {\n    ctx.dash(borderLeftWidth * 2, {\n      space: borderLeftWidth * 1.2\n    });\n  } else if (borderLeftStyle === 'dotted') {\n    ctx.dash(borderLeftWidth, {\n      space: borderLeftWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar shouldRenderBorders = function shouldRenderBorders(node) {\n  return node.box && (node.box.borderTopWidth || node.box.borderRightWidth || node.box.borderBottomWidth || node.box.borderLeftWidth);\n};\n\nvar renderBorders = function renderBorders(ctx, node) {\n  if (!shouldRenderBorders(node)) return;\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height,\n      borderTopWidth = _node$box.borderTopWidth,\n      borderLeftWidth = _node$box.borderLeftWidth,\n      borderRightWidth = _node$box.borderRightWidth,\n      borderBottomWidth = _node$box.borderBottomWidth;\n  var _node$style = node.style,\n      opacity = _node$style.opacity,\n      _node$style$borderTop = _node$style.borderTopLeftRadius,\n      borderTopLeftRadius = _node$style$borderTop === void 0 ? 0 : _node$style$borderTop,\n      _node$style$borderTop2 = _node$style.borderTopRightRadius,\n      borderTopRightRadius = _node$style$borderTop2 === void 0 ? 0 : _node$style$borderTop2,\n      _node$style$borderBot = _node$style.borderBottomLeftRadius,\n      borderBottomLeftRadius = _node$style$borderBot === void 0 ? 0 : _node$style$borderBot,\n      _node$style$borderBot2 = _node$style.borderBottomRightRadius,\n      borderBottomRightRadius = _node$style$borderBot2 === void 0 ? 0 : _node$style$borderBot2,\n      _node$style$borderTop3 = _node$style.borderTopColor,\n      borderTopColor = _node$style$borderTop3 === void 0 ? 'black' : _node$style$borderTop3,\n      _node$style$borderTop4 = _node$style.borderTopStyle,\n      borderTopStyle = _node$style$borderTop4 === void 0 ? 'solid' : _node$style$borderTop4,\n      _node$style$borderLef = _node$style.borderLeftColor,\n      borderLeftColor = _node$style$borderLef === void 0 ? 'black' : _node$style$borderLef,\n      _node$style$borderLef2 = _node$style.borderLeftStyle,\n      borderLeftStyle = _node$style$borderLef2 === void 0 ? 'solid' : _node$style$borderLef2,\n      _node$style$borderRig = _node$style.borderRightColor,\n      borderRightColor = _node$style$borderRig === void 0 ? 'black' : _node$style$borderRig,\n      _node$style$borderRig2 = _node$style.borderRightStyle,\n      borderRightStyle = _node$style$borderRig2 === void 0 ? 'solid' : _node$style$borderRig2,\n      _node$style$borderBot3 = _node$style.borderBottomColor,\n      borderBottomColor = _node$style$borderBot3 === void 0 ? 'black' : _node$style$borderBot3,\n      _node$style$borderBot4 = _node$style.borderBottomStyle,\n      borderBottomStyle = _node$style$borderBot4 === void 0 ? 'solid' : _node$style$borderBot4;\n  var style = {\n    borderTopColor: borderTopColor,\n    borderTopWidth: borderTopWidth,\n    borderTopStyle: borderTopStyle,\n    borderLeftColor: borderLeftColor,\n    borderLeftWidth: borderLeftWidth,\n    borderLeftStyle: borderLeftStyle,\n    borderRightColor: borderRightColor,\n    borderRightWidth: borderRightWidth,\n    borderRightStyle: borderRightStyle,\n    borderBottomColor: borderBottomColor,\n    borderBottomWidth: borderBottomWidth,\n    borderBottomStyle: borderBottomStyle,\n    borderTopLeftRadius: borderTopLeftRadius,\n    borderTopRightRadius: borderTopRightRadius,\n    borderBottomLeftRadius: borderBottomLeftRadius,\n    borderBottomRightRadius: borderBottomRightRadius\n  };\n  var rtr = Math.min(borderTopRightRadius, 0.5 * width, 0.5 * height);\n  var rtl = Math.min(borderTopLeftRadius, 0.5 * width, 0.5 * height);\n  var rbr = Math.min(borderBottomRightRadius, 0.5 * width, 0.5 * height);\n  var rbl = Math.min(borderBottomLeftRadius, 0.5 * width, 0.5 * height);\n  ctx.save();\n  ctx.strokeOpacity(opacity);\n\n  if (borderTopWidth) {\n    ctx.save();\n    clipBorderTop(ctx, node.box, style, rtr, rtl);\n    fillBorderTop(ctx, node.box, style, rtr, rtl);\n    ctx.restore();\n  }\n\n  if (borderRightWidth) {\n    ctx.save();\n    clipBorderRight(ctx, node.box, style, rtr, rbr);\n    fillBorderRight(ctx, node.box, style, rtr, rbr);\n    ctx.restore();\n  }\n\n  if (borderBottomWidth) {\n    ctx.save();\n    clipBorderBottom(ctx, node.box, style, rbl, rbr);\n    fillBorderBottom(ctx, node.box, style, rbl, rbr);\n    ctx.restore();\n  }\n\n  if (borderLeftWidth) {\n    ctx.save();\n    clipBorderLeft(ctx, node.box, style, rbl, rtl);\n    fillBorderLeft(ctx, node.box, style, rbl, rtl);\n    ctx.restore();\n  }\n\n  ctx.restore();\n};\n\nvar drawBackground = function drawBackground(ctx, node) {\n  var _node$style;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var color = parseColor(node.style.backgroundColor);\n  var nodeOpacity = isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.opacity) ? 1 : node.style.opacity;\n  var opacity = Math.min(color.opacity, nodeOpacity);\n  ctx.fillOpacity(opacity).fillColor(color.value).rect(left, top, width, height).fill();\n};\n\nvar renderBackground = function renderBackground(ctx, node) {\n  var _node$style2;\n\n  var hasBackground = !!node.box && !!((_node$style2 = node.style) !== null && _node$style2 !== void 0 && _node$style2.backgroundColor);\n\n  if (hasBackground) {\n    ctx.save();\n    clipNode(ctx, node);\n    drawBackground(ctx, node);\n    ctx.restore();\n  }\n};\n\nvar isSrcId = function isSrcId(value) {\n  return /^#.+/.test(value);\n};\n\nvar setLink = function setLink(ctx, node) {\n  var props = node.props || {};\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var src = props.src || props.href;\n\n  if (src) {\n    var isId = isSrcId(src);\n    var method = isId ? 'goTo' : 'link';\n    var value = isId ? src.slice(1) : src;\n    ctx[method](left, top, width, height, value);\n  }\n};\n\nvar setDestination = function setDestination(ctx, node) {\n  var _node$props;\n\n  if ((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.id) {\n    ctx.addNamedDestination(node.props.id, 'XYZ', null, node.box.top, null);\n  }\n};\n\nvar _renderFns;\n\nvar isRecursiveNode = function isRecursiveNode(node) {\n  return node.type !== P.Text && node.type !== P.Svg;\n};\n\nvar renderChildren = function renderChildren(ctx, node, options) {\n  ctx.save();\n\n  if (node.box) {\n    ctx.translate(node.box.left, node.box.top);\n  }\n\n  var children = node.children || [];\n\n  var renderChild = function renderChild(child) {\n    return renderNode(ctx, child, options);\n  };\n\n  children.forEach(renderChild);\n  ctx.restore();\n};\n\nvar renderFns = (_renderFns = {}, _renderFns[P.Text] = renderText, _renderFns[P.Note] = renderNote, _renderFns[P.Image] = renderImage, _renderFns[P.Canvas] = renderCanvas, _renderFns[P.Svg] = renderSvg, _renderFns[P.Link] = setLink, _renderFns);\n\nvar renderNode = function renderNode(ctx, node, options) {\n  var _node$style;\n\n  var overflowHidden = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.overflow) === 'hidden';\n  var shouldRenderChildren = isRecursiveNode(node);\n  if (node.type === P.Page) renderPage(ctx, node);\n  ctx.save();\n  if (overflowHidden) clipNode(ctx, node);\n  applyTransformations(ctx, node);\n  renderBackground(ctx, node);\n  renderBorders(ctx, node);\n  var renderFn = renderFns[node.type];\n  if (renderFn) renderFn(ctx, node, options);\n  if (shouldRenderChildren) renderChildren(ctx, node, options);\n  setDestination(ctx, node);\n  renderDebug(ctx, node);\n  ctx.restore();\n};\n/* eslint-disable no-param-reassign */\n\n\nvar setPDFMetadata = function setPDFMetadata(target) {\n  return function (key, value) {\n    if (value) target.info[key] = value;\n  };\n};\n/**\n * Set document instance metadata\n *\n * @param {Object} ctx document instance\n * @param {Object} doc document root\n */\n\n\nvar addMetadata = function addMetadata(ctx, doc) {\n  var setProp = setPDFMetadata(ctx);\n  var props = doc.props || {};\n  var title = props.title || null;\n  var author = props.author || null;\n  var subject = props.subject || null;\n  var keywords = props.keywords || null;\n  var creator = props.creator || 'react-pdf';\n  var producer = props.producer || 'react-pdf';\n  setProp('Title', title);\n  setProp('Author', author);\n  setProp('Subject', subject);\n  setProp('Keywords', keywords);\n  setProp('Creator', creator);\n  setProp('Producer', producer);\n};\n/* eslint-disable no-param-reassign */\n\n\nvar addNodeBookmark = function addNodeBookmark(ctx, node, pageNumber, registry) {\n  var _node$props;\n\n  var bookmark = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.bookmark;\n\n  if (bookmark) {\n    var title = bookmark.title,\n        parent = bookmark.parent,\n        expanded = bookmark.expanded,\n        zoom = bookmark.zoom,\n        fit = bookmark.fit;\n    var outline = registry[parent] || ctx.outline;\n    var top = bookmark.top || node.box.top;\n    var left = bookmark.left || node.box.left;\n    var instance = outline.addItem(title, {\n      pageNumber: pageNumber,\n      expanded: expanded,\n      top: top,\n      left: left,\n      zoom: zoom,\n      fit: fit\n    });\n    registry[bookmark.ref] = instance;\n  }\n\n  if (!node.children) return;\n  node.children.forEach(function (child) {\n    return addNodeBookmark(ctx, child, pageNumber, registry);\n  });\n};\n\nvar addBookmarks = function addBookmarks(ctx, root) {\n  var registry = {};\n  var pages = root.children || [];\n  pages.forEach(function (page, i) {\n    addNodeBookmark(ctx, page, i, registry);\n  });\n};\n\nvar render = function render(ctx, doc) {\n  var pages = doc.children || [];\n  var options = {\n    imageCache: new Map()\n  };\n  addMetadata(ctx, doc);\n  pages.forEach(function (page) {\n    return renderNode(ctx, page, options);\n  });\n  addBookmarks(ctx, doc);\n  ctx.end();\n  return ctx;\n};\n\nexport { render as default };","map":{"version":3,"names":["P","isNil","matchPercent","advanceWidth","lineWidth","absPath","parsePath","normalizePath","runHeight","runDescent","ascent","colorString","_extends","renderPath","ctx","node","_node$props","d","props","path","KAPPA$3","Math","sqrt","renderRect","_node$props2","_node$props3","_node$props4","_node$props5","_node$props6","x","y","rx","ry","width","height","krx","kry","moveTo","lineTo","bezierCurveTo","closePath","renderLine$1","renderLine","_ref","x1","x2","y1","y2","renderGroup","KAPPA$2","drawEllipse","cx","cy","ox","oy","xe","ye","xm","ym","renderEllipse","renderCircle","r","renderGlyphs","glyphs","positions","options","scale","_fontSize","unitsPerEm","_font","font","advanceWidthScale","encodedGlyphs","encodeGlyphs","encodedPositions","map","pos","i","xAdvance","yAdvance","xOffset","yOffset","_glyphs","renderRun$1","renderRun","run","runAdvanceWidth","_run$attributes","attributes","fontSize","color","opacity","fillColor","fillOpacity","sbix","COLR","CPAL","save","translate","length","position","glyph","render","restore","name","error","console","log","renderSpan","line","textAnchor","dominantBaseline","_line$box","_line$box2","_line$runs$","_line$runs$2","_line$runs$2$attribut","box","runs","xHeight","descent","capHeight","xTranslate","yTranslate","forEach","renderSvgText","children","span","lines","pairs","values","result","push","parsePoints","points","trim","replace","split","slice","parseFloat","drawPolyline","p","renderPolyline","renderPolygon","renderImage$1","renderImage","image","data","_node$style","style","paddingTop","paddingLeft","warn","href","KAPPA$1","clipNode","_node$box","top","left","_node$style$borderTop","borderTopLeftRadius","_node$style$borderTop2","borderTopRightRadius","_node$style$borderBot","borderBottomRightRadius","_node$style$borderBot2","borderBottomLeftRadius","rtr","min","ctr","rbr","cbr","rbl","cbl","rtl","ctl","clip","applySingleTransformation","transform","origin","operation","value","scaleX","scaleY","angle","rotate","apply","applyTransformations","operations","_boundingBoxFns","getPathBoundingBox","bounds","Infinity","l","j","getCircleBoundingBox","getEllipseBoundingBox","_node$props7","_node$props8","getLineBoundingBox","_node$props9","_node$props10","_node$props11","_node$props12","max","getRectBoundingBox","_node$props13","_node$props14","_node$props15","_node$props16","concat","getPolylineBoundingBox","_node$props17","xValues","yValues","boundingBoxFns","Rect","Line","Path","Circle","Ellipse","Polygon","Polyline","getBoundingBox","boundingBoxFn","type","_renderFns$1","setStrokeWidth","strokeWidth","setStrokeColor","strokeColor","stroke","setOpacity","setFillOpacity","setStrokeOpacity","strokeOpacity","setLineJoin","lineJoin","strokeLinejoin","setLineCap","lineCap","strokeLinecap","setLineDash","strokeDasharray","dash","hasLinearGradientFill","_node$props9$fill","fill","LinearGradient","hasRadialGradientFill","_node$props10$fill","RadialGradient","setLinearGradientFill","bbox","gradient","m0","m3","m4","m5","gx1","gy1","gx2","gy2","grad","linearGradient","stop","offset","stopColor","stopOpacity","setRadialGradientFill","fx","fy","gr","gcx","gcy","gfx","gfy","radialGradient","setFillColor","setFill","draw","fillAndStroke","fillRule","noop","renderFns$1","Tspan","TextInstance","G","Text","Image","renderNode$1","renderNode","renderFn","drawNode","clipPath","child","drawChildren","resolveAspectRatio","viewBox","_node$props15$preserv","preserveAspectRatio","_preserveAspectRatio$","meetOrSlice","_preserveAspectRatio$2","align","minX","minY","logicalWidth","maxX","logicalHeight","maxY","logicalRatio","physicalRatio","moveToOrigin","_node$box2","renderSvg","parseColor","hex","parsed","get","to","DEST_REGEXP","isSrcId$1","isSrcId","src","match","renderAttachment","attachment","_attachment$xOffset","_attachment$yOffset","fit","valign","renderAttachments","space","glyphForCodePoint","objectReplacement","attachmentAdvance","id","link","outlineRuns","rect","goTo","renderBackground$1","renderBackground","backgroundColor","renderDecorationLine","test","dist","step","stepCount","floor","remainingWidth","adjustment","cp1y","cp2y","lineAscent","outlineLines","isLastRun","overflowRight","backgroundRect","_i","decorationLines","decorationLine","renderBlock","block","renderText","_node$box3","blocks","initialY","offsetX","alignOffset","renderPage","dpi","userUnit","addPage","size","margin","renderNote","_node$children","_node$style2","borderWidth","note","isNumeric","n","Number","isNaN","isFinite","applyContainObjectFit","cw","ch","iw","ih","px","py","cr","ir","pxp","pyp","pxv","percent","pyv","_height","_width","_yOffset","_xOffset","applyNoneObjectFit","applyCoverObjectFit","_width2","_height2","_xOffset2","_yOffset2","applyScaleDownObjectFit","containDimension","noneDimension","applyFillObjectFit","resolveObjectFit","drawImage","_node$style3","_node$style4","objectFit","objectPositionX","objectPositionY","paddingRight","paddingBottom","imageCache","Map","_resolveObjectFit","cacheKey","key","embedImage","set","imageOpacity","JSON","stringify","CONTENT_COLOR","PADDING_COLOR","MARGIN_COLOR","debugContent","_node$box$paddingLeft","_node$box$paddingTop","_node$box$paddingRigh","_node$box$paddingBott","_node$box$borderLeftW","borderLeftWidth","_node$box$borderTopWi","borderTopWidth","_node$box$borderRight","borderRightWidth","_node$box$borderBotto","borderBottomWidth","debugPadding","_node$box2$paddingLef","_node$box2$paddingTop","_node$box2$paddingRig","_node$box2$paddingBot","_node$box2$borderLeft","_node$box2$borderTopW","_node$box2$borderRigh","_node$box2$borderBott","getMargin","marginLeft","marginTop","marginRight","marginBottom","debugMargin","_getMargin","_getMargin$marginLeft","_getMargin$marginTop","_getMargin$marginRigh","_getMargin$marginBott","debugText","_node$box4","_getMargin2","_getMargin2$marginLef","_getMargin2$marginTop","_getMargin2$marginRig","_getMargin2$marginBot","roundedWidth","round","roundedHeight","text","debugOrigin","circle","renderDebug","debug","availableMethods","painter","reduce","acc","prop","_extends2","arguments","renderCanvas","availableWidth","availableHeight","paint","KAPPA","clipBorderTop","layout","c0","topRightYCoord","innerTopRightRadiusX","innerTopRightRadiusY","c1","c2","innerTopLeftRadiusX","innerTopLeftRadiusY","c3","c4","topLeftYCoord","c5","trSlope","_trSlope","fillBorderTop","borderTopColor","borderTopStyle","undash","clipBorderRight","topBottomXCoord","innerBottomRightRadiusX","innerBottomRightRadiusY","topRightXCoord","brSlope","fillBorderRight","borderRightColor","borderRightStyle","clipBorderBottom","bottomLeftYCoord","innerBottomLeftRadiusX","innerBottomLeftRadiusY","bottomRightYCoord","fillBorderBottom","borderBottomColor","borderBottomStyle","clipBorderLeft","topLeftCoordX","bottomLeftXCoord","_trSlope2","fillBorderLeft","borderLeftColor","borderLeftStyle","shouldRenderBorders","renderBorders","_node$style$borderTop3","_node$style$borderTop4","_node$style$borderLef","_node$style$borderLef2","_node$style$borderRig","_node$style$borderRig2","_node$style$borderBot3","_node$style$borderBot4","drawBackground","nodeOpacity","hasBackground","setLink","isId","method","setDestination","addNamedDestination","_renderFns","isRecursiveNode","Svg","renderChildren","renderChild","renderFns","Note","Canvas","Link","overflowHidden","overflow","shouldRenderChildren","Page","setPDFMetadata","target","info","addMetadata","doc","setProp","title","author","subject","keywords","creator","producer","addNodeBookmark","pageNumber","registry","bookmark","parent","expanded","zoom","outline","instance","addItem","ref","addBookmarks","root","pages","page","end","default"],"sources":["C:/Users/Pipe17/Desktop/practicaReact/loginfirebase/node_modules/@react-pdf/render/lib/index.es.js"],"sourcesContent":["import * as P from '@react-pdf/primitives';\nimport { isNil, matchPercent } from '@react-pdf/fns';\nimport advanceWidth from '@react-pdf/textkit/lib/run/advanceWidth';\nimport lineWidth from '@react-pdf/textkit/lib/attributedString/advanceWidth';\nimport absPath from 'abs-svg-path';\nimport parsePath from 'parse-svg-path';\nimport normalizePath from 'normalize-svg-path';\nimport runHeight from '@react-pdf/textkit/lib/run/height';\nimport runDescent from '@react-pdf/textkit/lib/run/descent';\nimport ascent from '@react-pdf/textkit/lib/attributedString/ascent';\nimport colorString from 'color-string';\nimport _extends from '@babel/runtime/helpers/extends';\n\nvar renderPath = function renderPath(ctx, node) {\n  var _node$props;\n\n  var d = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.d;\n  if (d) ctx.path(node.props.d);\n};\n\nvar KAPPA$3 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar renderRect = function renderRect(ctx, node) {\n  var _node$props, _node$props2, _node$props3, _node$props4, _node$props5, _node$props6;\n\n  var x = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.x) || 0;\n  var y = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.y) || 0;\n  var rx = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.rx) || 0;\n  var ry = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.ry) || 0;\n  var width = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.width) || 0;\n  var height = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.height) || 0;\n  if (!width || !height) return;\n\n  if (rx && ry) {\n    var krx = rx * KAPPA$3;\n    var kry = ry * KAPPA$3;\n    ctx.moveTo(x + rx, y);\n    ctx.lineTo(x - rx + width, y);\n    ctx.bezierCurveTo(x - rx + width + krx, y, x + width, y + ry - kry, x + width, y + ry);\n    ctx.lineTo(x + width, y + height - ry);\n    ctx.bezierCurveTo(x + width, y + height - ry + kry, x - rx + width + krx, y + height, x - rx + width, y + height);\n    ctx.lineTo(x + rx, y + height);\n    ctx.bezierCurveTo(x + rx - krx, y + height, x, y + height - ry + kry, x, y + height - ry);\n    ctx.lineTo(x, y + ry);\n    ctx.bezierCurveTo(x, y + ry - kry, x + rx - krx, y, x + rx, y);\n  } else {\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + width, y);\n    ctx.lineTo(x + width, y + height);\n    ctx.lineTo(x, y + height);\n  }\n\n  ctx.closePath();\n};\n\nvar renderLine$1 = function renderLine(ctx, node) {\n  var _ref = node.props || {},\n      x1 = _ref.x1,\n      x2 = _ref.x2,\n      y1 = _ref.y1,\n      y2 = _ref.y2;\n\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n};\n\nvar renderGroup = function renderGroup() {// noop\n};\n\nvar KAPPA$2 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\nvar drawEllipse = function drawEllipse(ctx, cx, cy, rx, ry) {\n  var x = cx - rx;\n  var y = cy - ry;\n  var ox = rx * KAPPA$2;\n  var oy = ry * KAPPA$2;\n  var xe = x + rx * 2;\n  var ye = y + ry * 2;\n  var xm = x + rx;\n  var ym = y + ry;\n  ctx.moveTo(x, ym);\n  ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n  ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n  ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n  ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n  ctx.closePath();\n};\n\nvar renderEllipse = function renderEllipse(ctx, node) {\n  var _ref = node.props || {},\n      cx = _ref.cx,\n      cy = _ref.cy,\n      rx = _ref.rx,\n      ry = _ref.ry;\n\n  drawEllipse(ctx, cx, cy, rx, ry);\n};\n\nvar renderCircle = function renderCircle(ctx, node) {\n  var _node$props, _node$props2, _node$props3;\n\n  var cx = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.cx;\n  var cy = (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.cy;\n  var r = (_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.r;\n  drawEllipse(ctx, cx, cy, r, r);\n};\n\nvar renderGlyphs = function renderGlyphs(ctx, glyphs, positions, x, y, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var scale = 1000 / ctx._fontSize;\n  var unitsPerEm = ctx._font.font.unitsPerEm || 1000;\n  var advanceWidthScale = 1000 / unitsPerEm; // Glyph encoding and positioning\n\n  var encodedGlyphs = ctx._font.encodeGlyphs(glyphs);\n\n  var encodedPositions = positions.map(function (pos, i) {\n    return {\n      xAdvance: pos.xAdvance * scale,\n      yAdvance: pos.yAdvance * scale,\n      xOffset: pos.xOffset,\n      yOffset: pos.yOffset,\n      advanceWidth: glyphs[i].advanceWidth * advanceWidthScale\n    };\n  });\n  return ctx._glyphs(encodedGlyphs, encodedPositions, x, y, options);\n};\n\nvar renderRun$1 = function renderRun(ctx, run) {\n  var runAdvanceWidth = advanceWidth(run);\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      color = _run$attributes.color,\n      opacity = _run$attributes.opacity;\n  ctx.fillColor(color);\n  ctx.fillOpacity(opacity);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      renderGlyphs(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(runAdvanceWidth, 0);\n};\n\nvar renderSpan = function renderSpan(ctx, line, textAnchor, dominantBaseline) {\n  var _line$box, _line$box2, _line$runs$, _line$runs$2, _line$runs$2$attribut;\n\n  ctx.save();\n  var x = ((_line$box = line.box) === null || _line$box === void 0 ? void 0 : _line$box.x) || 0;\n  var y = ((_line$box2 = line.box) === null || _line$box2 === void 0 ? void 0 : _line$box2.y) || 0;\n  var font = (_line$runs$ = line.runs[0]) === null || _line$runs$ === void 0 ? void 0 : _line$runs$.attributes.font;\n  var scale = ((_line$runs$2 = line.runs[0]) === null || _line$runs$2 === void 0 ? void 0 : (_line$runs$2$attribut = _line$runs$2.attributes) === null || _line$runs$2$attribut === void 0 ? void 0 : _line$runs$2$attribut.scale) || 1;\n  var width = lineWidth(line);\n  var ascent = font.ascent * scale;\n  var xHeight = font.xHeight * scale;\n  var descent = font.descent * scale;\n  var capHeight = font.capHeight * scale;\n  var xTranslate = x;\n  var yTranslate = y;\n\n  switch (textAnchor) {\n    case 'middle':\n      xTranslate = x - width / 2;\n      break;\n\n    case 'end':\n      xTranslate = x - width;\n      break;\n\n    default:\n      xTranslate = x;\n      break;\n  }\n\n  switch (dominantBaseline) {\n    case 'middle':\n    case 'central':\n      yTranslate = y + capHeight / 2;\n      break;\n\n    case 'hanging':\n      yTranslate = y + capHeight;\n      break;\n\n    case 'mathematical':\n      yTranslate = y + xHeight;\n      break;\n\n    case 'text-after-edge':\n      yTranslate = y + descent;\n      break;\n\n    case 'text-before-edge':\n      yTranslate = y + ascent;\n      break;\n\n    default:\n      yTranslate = y;\n      break;\n  }\n\n  ctx.translate(xTranslate, yTranslate);\n  line.runs.forEach(function (run) {\n    return renderRun$1(ctx, run);\n  });\n  ctx.restore();\n};\n\nvar renderSvgText = function renderSvgText(ctx, node) {\n  node.children.forEach(function (span) {\n    return renderSpan(ctx, span.lines[0], span.props.textAnchor, span.props.dominantBaseline);\n  });\n};\n\nvar pairs = function pairs(values) {\n  var result = [];\n\n  for (var i = 0; i < values.length; i += 2) {\n    result.push([values[i], values[i + 1]]);\n  }\n\n  return result;\n};\n/**\n * Parse svg-like points into number arrays\n *\n * @param {String} points string ex. \"20,30 50,60\"\n * @return {Array} points array ex. [[20, 30], [50, 60]]\n */\n\n\nvar parsePoints = function parsePoints(points) {\n  var values = (points || '').trim().replace(/,/g, ' ').replace(/(\\d)-(\\d)/g, '$1 -$2').split(/\\s+/);\n\n  if (values.length % 2 !== 0) {\n    values = values.slice(0, -1);\n  }\n\n  values = values.map(parseFloat);\n  return pairs(values);\n};\n\nvar drawPolyline = function drawPolyline(ctx, points) {\n  if (points.length > 0) {\n    ctx.moveTo(points[0][0], points[0][1]);\n    points.slice(1).forEach(function (p) {\n      return ctx.lineTo(p[0], p[1]);\n    });\n  }\n};\n\nvar renderPolyline = function renderPolyline(ctx, node) {\n  var points = parsePoints(node.props.points || '');\n  drawPolyline(ctx, points);\n};\n\nvar renderPolygon = function renderPolygon(ctx, node) {\n  renderPolyline(ctx, node);\n  ctx.closePath();\n};\n\nvar renderImage$1 = function renderImage(ctx, node) {\n  if (!node.image.data) return;\n  var _node$props = node.props,\n      x = _node$props.x,\n      y = _node$props.y;\n  var _node$style = node.style,\n      width = _node$style.width,\n      height = _node$style.height,\n      opacity = _node$style.opacity;\n  var paddingTop = node.box.paddingLeft || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n\n  if (width === 0 || height === 0) {\n    console.warn(\"Image with src '\" + node.props.href + \"' skipped due to invalid dimensions\");\n    return;\n  }\n\n  ctx.save();\n  ctx.fillOpacity(opacity || 1).image(node.image.data, x + paddingLeft, y + paddingTop, {\n    width: width,\n    height: height\n  });\n  ctx.restore();\n};\n\n// This constant is used to approximate a symmetrical arc using a cubic\n// Bezier curve.\nvar KAPPA$1 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar clipNode = function clipNode(ctx, node) {\n  if (!node.style) return;\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var _node$style = node.style,\n      _node$style$borderTop = _node$style.borderTopLeftRadius,\n      borderTopLeftRadius = _node$style$borderTop === void 0 ? 0 : _node$style$borderTop,\n      _node$style$borderTop2 = _node$style.borderTopRightRadius,\n      borderTopRightRadius = _node$style$borderTop2 === void 0 ? 0 : _node$style$borderTop2,\n      _node$style$borderBot = _node$style.borderBottomRightRadius,\n      borderBottomRightRadius = _node$style$borderBot === void 0 ? 0 : _node$style$borderBot,\n      _node$style$borderBot2 = _node$style.borderBottomLeftRadius,\n      borderBottomLeftRadius = _node$style$borderBot2 === void 0 ? 0 : _node$style$borderBot2; // Border top\n\n  var rtr = Math.min(borderTopRightRadius, 0.5 * width, 0.5 * height);\n  var ctr = rtr * (1.0 - KAPPA$1);\n  ctx.moveTo(left + rtr, top);\n  ctx.lineTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - ctr, top, left + width, top + ctr, left + width, top + rtr); // Border right\n\n  var rbr = Math.min(borderBottomRightRadius, 0.5 * width, 0.5 * height);\n  var cbr = rbr * (1.0 - KAPPA$1);\n  ctx.lineTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - cbr, left + width - cbr, top + height, left + width - rbr, top + height); // Border bottom\n\n  var rbl = Math.min(borderBottomLeftRadius, 0.5 * width, 0.5 * height);\n  var cbl = rbl * (1.0 - KAPPA$1);\n  ctx.lineTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + cbl, top + height, left, top + height - cbl, left, top + height - rbl); // Border left\n\n  var rtl = Math.min(borderTopLeftRadius, 0.5 * width, 0.5 * height);\n  var ctl = rtl * (1.0 - KAPPA$1);\n  ctx.lineTo(left, top + rtl);\n  ctx.bezierCurveTo(left, top + ctl, left + ctl, top, left + rtl, top);\n  ctx.closePath();\n  ctx.clip();\n};\n\n// TODO: Implement using only matrices to support skew and even more operations than css.\nvar applySingleTransformation = function applySingleTransformation(ctx, transform, origin) {\n  var operation = transform.operation,\n      value = transform.value;\n\n  switch (operation) {\n    case 'scale':\n      {\n        var scaleX = value[0],\n            scaleY = value[1];\n        ctx.scale(scaleX, scaleY, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'rotate':\n      {\n        var angle = value[0];\n        ctx.rotate(angle, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'translate':\n      {\n        var x = value[0],\n            y = value[1];\n        ctx.translate(x, y, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'matrix':\n      {\n        ctx.transform.apply(ctx, value);\n        break;\n      }\n\n    default:\n      {\n        console.error(\"Transform operation: '\" + operation + \"' doesn't supported\");\n      }\n  }\n};\n\nvar applyTransformations = function applyTransformations(ctx, node) {\n  var _node$style, _node$props;\n\n  if (!node.origin) return;\n  var origin = [node.origin.left, node.origin.top];\n  var operations = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.transform) || ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.transform) || [];\n  operations.forEach(function (operation) {\n    applySingleTransformation(ctx, operation, origin);\n  });\n};\n\nvar _boundingBoxFns;\n\nvar getPathBoundingBox = function getPathBoundingBox(node) {\n  var _node$props;\n\n  var path = normalizePath(absPath(parsePath(((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.d) || '')));\n  if (!path.length) return [0, 0, 0, 0];\n  var bounds = [Infinity, Infinity, -Infinity, -Infinity];\n\n  for (var i = 0, l = path.length; i < l; i += 1) {\n    var points = path[i].slice(1);\n\n    for (var j = 0; j < points.length; j += 2) {\n      if (points[j + 0] < bounds[0]) bounds[0] = points[j + 0];\n      if (points[j + 1] < bounds[1]) bounds[1] = points[j + 1];\n      if (points[j + 0] > bounds[2]) bounds[2] = points[j + 0];\n      if (points[j + 1] > bounds[3]) bounds[3] = points[j + 1];\n    }\n  }\n\n  return bounds;\n};\n\nvar getCircleBoundingBox = function getCircleBoundingBox(node) {\n  var _node$props2, _node$props3, _node$props4;\n\n  var r = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.r) || 0;\n  var cx = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.cx) || 0;\n  var cy = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.cy) || 0;\n  return [cx - r, cy - r, cx + r, cy + r];\n};\n\nvar getEllipseBoundingBox = function getEllipseBoundingBox(node) {\n  var _node$props5, _node$props6, _node$props7, _node$props8;\n\n  var cx = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.cx) || 0;\n  var cy = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.cy) || 0;\n  var rx = ((_node$props7 = node.props) === null || _node$props7 === void 0 ? void 0 : _node$props7.rx) || 0;\n  var ry = ((_node$props8 = node.props) === null || _node$props8 === void 0 ? void 0 : _node$props8.ry) || 0;\n  return [cx - rx, cy - ry, cx + rx, cy + ry];\n};\n\nvar getLineBoundingBox = function getLineBoundingBox(node) {\n  var _node$props9, _node$props10, _node$props11, _node$props12;\n\n  var x1 = ((_node$props9 = node.props) === null || _node$props9 === void 0 ? void 0 : _node$props9.x1) || 0;\n  var y1 = ((_node$props10 = node.props) === null || _node$props10 === void 0 ? void 0 : _node$props10.y1) || 0;\n  var x2 = ((_node$props11 = node.props) === null || _node$props11 === void 0 ? void 0 : _node$props11.x2) || 0;\n  var y2 = ((_node$props12 = node.props) === null || _node$props12 === void 0 ? void 0 : _node$props12.y2) || 0;\n  return [Math.min(x1, x2), Math.min(y1, y2), Math.max(x1, x2), Math.max(y1, y2)];\n};\n\nvar getRectBoundingBox = function getRectBoundingBox(node) {\n  var _node$props13, _node$props14, _node$props15, _node$props16;\n\n  var x = ((_node$props13 = node.props) === null || _node$props13 === void 0 ? void 0 : _node$props13.x) || 0;\n  var y = ((_node$props14 = node.props) === null || _node$props14 === void 0 ? void 0 : _node$props14.y) || 0;\n  var width = ((_node$props15 = node.props) === null || _node$props15 === void 0 ? void 0 : _node$props15.width) || 0;\n  var height = ((_node$props16 = node.props) === null || _node$props16 === void 0 ? void 0 : _node$props16.height) || 0;\n  return [x, y, x + width, y + height];\n};\n\nvar max = function max(values) {\n  return Math.max.apply(Math, [-Infinity].concat(values));\n};\n\nvar min = function min(values) {\n  return Math.min.apply(Math, [Infinity].concat(values));\n};\n\nvar getPolylineBoundingBox = function getPolylineBoundingBox(node) {\n  var _node$props17;\n\n  var points = parsePoints(((_node$props17 = node.props) === null || _node$props17 === void 0 ? void 0 : _node$props17.points) || []);\n  var xValues = points.map(function (p) {\n    return p[0];\n  });\n  var yValues = points.map(function (p) {\n    return p[1];\n  });\n  return [min(xValues), min(yValues), max(xValues), max(yValues)];\n};\n\nvar boundingBoxFns = (_boundingBoxFns = {}, _boundingBoxFns[P.Rect] = getRectBoundingBox, _boundingBoxFns[P.Line] = getLineBoundingBox, _boundingBoxFns[P.Path] = getPathBoundingBox, _boundingBoxFns[P.Circle] = getCircleBoundingBox, _boundingBoxFns[P.Ellipse] = getEllipseBoundingBox, _boundingBoxFns[P.Polygon] = getPolylineBoundingBox, _boundingBoxFns[P.Polyline] = getPolylineBoundingBox, _boundingBoxFns);\n\nvar getBoundingBox = function getBoundingBox(node) {\n  var boundingBoxFn = boundingBoxFns[node.type];\n  return boundingBoxFn ? boundingBoxFn(node) : [0, 0, 0, 0];\n};\n\nvar _renderFns$1;\n\nvar setStrokeWidth = function setStrokeWidth(ctx, node) {\n  var _node$props;\n\n  var lineWidth = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.strokeWidth) || 0;\n  if (lineWidth) ctx.lineWidth(lineWidth);\n};\n\nvar setStrokeColor = function setStrokeColor(ctx, node) {\n  var _node$props2;\n\n  var strokeColor = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.stroke) || null;\n  if (strokeColor) ctx.strokeColor(strokeColor);\n};\n\nvar setOpacity = function setOpacity(ctx, node) {\n  var _node$props3;\n\n  var opacity = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.opacity) || null;\n  if (!isNil(opacity)) ctx.opacity(opacity);\n};\n\nvar setFillOpacity = function setFillOpacity(ctx, node) {\n  var _node$props4;\n\n  var fillOpacity = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.fillOpacity) || null;\n  if (!isNil(fillOpacity)) ctx.fillOpacity(fillOpacity);\n};\n\nvar setStrokeOpacity = function setStrokeOpacity(ctx, node) {\n  var _node$props5;\n\n  var strokeOpacity = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.strokeOpacity) || null;\n  if (!isNil(strokeOpacity)) ctx.strokeOpacity(strokeOpacity);\n};\n\nvar setLineJoin = function setLineJoin(ctx, node) {\n  var _node$props6;\n\n  var lineJoin = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.strokeLinejoin) || null;\n  if (lineJoin) ctx.lineJoin(lineJoin);\n};\n\nvar setLineCap = function setLineCap(ctx, node) {\n  var _node$props7;\n\n  var lineCap = ((_node$props7 = node.props) === null || _node$props7 === void 0 ? void 0 : _node$props7.strokeLinecap) || null;\n  if (lineCap) ctx.lineCap(lineCap);\n};\n\nvar setLineDash = function setLineDash(ctx, node) {\n  var _node$props8;\n\n  var value = ((_node$props8 = node.props) === null || _node$props8 === void 0 ? void 0 : _node$props8.strokeDasharray) || null;\n  if (value) ctx.dash(value.split(','));\n};\n\nvar hasLinearGradientFill = function hasLinearGradientFill(node) {\n  var _node$props9, _node$props9$fill;\n\n  return ((_node$props9 = node.props) === null || _node$props9 === void 0 ? void 0 : (_node$props9$fill = _node$props9.fill) === null || _node$props9$fill === void 0 ? void 0 : _node$props9$fill.type) === P.LinearGradient;\n};\n\nvar hasRadialGradientFill = function hasRadialGradientFill(node) {\n  var _node$props10, _node$props10$fill;\n\n  return ((_node$props10 = node.props) === null || _node$props10 === void 0 ? void 0 : (_node$props10$fill = _node$props10.fill) === null || _node$props10$fill === void 0 ? void 0 : _node$props10$fill.type) === P.RadialGradient;\n}; // Math simplified from https://github.com/devongovett/svgkit/blob/master/src/elements/SVGGradient.js#L104\n\n\nvar setLinearGradientFill = function setLinearGradientFill(ctx, node) {\n  var _node$props11;\n\n  var bbox = getBoundingBox(node);\n  var gradient = ((_node$props11 = node.props) === null || _node$props11 === void 0 ? void 0 : _node$props11.fill) || null;\n  var x1 = gradient.props.x1 || 0;\n  var y1 = gradient.props.y1 || 0;\n  var x2 = gradient.props.x2 || 1;\n  var y2 = gradient.props.y2 || 0;\n  var m0 = bbox[2] - bbox[0];\n  var m3 = bbox[3] - bbox[1];\n  var m4 = bbox[0];\n  var m5 = bbox[1];\n  var gx1 = m0 * x1 + m4;\n  var gy1 = m3 * y1 + m5;\n  var gx2 = m0 * x2 + m4;\n  var gy2 = m3 * y2 + m5;\n  var grad = ctx.linearGradient(gx1, gy1, gx2, gy2);\n  gradient.children.forEach(function (stop) {\n    grad.stop(stop.props.offset, stop.props.stopColor, stop.props.stopOpacity);\n  });\n  ctx.fill(grad);\n}; // Math simplified from https://github.com/devongovett/svgkit/blob/master/src/elements/SVGGradient.js#L155\n\n\nvar setRadialGradientFill = function setRadialGradientFill(ctx, node) {\n  var _node$props12;\n\n  var bbox = getBoundingBox(node);\n  var gradient = ((_node$props12 = node.props) === null || _node$props12 === void 0 ? void 0 : _node$props12.fill) || null;\n  var cx = gradient.props.cx || 0.5;\n  var cy = gradient.props.cy || 0.5;\n  var fx = gradient.props.fx || cx;\n  var fy = gradient.props.fy || cy;\n  var r = gradient.props.r || 0.5;\n  var m0 = bbox[2] - bbox[0];\n  var m3 = bbox[3] - bbox[1];\n  var m4 = bbox[0];\n  var m5 = bbox[1];\n  var gr = r * m0;\n  var gcx = m0 * cx + m4;\n  var gcy = m3 * cy + m5;\n  var gfx = m0 * fx + m4;\n  var gfy = m3 * fy + m5;\n  var grad = ctx.radialGradient(gfx, gfy, 0, gcx, gcy, gr);\n  gradient.children.forEach(function (stop) {\n    grad.stop(stop.props.offset, stop.props.stopColor, stop.props.stopOpacity);\n  });\n  ctx.fill(grad);\n};\n\nvar setFillColor = function setFillColor(ctx, node) {\n  var _node$props13;\n\n  var fillColor = ((_node$props13 = node.props) === null || _node$props13 === void 0 ? void 0 : _node$props13.fill) || null;\n  if (fillColor) ctx.fillColor(fillColor);\n};\n\nvar setFill = function setFill(ctx, node) {\n  if (hasLinearGradientFill(node)) return setLinearGradientFill(ctx, node);\n  if (hasRadialGradientFill(node)) return setRadialGradientFill(ctx, node);\n  return setFillColor(ctx, node);\n};\n\nvar draw = function draw(ctx, node) {\n  var props = node.props || {};\n\n  if (props.fill && props.stroke) {\n    ctx.fillAndStroke(props.fillRule);\n  } else if (props.fill) {\n    ctx.fill(props.fillRule);\n  } else if (props.stroke) {\n    ctx.stroke();\n  } else {\n    ctx.save();\n    ctx.opacity(0);\n    ctx.fill(null);\n    ctx.restore();\n  }\n};\n\nvar noop = function noop() {};\n\nvar renderFns$1 = (_renderFns$1 = {}, _renderFns$1[P.Tspan] = noop, _renderFns$1[P.TextInstance] = noop, _renderFns$1[P.Path] = renderPath, _renderFns$1[P.Rect] = renderRect, _renderFns$1[P.Line] = renderLine$1, _renderFns$1[P.G] = renderGroup, _renderFns$1[P.Text] = renderSvgText, _renderFns$1[P.Circle] = renderCircle, _renderFns$1[P.Image] = renderImage$1, _renderFns$1[P.Ellipse] = renderEllipse, _renderFns$1[P.Polygon] = renderPolygon, _renderFns$1[P.Polyline] = renderPolyline, _renderFns$1);\n\nvar renderNode$1 = function renderNode(ctx, node) {\n  var renderFn = renderFns$1[node.type];\n\n  if (renderFns$1) {\n    renderFn(ctx, node);\n  } else {\n    console.warn(\"SVG node of type \" + node.type + \" is not currenty supported\");\n  }\n};\n\nvar drawNode = function drawNode(ctx, node) {\n  setLineCap(ctx, node);\n  setLineDash(ctx, node);\n  setLineJoin(ctx, node);\n  setStrokeWidth(ctx, node);\n  setStrokeColor(ctx, node);\n  setFill(ctx, node);\n  setStrokeOpacity(ctx, node);\n  setFillOpacity(ctx, node);\n  setOpacity(ctx, node);\n  applyTransformations(ctx, node);\n  renderNode$1(ctx, node);\n  draw(ctx, node);\n};\n\nvar clipPath = function clipPath(ctx, node) {\n  var _node$props14;\n\n  var value = (_node$props14 = node.props) === null || _node$props14 === void 0 ? void 0 : _node$props14.clipPath;\n\n  if (value) {\n    var children = value.children || [];\n    children.forEach(function (child) {\n      return renderNode$1(ctx, child);\n    });\n    ctx.clip();\n  }\n};\n\nvar drawChildren = function drawChildren(ctx, node) {\n  var children = node.children || [];\n  children.forEach(function (child) {\n    ctx.save();\n    clipPath(ctx, child);\n    drawNode(ctx, child);\n    drawChildren(ctx, child);\n    ctx.restore();\n  });\n};\n\nvar resolveAspectRatio = function resolveAspectRatio(ctx, node) {\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height;\n  var _node$props15 = node.props,\n      viewBox = _node$props15.viewBox,\n      _node$props15$preserv = _node$props15.preserveAspectRatio,\n      preserveAspectRatio = _node$props15$preserv === void 0 ? {} : _node$props15$preserv;\n  var _preserveAspectRatio$ = preserveAspectRatio.meetOrSlice,\n      meetOrSlice = _preserveAspectRatio$ === void 0 ? 'meet' : _preserveAspectRatio$,\n      _preserveAspectRatio$2 = preserveAspectRatio.align,\n      align = _preserveAspectRatio$2 === void 0 ? 'xMidYMid' : _preserveAspectRatio$2;\n  if (viewBox == null || width == null || height == null) return;\n  var x = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.minX) || 0;\n  var y = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.minY) || 0;\n  var logicalWidth = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.maxX) || width;\n  var logicalHeight = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.maxY) || height;\n  var logicalRatio = logicalWidth / logicalHeight;\n  var physicalRatio = width / height;\n  var scaleX = width / logicalWidth;\n  var scaleY = height / logicalHeight;\n\n  if (align === 'none') {\n    ctx.scale(scaleX, scaleY);\n    ctx.translate(-x, -y);\n    return;\n  }\n\n  if (logicalRatio < physicalRatio && meetOrSlice === 'meet' || logicalRatio >= physicalRatio && meetOrSlice === 'slice') {\n    ctx.scale(scaleY, scaleY);\n\n    switch (align) {\n      case 'xMinYMin':\n      case 'xMinYMid':\n      case 'xMinYMax':\n        ctx.translate(-x, -y);\n        break;\n\n      case 'xMidYMin':\n      case 'xMidYMid':\n      case 'xMidYMax':\n        ctx.translate(-x - (logicalWidth - width * logicalHeight / height) / 2, -y);\n        break;\n\n      default:\n        ctx.translate(-x - (logicalWidth - width * logicalHeight / height), -y);\n    }\n  } else {\n    ctx.scale(scaleX, scaleX);\n\n    switch (align) {\n      case 'xMinYMin':\n      case 'xMidYMin':\n      case 'xMaxYMin':\n        ctx.translate(-x, -y);\n        break;\n\n      case 'xMinYMid':\n      case 'xMidYMid':\n      case 'xMaxYMid':\n        ctx.translate(-x, -y - (logicalHeight - height * logicalWidth / width) / 2);\n        break;\n\n      default:\n        ctx.translate(-x, -y - (logicalHeight - height * logicalWidth / width));\n    }\n  }\n};\n\nvar moveToOrigin = function moveToOrigin(ctx, node) {\n  var _node$box2 = node.box,\n      top = _node$box2.top,\n      left = _node$box2.left;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var paddingTop = node.box.paddingTop || 0;\n  ctx.translate(left + paddingLeft, top + paddingTop);\n};\n\nvar renderSvg = function renderSvg(ctx, node) {\n  ctx.save();\n  clipNode(ctx, node);\n  moveToOrigin(ctx, node);\n  resolveAspectRatio(ctx, node);\n  drawChildren(ctx, node);\n  ctx.restore();\n};\n\nvar parseColor = function parseColor(hex) {\n  var parsed = colorString.get(hex);\n  var value = colorString.to.hex(parsed.value.slice(0, 3));\n  var opacity = parsed.value[3];\n  return {\n    value: value,\n    opacity: opacity\n  };\n};\n\n/* eslint-disable no-param-reassign */\nvar DEST_REGEXP = /^#.+/;\n\nvar isSrcId$1 = function isSrcId(src) {\n  return src.match(DEST_REGEXP);\n};\n\nvar renderAttachment = function renderAttachment(ctx, attachment) {\n  var _attachment$xOffset = attachment.xOffset,\n      xOffset = _attachment$xOffset === void 0 ? 0 : _attachment$xOffset,\n      _attachment$yOffset = attachment.yOffset,\n      yOffset = _attachment$yOffset === void 0 ? 0 : _attachment$yOffset,\n      width = attachment.width,\n      height = attachment.height,\n      image = attachment.image;\n  ctx.translate(-width + xOffset, -height + yOffset);\n  ctx.image(image, 0, 0, {\n    fit: [width, height],\n    align: 'center',\n    valign: 'bottom'\n  });\n};\n\nvar renderAttachments = function renderAttachments(ctx, run) {\n  ctx.save();\n  var font = run.attributes.font;\n  var space = font.glyphForCodePoint(0x20);\n  var objectReplacement = font.glyphForCodePoint(0xfffc);\n  var attachmentAdvance = 0;\n\n  for (var i = 0; i < run.glyphs.length; i += 1) {\n    var position = run.positions[i];\n    var glyph = run.glyphs[i];\n    attachmentAdvance += position.xAdvance || 0;\n\n    if (glyph.id === objectReplacement.id && run.attributes.attachment) {\n      ctx.translate(attachmentAdvance, position.yOffset || 0);\n      renderAttachment(ctx, run.attributes.attachment);\n      run.glyphs[i] = space;\n      attachmentAdvance = 0;\n    }\n  }\n\n  ctx.restore();\n};\n\nvar renderRun = function renderRun(ctx, run, options) {\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      link = _run$attributes.link;\n  var color = parseColor(run.attributes.color);\n  var opacity = isNil(run.attributes.opacity) ? color.opacity : run.attributes.opacity;\n  var height = runHeight(run);\n  var descent = runDescent(run);\n  var runAdvanceWidth = advanceWidth(run);\n\n  if (options.outlineRuns) {\n    ctx.rect(0, -height, runAdvanceWidth, height).stroke();\n  }\n\n  ctx.fillColor(color.value);\n  ctx.fillOpacity(opacity);\n\n  if (link) {\n    if (isSrcId$1(link)) {\n      ctx.goTo(0, -height - descent, runAdvanceWidth, height, link.slice(1));\n    } else {\n      ctx.link(0, -height - descent, runAdvanceWidth, height, link);\n    }\n  }\n\n  renderAttachments(ctx, run);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      renderGlyphs(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(runAdvanceWidth, 0);\n};\n\nvar renderBackground$1 = function renderBackground(ctx, rect, backgroundColor) {\n  var color = parseColor(backgroundColor);\n  ctx.save();\n  ctx.fillOpacity(color.opacity);\n  ctx.rect(rect.x, rect.y, rect.width, rect.height);\n  ctx.fill(color.value);\n  ctx.restore();\n};\n\nvar renderDecorationLine = function renderDecorationLine(ctx, line) {\n  ctx.save();\n  ctx.lineWidth(line.rect.height);\n  ctx.strokeOpacity(line.opacity);\n\n  if (/dashed/.test(line.style)) {\n    ctx.dash(3 * line.rect.height);\n  } else if (/dotted/.test(line.style)) {\n    ctx.dash(line.rect.height);\n  }\n\n  if (/wavy/.test(line.style)) {\n    var dist = Math.max(2, line.rect.height);\n    var step = 1.1 * dist;\n    var stepCount = Math.floor(line.rect.width / (2 * step)); // Adjust step to fill entire width\n\n    var remainingWidth = line.rect.width - stepCount * 2 * step;\n    var adjustment = remainingWidth / stepCount / 2;\n    step += adjustment;\n    var cp1y = line.rect.y + dist;\n    var cp2y = line.rect.y - dist;\n    var x = line.rect.x;\n    ctx.moveTo(line.rect.x, line.rect.y);\n\n    for (var i = 0; i < stepCount; i += 1) {\n      ctx.bezierCurveTo(x + step, cp1y, x + step, cp2y, x + 2 * step, line.rect.y);\n      x += 2 * step;\n    }\n  } else {\n    ctx.moveTo(line.rect.x, line.rect.y);\n    ctx.lineTo(line.rect.x + line.rect.width, line.rect.y);\n\n    if (/double/.test(line.style)) {\n      ctx.moveTo(line.rect.x, line.rect.y + line.rect.height * 2);\n      ctx.lineTo(line.rect.x + line.rect.width, line.rect.y + line.rect.height * 2);\n    }\n  }\n\n  ctx.stroke(line.color);\n  ctx.restore();\n};\n\nvar renderLine = function renderLine(ctx, line, options) {\n  var lineAscent = ascent(line);\n\n  if (options.outlineLines) {\n    ctx.rect(line.box.x, line.box.y, line.box.width, line.box.height).stroke();\n  }\n\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y + lineAscent);\n\n  for (var i = 0; i < line.runs.length; i += 1) {\n    var run = line.runs[i];\n    var isLastRun = i === line.runs.length - 1;\n\n    if (run.attributes.backgroundColor) {\n      var overflowRight = isLastRun ? line.overflowRight : 0;\n      var backgroundRect = {\n        x: 0,\n        y: -lineAscent,\n        height: line.box.height,\n        width: advanceWidth(run) - overflowRight\n      };\n      renderBackground$1(ctx, backgroundRect, run.attributes.backgroundColor);\n    }\n\n    renderRun(ctx, run, options);\n  }\n\n  ctx.restore();\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y);\n\n  for (var _i = 0; _i < line.decorationLines.length; _i += 1) {\n    var decorationLine = line.decorationLines[_i];\n    renderDecorationLine(ctx, decorationLine);\n  }\n\n  ctx.restore();\n};\n\nvar renderBlock = function renderBlock(ctx, block, options) {\n  block.forEach(function (line) {\n    renderLine(ctx, line, options);\n  });\n};\n\nvar renderText = function renderText(ctx, node) {\n  var _node$box2, _node$box3;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var blocks = [node.lines];\n  var paddingTop = ((_node$box2 = node.box) === null || _node$box2 === void 0 ? void 0 : _node$box2.paddingTop) || 0;\n  var paddingLeft = ((_node$box3 = node.box) === null || _node$box3 === void 0 ? void 0 : _node$box3.paddingLeft) || 0;\n  var initialY = node.lines[0] ? node.lines[0].box.y : 0;\n  var offsetX = node.alignOffset || 0;\n  ctx.save();\n  ctx.translate(left + paddingLeft - offsetX, top + paddingTop - initialY);\n  blocks.forEach(function (block) {\n    renderBlock(ctx, block, {});\n  });\n  ctx.restore();\n};\n\nvar renderPage = function renderPage(ctx, node) {\n  var _node$props;\n\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height;\n  var dpi = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.dpi) || 72;\n  var userUnit = dpi / 72;\n  ctx.addPage({\n    size: [width, height],\n    margin: 0,\n    userUnit: userUnit\n  });\n};\n\nvar renderNote = function renderNote(ctx, node) {\n  var _node$children, _node$style, _node$style2;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var value = (node === null || node === void 0 ? void 0 : (_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children[0].value) || '';\n  var color = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.backgroundColor) || null;\n  var borderWidth = ((_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.borderWidth) || null;\n  ctx.note(left, top, 0, 0, value, {\n    color: color,\n    borderWidth: borderWidth\n  });\n};\n\nvar isNumeric = function isNumeric(n) {\n  return !Number.isNaN(parseFloat(n)) && Number.isFinite(n);\n};\n\nvar applyContainObjectFit = function applyContainObjectFit(cw, ch, iw, ih, px, py) {\n  var cr = cw / ch;\n  var ir = iw / ih;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n\n  if (cr > ir) {\n    var _height = ch;\n\n    var _width = _height * ir;\n\n    var _yOffset = isNumeric(py) ? py : 0;\n\n    var _xOffset = isNumeric(px) ? px : (cw - _width) * pxv;\n\n    return {\n      width: _width,\n      height: _height,\n      xOffset: _xOffset,\n      yOffset: _yOffset\n    };\n  }\n\n  var width = cw;\n  var height = width / ir;\n  var xOffset = isNumeric(px) ? px : 0;\n  var yOffset = isNumeric(py) ? py : (ch - height) * pyv;\n  return {\n    width: width,\n    height: height,\n    yOffset: yOffset,\n    xOffset: xOffset\n  };\n};\n\nvar applyNoneObjectFit = function applyNoneObjectFit(cw, ch, iw, ih, px, py) {\n  var width = iw;\n  var height = ih;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n  var xOffset = isNumeric(px) ? px : (cw - width) * pxv;\n  var yOffset = isNumeric(py) ? py : (ch - height) * pyv;\n  return {\n    width: width,\n    height: height,\n    xOffset: xOffset,\n    yOffset: yOffset\n  };\n};\n\nvar applyCoverObjectFit = function applyCoverObjectFit(cw, ch, iw, ih, px, py) {\n  var ir = iw / ih;\n  var cr = cw / ch;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n\n  if (cr > ir) {\n    var _width2 = cw;\n\n    var _height2 = _width2 / ir;\n\n    var _xOffset2 = isNumeric(px) ? px : 0;\n\n    var _yOffset2 = isNumeric(py) ? py : (ch - _height2) * pyv;\n\n    return {\n      width: _width2,\n      height: _height2,\n      yOffset: _yOffset2,\n      xOffset: _xOffset2\n    };\n  }\n\n  var height = ch;\n  var width = height * ir;\n  var xOffset = isNumeric(px) ? px : (cw - width) * pxv;\n  var yOffset = isNumeric(py) ? py : 0;\n  return {\n    width: width,\n    height: height,\n    xOffset: xOffset,\n    yOffset: yOffset\n  };\n};\n\nvar applyScaleDownObjectFit = function applyScaleDownObjectFit(cw, ch, iw, ih, px, py) {\n  var containDimension = applyContainObjectFit(cw, ch, iw, ih, px, py);\n  var noneDimension = applyNoneObjectFit(cw, ch, iw, ih, px, py);\n  return containDimension.width < noneDimension.width ? containDimension : noneDimension;\n};\n\nvar applyFillObjectFit = function applyFillObjectFit(cw, ch, px, py) {\n  return {\n    width: cw,\n    height: ch,\n    xOffset: matchPercent(px) ? 0 : px || 0,\n    yOffset: matchPercent(py) ? 0 : py || 0\n  };\n};\n\nvar resolveObjectFit = function resolveObjectFit(type, cw, ch, iw, ih, px, py) {\n  if (type === void 0) {\n    type = 'fill';\n  }\n\n  switch (type) {\n    case 'contain':\n      return applyContainObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'cover':\n      return applyCoverObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'none':\n      return applyNoneObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'scale-down':\n      return applyScaleDownObjectFit(cw, ch, iw, ih, px, py);\n\n    default:\n      return applyFillObjectFit(cw, ch, px, py);\n  }\n};\n\nvar drawImage = function drawImage(ctx, node, options) {\n  var _node$style, _node$style2, _node$style3, _node$style4;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top;\n  var opacity = (_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.opacity;\n  var objectFit = (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.objectFit;\n  var objectPositionX = (_node$style3 = node.style) === null || _node$style3 === void 0 ? void 0 : _node$style3.objectPositionX;\n  var objectPositionY = (_node$style4 = node.style) === null || _node$style4 === void 0 ? void 0 : _node$style4.objectPositionY;\n  var paddingTop = node.box.paddingTop || 0;\n  var paddingRight = node.box.paddingRight || 0;\n  var paddingBottom = node.box.paddingBottom || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var imageCache = options.imageCache || new Map();\n\n  var _resolveObjectFit = resolveObjectFit(objectFit, node.box.width - paddingLeft - paddingRight, node.box.height - paddingTop - paddingBottom, node.image.width, node.image.height, objectPositionX, objectPositionY),\n      width = _resolveObjectFit.width,\n      height = _resolveObjectFit.height,\n      xOffset = _resolveObjectFit.xOffset,\n      yOffset = _resolveObjectFit.yOffset;\n\n  if (node.image.data) {\n    if (width !== 0 && height !== 0) {\n      var cacheKey = node.image.key;\n      var image = imageCache.get(cacheKey) || ctx.embedImage(node.image.data);\n      if (cacheKey) imageCache.set(cacheKey, image);\n      var imageOpacity = isNil(opacity) ? 1 : opacity;\n      ctx.fillOpacity(imageOpacity).image(image, left + paddingLeft + xOffset, top + paddingTop + yOffset, {\n        width: width,\n        height: height\n      });\n    } else {\n      console.warn(\"Image with src '\" + JSON.stringify(node.props.src) + \"' skipped due to invalid dimensions\");\n    }\n  }\n};\n\nvar renderImage = function renderImage(ctx, node, options) {\n  ctx.save();\n  clipNode(ctx, node);\n  drawImage(ctx, node, options);\n  ctx.restore();\n};\n\nvar CONTENT_COLOR = '#a1c6e7';\nvar PADDING_COLOR = '#c4deb9';\nvar MARGIN_COLOR = '#f8cca1'; // TODO: Draw debug boxes using clipping to enhance quality\n\nvar debugContent = function debugContent(ctx, node) {\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top,\n      width = _node$box.width,\n      height = _node$box.height,\n      _node$box$paddingLeft = _node$box.paddingLeft,\n      paddingLeft = _node$box$paddingLeft === void 0 ? 0 : _node$box$paddingLeft,\n      _node$box$paddingTop = _node$box.paddingTop,\n      paddingTop = _node$box$paddingTop === void 0 ? 0 : _node$box$paddingTop,\n      _node$box$paddingRigh = _node$box.paddingRight,\n      paddingRight = _node$box$paddingRigh === void 0 ? 0 : _node$box$paddingRigh,\n      _node$box$paddingBott = _node$box.paddingBottom,\n      paddingBottom = _node$box$paddingBott === void 0 ? 0 : _node$box$paddingBott,\n      _node$box$borderLeftW = _node$box.borderLeftWidth,\n      borderLeftWidth = _node$box$borderLeftW === void 0 ? 0 : _node$box$borderLeftW,\n      _node$box$borderTopWi = _node$box.borderTopWidth,\n      borderTopWidth = _node$box$borderTopWi === void 0 ? 0 : _node$box$borderTopWi,\n      _node$box$borderRight = _node$box.borderRightWidth,\n      borderRightWidth = _node$box$borderRight === void 0 ? 0 : _node$box$borderRight,\n      _node$box$borderBotto = _node$box.borderBottomWidth,\n      borderBottomWidth = _node$box$borderBotto === void 0 ? 0 : _node$box$borderBotto;\n  ctx.fillColor(CONTENT_COLOR).opacity(0.5).rect(left + paddingLeft + borderLeftWidth, top + paddingTop + borderTopWidth, width - paddingLeft - paddingRight - borderRightWidth - borderLeftWidth, height - paddingTop - paddingBottom - borderTopWidth - borderBottomWidth).fill();\n};\n\nvar debugPadding = function debugPadding(ctx, node) {\n  var _node$box2 = node.box,\n      left = _node$box2.left,\n      top = _node$box2.top,\n      width = _node$box2.width,\n      height = _node$box2.height,\n      _node$box2$paddingLef = _node$box2.paddingLeft,\n      paddingLeft = _node$box2$paddingLef === void 0 ? 0 : _node$box2$paddingLef,\n      _node$box2$paddingTop = _node$box2.paddingTop,\n      paddingTop = _node$box2$paddingTop === void 0 ? 0 : _node$box2$paddingTop,\n      _node$box2$paddingRig = _node$box2.paddingRight,\n      paddingRight = _node$box2$paddingRig === void 0 ? 0 : _node$box2$paddingRig,\n      _node$box2$paddingBot = _node$box2.paddingBottom,\n      paddingBottom = _node$box2$paddingBot === void 0 ? 0 : _node$box2$paddingBot,\n      _node$box2$borderLeft = _node$box2.borderLeftWidth,\n      borderLeftWidth = _node$box2$borderLeft === void 0 ? 0 : _node$box2$borderLeft,\n      _node$box2$borderTopW = _node$box2.borderTopWidth,\n      borderTopWidth = _node$box2$borderTopW === void 0 ? 0 : _node$box2$borderTopW,\n      _node$box2$borderRigh = _node$box2.borderRightWidth,\n      borderRightWidth = _node$box2$borderRigh === void 0 ? 0 : _node$box2$borderRigh,\n      _node$box2$borderBott = _node$box2.borderBottomWidth,\n      borderBottomWidth = _node$box2$borderBott === void 0 ? 0 : _node$box2$borderBott;\n  ctx.fillColor(PADDING_COLOR).opacity(0.5); // Padding top\n\n  ctx.rect(left + paddingLeft + borderLeftWidth, top + borderTopWidth, width - paddingRight - paddingLeft - borderLeftWidth - borderRightWidth, paddingTop).fill(); // Padding left\n\n  ctx.rect(left + borderLeftWidth, top + borderTopWidth, paddingLeft, height - borderTopWidth - borderBottomWidth).fill(); // Padding right\n\n  ctx.rect(left + width - paddingRight - borderRightWidth, top + borderTopWidth, paddingRight, height - borderTopWidth - borderBottomWidth).fill(); // Padding bottom\n\n  ctx.rect(left + paddingLeft + borderLeftWidth, top + height - paddingBottom - borderBottomWidth, width - paddingRight - paddingLeft - borderLeftWidth - borderRightWidth, paddingBottom).fill();\n};\n\nvar getMargin = function getMargin(box) {\n  var marginLeft = box.marginLeft === 'auto' ? 0 : box.marginLeft;\n  var marginTop = box.marginTop === 'auto' ? 0 : box.marginTop;\n  var marginRight = box.marginRight === 'auto' ? 0 : box.marginRight;\n  var marginBottom = box.marginBottom === 'auto' ? 0 : box.marginBottom;\n  return {\n    marginLeft: marginLeft,\n    marginTop: marginTop,\n    marginRight: marginRight,\n    marginBottom: marginBottom\n  };\n};\n\nvar debugMargin = function debugMargin(ctx, node) {\n  var _node$box3 = node.box,\n      left = _node$box3.left,\n      top = _node$box3.top,\n      width = _node$box3.width,\n      height = _node$box3.height;\n\n  var _getMargin = getMargin(node.box),\n      _getMargin$marginLeft = _getMargin.marginLeft,\n      marginLeft = _getMargin$marginLeft === void 0 ? 0 : _getMargin$marginLeft,\n      _getMargin$marginTop = _getMargin.marginTop,\n      marginTop = _getMargin$marginTop === void 0 ? 0 : _getMargin$marginTop,\n      _getMargin$marginRigh = _getMargin.marginRight,\n      marginRight = _getMargin$marginRigh === void 0 ? 0 : _getMargin$marginRigh,\n      _getMargin$marginBott = _getMargin.marginBottom,\n      marginBottom = _getMargin$marginBott === void 0 ? 0 : _getMargin$marginBott;\n\n  ctx.fillColor(MARGIN_COLOR).opacity(0.5); // Margin top\n\n  ctx.rect(left, top - marginTop, width, marginTop).fill(); // Margin left\n\n  ctx.rect(left - marginLeft, top - marginTop, marginLeft, height + marginTop + marginBottom).fill(); // Margin right\n\n  ctx.rect(left + width, top - marginTop, marginRight, height + marginTop + marginBottom).fill(); // Margin bottom\n\n  ctx.rect(left, top + height, width, marginBottom).fill();\n};\n\nvar debugText = function debugText(ctx, node) {\n  var _node$box4 = node.box,\n      left = _node$box4.left,\n      top = _node$box4.top,\n      width = _node$box4.width,\n      height = _node$box4.height;\n\n  var _getMargin2 = getMargin(node.box),\n      _getMargin2$marginLef = _getMargin2.marginLeft,\n      marginLeft = _getMargin2$marginLef === void 0 ? 0 : _getMargin2$marginLef,\n      _getMargin2$marginTop = _getMargin2.marginTop,\n      marginTop = _getMargin2$marginTop === void 0 ? 0 : _getMargin2$marginTop,\n      _getMargin2$marginRig = _getMargin2.marginRight,\n      marginRight = _getMargin2$marginRig === void 0 ? 0 : _getMargin2$marginRig,\n      _getMargin2$marginBot = _getMargin2.marginBottom,\n      marginBottom = _getMargin2$marginBot === void 0 ? 0 : _getMargin2$marginBot;\n\n  var roundedWidth = Math.round(width + marginLeft + marginRight);\n  var roundedHeight = Math.round(height + marginTop + marginBottom);\n  ctx.fontSize(6).opacity(1).fillColor('black').text(roundedWidth + \" x \" + roundedHeight, left - marginLeft, Math.max(top - marginTop - 4, 1));\n};\n\nvar debugOrigin = function debugOrigin(ctx, node) {\n  if (node.origin) {\n    ctx.circle(node.origin.left, node.origin.top, 3).fill('red').circle(node.origin.left, node.origin.top, 5).stroke('red');\n  }\n};\n\nvar renderDebug = function renderDebug(ctx, node) {\n  var _node$props;\n\n  if (!((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.debug)) return;\n  ctx.save();\n  debugContent(ctx, node);\n  debugPadding(ctx, node);\n  debugMargin(ctx, node);\n  debugText(ctx, node);\n  debugOrigin(ctx, node);\n  ctx.restore();\n};\n\nvar availableMethods = ['dash', 'clip', 'save', 'path', 'fill', 'font', 'text', 'rect', 'scale', 'moveTo', 'lineTo', 'stroke', 'rotate', 'circle', 'lineCap', 'opacity', 'ellipse', 'polygon', 'restore', 'lineJoin', 'fontSize', 'fillColor', 'lineWidth', 'translate', 'miterLimit', 'strokeColor', 'fillOpacity', 'roundedRect', 'fillAndStroke', 'strokeOpacity', 'bezierCurveTo', 'quadraticCurveTo', 'linearGradient', 'radialGradient'];\n\nvar painter = function painter(ctx) {\n  var p = availableMethods.reduce(function (acc, prop) {\n    var _extends2;\n\n    return _extends({}, acc, (_extends2 = {}, _extends2[prop] = function () {\n      ctx[prop].apply(ctx, arguments);\n      return p;\n    }, _extends2));\n  }, {});\n  return p;\n};\n\nvar renderCanvas = function renderCanvas(ctx, node) {\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var paddingTop = node.box.paddingTop || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var paddingRight = node.box.paddingRight || 0;\n  var paddingBottom = node.box.paddingBottom || 0;\n  var availableWidth = width - paddingLeft - paddingRight;\n  var availableHeight = height - paddingTop - paddingBottom;\n\n  if (!availableWidth || !availableHeight) {\n    console.warn('Canvas element has null width or height. Please provide valid values via the `style` prop in order to correctly render it.');\n  }\n\n  ctx.save().translate(left + paddingLeft, top + paddingTop);\n\n  if (node.props.paint) {\n    node.props.paint(painter(ctx), availableWidth, availableHeight);\n  }\n\n  ctx.restore();\n};\n\n// Ref: https://www.w3.org/TR/css-backgrounds-3/#borders\n// This constant is used to approximate a symmetrical arc using a cubic Bezier curve.\nvar KAPPA = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar clipBorderTop = function clipBorderTop(ctx, layout, style, rtr, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth; // Clip outer top border edge\n\n  ctx.moveTo(left + rtl, top);\n  ctx.lineTo(left + width - rtr, top); // Ellipse coefficients outer top right cap\n\n  var c0 = rtr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width - c0, top, left + width, top + c0, left + width, top + rtr); // Move down in case the margin exceedes the radius\n\n  var topRightYCoord = top + Math.max(borderTopWidth, rtr);\n  ctx.lineTo(left + width, topRightYCoord); // Clip inner top right cap\n\n  ctx.lineTo(left + width - borderRightWidth, topRightYCoord); // Ellipse coefficients inner top right cap\n\n  var innerTopRightRadiusX = Math.max(rtr - borderRightWidth, 0);\n  var innerTopRightRadiusY = Math.max(rtr - borderTopWidth, 0);\n  var c1 = innerTopRightRadiusX * (1.0 - KAPPA);\n  var c2 = innerTopRightRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth, top + borderTopWidth + c2, left + width - borderRightWidth - c1, top + borderTopWidth, left + width - borderRightWidth - innerTopRightRadiusX, top + borderTopWidth); // Clip inner top border edge\n\n  ctx.lineTo(left + Math.max(rtl, borderLeftWidth), top + borderTopWidth); // Ellipse coefficients inner top left cap\n\n  var innerTopLeftRadiusX = Math.max(rtl - borderLeftWidth, 0);\n  var innerTopLeftRadiusY = Math.max(rtl - borderTopWidth, 0);\n  var c3 = innerTopLeftRadiusX * (1.0 - KAPPA);\n  var c4 = innerTopLeftRadiusY * (1.0 - KAPPA);\n  var topLeftYCoord = top + Math.max(borderTopWidth, rtl); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth + c3, top + borderTopWidth, left + borderLeftWidth, top + borderTopWidth + c4, left + borderLeftWidth, topLeftYCoord);\n  ctx.lineTo(left, topLeftYCoord); // Move down in case the margin exceedes the radius\n\n  ctx.lineTo(left, top + rtl); // Ellipse coefficients outer top left cap\n\n  var c5 = rtl * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left, top + c5, left + c5, top, left + rtl, top);\n  ctx.closePath();\n  ctx.clip(); // Clip border top cap joins\n\n  if (borderRightWidth) {\n    var trSlope = -borderTopWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, trSlope * (-width / 2) + top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderLeftWidth) {\n    var _trSlope = -borderTopWidth / borderLeftWidth;\n\n    ctx.moveTo(left + width / 2, _trSlope * (-width / 2) + top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left + width, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderTop = function fillBorderTop(ctx, layout, style, rtr, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width;\n  var borderTopColor = style.borderTopColor,\n      borderTopWidth = style.borderTopWidth,\n      borderTopStyle = style.borderTopStyle,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth;\n  var c0 = rtl * (1.0 - KAPPA);\n  var c1 = rtr * (1.0 - KAPPA);\n  ctx.moveTo(left, top + Math.max(rtl, borderTopWidth));\n  ctx.bezierCurveTo(left, top + c0, left + c0, top, left + rtl, top);\n  ctx.lineTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - c1, top, left + width, top + c1, left + width, top + rtr);\n  ctx.strokeColor(borderTopColor);\n  ctx.lineWidth(Math.max(borderRightWidth, borderTopWidth, borderLeftWidth) * 2);\n\n  if (borderTopStyle === 'dashed') {\n    ctx.dash(borderTopWidth * 2, {\n      space: borderTopWidth * 1.2\n    });\n  } else if (borderTopStyle === 'dotted') {\n    ctx.dash(borderTopWidth, {\n      space: borderTopWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderRight = function clipBorderRight(ctx, layout, style, rtr, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderBottomWidth = style.borderBottomWidth; // Clip outer right border edge\n\n  ctx.moveTo(left + width, top + rtr);\n  ctx.lineTo(left + width, top + height - rbr); // Ellipse coefficients outer bottom right cap\n\n  var c0 = rbr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width, top + height - c0, left + width - c0, top + height, left + width - rbr, top + height); // Move left in case the margin exceedes the radius\n\n  var topBottomXCoord = left + width - Math.max(borderRightWidth, rbr);\n  ctx.lineTo(topBottomXCoord, top + height); // Clip inner bottom right cap\n\n  ctx.lineTo(topBottomXCoord, top + height - borderBottomWidth); // Ellipse coefficients inner bottom right cap\n\n  var innerBottomRightRadiusX = Math.max(rbr - borderRightWidth, 0);\n  var innerBottomRightRadiusY = Math.max(rbr - borderBottomWidth, 0);\n  var c1 = innerBottomRightRadiusX * (1.0 - KAPPA);\n  var c2 = innerBottomRightRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth - c1, top + height - borderBottomWidth, left + width - borderRightWidth, top + height - borderBottomWidth - c2, left + width - borderRightWidth, top + height - Math.max(rbr, borderBottomWidth)); // Clip inner right border edge\n\n  ctx.lineTo(left + width - borderRightWidth, top + Math.max(rtr, borderTopWidth)); // Ellipse coefficients inner top right cap\n\n  var innerTopRightRadiusX = Math.max(rtr - borderRightWidth, 0);\n  var innerTopRightRadiusY = Math.max(rtr - borderTopWidth, 0);\n  var c3 = innerTopRightRadiusX * (1.0 - KAPPA);\n  var c4 = innerTopRightRadiusY * (1.0 - KAPPA);\n  var topRightXCoord = left + width - Math.max(rtr, borderRightWidth); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth, top + borderTopWidth + c4, left + width - borderRightWidth - c3, top + borderTopWidth, topRightXCoord, top + borderTopWidth);\n  ctx.lineTo(topRightXCoord, top); // Move right in case the margin exceedes the radius\n\n  ctx.lineTo(left + width - rtr, top); // Ellipse coefficients outer top right cap\n\n  var c5 = rtr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width - c5, top, left + width, top + c5, left + width, top + rtr);\n  ctx.closePath();\n  ctx.clip(); // Clip border right cap joins\n\n  if (borderTopWidth) {\n    var trSlope = -borderTopWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, trSlope * (-width / 2) + top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderBottomWidth) {\n    var brSlope = borderBottomWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, brSlope * (-width / 2) + top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderRight = function fillBorderRight(ctx, layout, style, rtr, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderRightColor = style.borderRightColor,\n      borderRightStyle = style.borderRightStyle,\n      borderRightWidth = style.borderRightWidth,\n      borderTopWidth = style.borderTopWidth,\n      borderBottomWidth = style.borderBottomWidth;\n  var c0 = rbr * (1.0 - KAPPA);\n  var c1 = rtr * (1.0 - KAPPA);\n  ctx.moveTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - c1, top, left + width, top + c1, left + width, top + rtr);\n  ctx.lineTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - c0, left + width - c0, top + height, left + width - rbr, top + height);\n  ctx.strokeColor(borderRightColor);\n  ctx.lineWidth(Math.max(borderRightWidth, borderTopWidth, borderBottomWidth) * 2);\n\n  if (borderRightStyle === 'dashed') {\n    ctx.dash(borderRightWidth * 2, {\n      space: borderRightWidth * 1.2\n    });\n  } else if (borderRightStyle === 'dotted') {\n    ctx.dash(borderRightWidth, {\n      space: borderRightWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderBottom = function clipBorderBottom(ctx, layout, style, rbl, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderBottomWidth = style.borderBottomWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth; // Clip outer top border edge\n\n  ctx.moveTo(left + width - rbr, top + height);\n  ctx.lineTo(left + rbl, top + height); // Ellipse coefficients outer top right cap\n\n  var c0 = rbl * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl); // Move up in case the margin exceedes the radius\n\n  var bottomLeftYCoord = top + height - Math.max(borderBottomWidth, rbl);\n  ctx.lineTo(left, bottomLeftYCoord); // Clip inner bottom left cap\n\n  ctx.lineTo(left + borderLeftWidth, bottomLeftYCoord); // Ellipse coefficients inner top right cap\n\n  var innerBottomLeftRadiusX = Math.max(rbl - borderLeftWidth, 0);\n  var innerBottomLeftRadiusY = Math.max(rbl - borderBottomWidth, 0);\n  var c1 = innerBottomLeftRadiusX * (1.0 - KAPPA);\n  var c2 = innerBottomLeftRadiusY * (1.0 - KAPPA); // Clip inner bottom left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth, top + height - borderBottomWidth - c2, left + borderLeftWidth + c1, top + height - borderBottomWidth, left + borderLeftWidth + innerBottomLeftRadiusX, top + height - borderBottomWidth); // Clip inner bottom border edge\n\n  ctx.lineTo(left + width - Math.max(rbr, borderRightWidth), top + height - borderBottomWidth); // Ellipse coefficients inner top left cap\n\n  var innerBottomRightRadiusX = Math.max(rbr - borderRightWidth, 0);\n  var innerBottomRightRadiusY = Math.max(rbr - borderBottomWidth, 0);\n  var c3 = innerBottomRightRadiusX * (1.0 - KAPPA);\n  var c4 = innerBottomRightRadiusY * (1.0 - KAPPA);\n  var bottomRightYCoord = top + height - Math.max(borderBottomWidth, rbr); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth - c3, top + height - borderBottomWidth, left + width - borderRightWidth, top + height - borderBottomWidth - c4, left + width - borderRightWidth, bottomRightYCoord);\n  ctx.lineTo(left + width, bottomRightYCoord); // Move down in case the margin exceedes the radius\n\n  ctx.lineTo(left + width, top + height - rbr); // Ellipse coefficients outer top left cap\n\n  var c5 = rbr * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left + width, top + height - c5, left + width - c5, top + height, left + width - rbr, top + height);\n  ctx.closePath();\n  ctx.clip(); // Clip border bottom cap joins\n\n  if (borderRightWidth) {\n    var brSlope = borderBottomWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, brSlope * (-width / 2) + top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderLeftWidth) {\n    var trSlope = -borderBottomWidth / borderLeftWidth;\n    ctx.moveTo(left + width / 2, trSlope * (width / 2) + top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left + width, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderBottom = function fillBorderBottom(ctx, layout, style, rbl, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderBottomColor = style.borderBottomColor,\n      borderBottomStyle = style.borderBottomStyle,\n      borderBottomWidth = style.borderBottomWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth;\n  var c0 = rbl * (1.0 - KAPPA);\n  var c1 = rbr * (1.0 - KAPPA);\n  ctx.moveTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - c1, left + width - c1, top + height, left + width - rbr, top + height);\n  ctx.lineTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl);\n  ctx.strokeColor(borderBottomColor);\n  ctx.lineWidth(Math.max(borderBottomWidth, borderRightWidth, borderLeftWidth) * 2);\n\n  if (borderBottomStyle === 'dashed') {\n    ctx.dash(borderBottomWidth * 2, {\n      space: borderBottomWidth * 1.2\n    });\n  } else if (borderBottomStyle === 'dotted') {\n    ctx.dash(borderBottomWidth, {\n      space: borderBottomWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderLeft = function clipBorderLeft(ctx, layout, style, rbl, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderLeftWidth = style.borderLeftWidth,\n      borderBottomWidth = style.borderBottomWidth; // Clip outer left border edge\n\n  ctx.moveTo(left, top + height - rbl);\n  ctx.lineTo(left, top + rtl); // Ellipse coefficients outer top left cap\n\n  var c0 = rtl * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left, top + c0, left + c0, top, left + rtl, top); // Move right in case the margin exceedes the radius\n\n  var topLeftCoordX = left + Math.max(borderLeftWidth, rtl);\n  ctx.lineTo(topLeftCoordX, top); // Clip inner top left cap\n\n  ctx.lineTo(topLeftCoordX, top + borderTopWidth); // Ellipse coefficients inner top left cap\n\n  var innerTopLeftRadiusX = Math.max(rtl - borderLeftWidth, 0);\n  var innerTopLeftRadiusY = Math.max(rtl - borderTopWidth, 0);\n  var c1 = innerTopLeftRadiusX * (1.0 - KAPPA);\n  var c2 = innerTopLeftRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth + c1, top + borderTopWidth, left + borderLeftWidth, top + borderTopWidth + c2, left + borderLeftWidth, top + Math.max(rtl, borderTopWidth)); // Clip inner left border edge\n\n  ctx.lineTo(left + borderLeftWidth, top + height - Math.max(rbl, borderBottomWidth)); // Ellipse coefficients inner bottom left cap\n\n  var innerBottomLeftRadiusX = Math.max(rbl - borderLeftWidth, 0);\n  var innerBottomLeftRadiusY = Math.max(rbl - borderBottomWidth, 0);\n  var c3 = innerBottomLeftRadiusX * (1.0 - KAPPA);\n  var c4 = innerBottomLeftRadiusY * (1.0 - KAPPA);\n  var bottomLeftXCoord = left + Math.max(rbl, borderLeftWidth); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth, top + height - borderBottomWidth - c4, left + borderLeftWidth + c3, top + height - borderBottomWidth, bottomLeftXCoord, top + height - borderBottomWidth);\n  ctx.lineTo(bottomLeftXCoord, top + height); // Move left in case the margin exceedes the radius\n\n  ctx.lineTo(left + rbl, top + height); // Ellipse coefficients outer top right cap\n\n  var c5 = rbl * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + c5, top + height, left, top + height - c5, left, top + height - rbl);\n  ctx.closePath();\n  ctx.clip(); // Clip border right cap joins\n\n  if (borderBottomWidth) {\n    var trSlope = -borderBottomWidth / borderLeftWidth;\n    ctx.moveTo(left + width / 2, trSlope * (width / 2) + top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left + width, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderBottomWidth) {\n    var _trSlope2 = -borderTopWidth / borderLeftWidth;\n\n    ctx.moveTo(left + width / 2, _trSlope2 * (-width / 2) + top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderLeft = function fillBorderLeft(ctx, layout, style, rbl, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      height = layout.height;\n  var borderLeftColor = style.borderLeftColor,\n      borderLeftStyle = style.borderLeftStyle,\n      borderLeftWidth = style.borderLeftWidth,\n      borderTopWidth = style.borderTopWidth,\n      borderBottomWidth = style.borderBottomWidth;\n  var c0 = rbl * (1.0 - KAPPA);\n  var c1 = rtl * (1.0 - KAPPA);\n  ctx.moveTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl);\n  ctx.lineTo(left, top + rtl);\n  ctx.bezierCurveTo(left, top + c1, left + c1, top, left + rtl, top);\n  ctx.strokeColor(borderLeftColor);\n  ctx.lineWidth(Math.max(borderLeftWidth, borderTopWidth, borderBottomWidth) * 2);\n\n  if (borderLeftStyle === 'dashed') {\n    ctx.dash(borderLeftWidth * 2, {\n      space: borderLeftWidth * 1.2\n    });\n  } else if (borderLeftStyle === 'dotted') {\n    ctx.dash(borderLeftWidth, {\n      space: borderLeftWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar shouldRenderBorders = function shouldRenderBorders(node) {\n  return node.box && (node.box.borderTopWidth || node.box.borderRightWidth || node.box.borderBottomWidth || node.box.borderLeftWidth);\n};\n\nvar renderBorders = function renderBorders(ctx, node) {\n  if (!shouldRenderBorders(node)) return;\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height,\n      borderTopWidth = _node$box.borderTopWidth,\n      borderLeftWidth = _node$box.borderLeftWidth,\n      borderRightWidth = _node$box.borderRightWidth,\n      borderBottomWidth = _node$box.borderBottomWidth;\n  var _node$style = node.style,\n      opacity = _node$style.opacity,\n      _node$style$borderTop = _node$style.borderTopLeftRadius,\n      borderTopLeftRadius = _node$style$borderTop === void 0 ? 0 : _node$style$borderTop,\n      _node$style$borderTop2 = _node$style.borderTopRightRadius,\n      borderTopRightRadius = _node$style$borderTop2 === void 0 ? 0 : _node$style$borderTop2,\n      _node$style$borderBot = _node$style.borderBottomLeftRadius,\n      borderBottomLeftRadius = _node$style$borderBot === void 0 ? 0 : _node$style$borderBot,\n      _node$style$borderBot2 = _node$style.borderBottomRightRadius,\n      borderBottomRightRadius = _node$style$borderBot2 === void 0 ? 0 : _node$style$borderBot2,\n      _node$style$borderTop3 = _node$style.borderTopColor,\n      borderTopColor = _node$style$borderTop3 === void 0 ? 'black' : _node$style$borderTop3,\n      _node$style$borderTop4 = _node$style.borderTopStyle,\n      borderTopStyle = _node$style$borderTop4 === void 0 ? 'solid' : _node$style$borderTop4,\n      _node$style$borderLef = _node$style.borderLeftColor,\n      borderLeftColor = _node$style$borderLef === void 0 ? 'black' : _node$style$borderLef,\n      _node$style$borderLef2 = _node$style.borderLeftStyle,\n      borderLeftStyle = _node$style$borderLef2 === void 0 ? 'solid' : _node$style$borderLef2,\n      _node$style$borderRig = _node$style.borderRightColor,\n      borderRightColor = _node$style$borderRig === void 0 ? 'black' : _node$style$borderRig,\n      _node$style$borderRig2 = _node$style.borderRightStyle,\n      borderRightStyle = _node$style$borderRig2 === void 0 ? 'solid' : _node$style$borderRig2,\n      _node$style$borderBot3 = _node$style.borderBottomColor,\n      borderBottomColor = _node$style$borderBot3 === void 0 ? 'black' : _node$style$borderBot3,\n      _node$style$borderBot4 = _node$style.borderBottomStyle,\n      borderBottomStyle = _node$style$borderBot4 === void 0 ? 'solid' : _node$style$borderBot4;\n  var style = {\n    borderTopColor: borderTopColor,\n    borderTopWidth: borderTopWidth,\n    borderTopStyle: borderTopStyle,\n    borderLeftColor: borderLeftColor,\n    borderLeftWidth: borderLeftWidth,\n    borderLeftStyle: borderLeftStyle,\n    borderRightColor: borderRightColor,\n    borderRightWidth: borderRightWidth,\n    borderRightStyle: borderRightStyle,\n    borderBottomColor: borderBottomColor,\n    borderBottomWidth: borderBottomWidth,\n    borderBottomStyle: borderBottomStyle,\n    borderTopLeftRadius: borderTopLeftRadius,\n    borderTopRightRadius: borderTopRightRadius,\n    borderBottomLeftRadius: borderBottomLeftRadius,\n    borderBottomRightRadius: borderBottomRightRadius\n  };\n  var rtr = Math.min(borderTopRightRadius, 0.5 * width, 0.5 * height);\n  var rtl = Math.min(borderTopLeftRadius, 0.5 * width, 0.5 * height);\n  var rbr = Math.min(borderBottomRightRadius, 0.5 * width, 0.5 * height);\n  var rbl = Math.min(borderBottomLeftRadius, 0.5 * width, 0.5 * height);\n  ctx.save();\n  ctx.strokeOpacity(opacity);\n\n  if (borderTopWidth) {\n    ctx.save();\n    clipBorderTop(ctx, node.box, style, rtr, rtl);\n    fillBorderTop(ctx, node.box, style, rtr, rtl);\n    ctx.restore();\n  }\n\n  if (borderRightWidth) {\n    ctx.save();\n    clipBorderRight(ctx, node.box, style, rtr, rbr);\n    fillBorderRight(ctx, node.box, style, rtr, rbr);\n    ctx.restore();\n  }\n\n  if (borderBottomWidth) {\n    ctx.save();\n    clipBorderBottom(ctx, node.box, style, rbl, rbr);\n    fillBorderBottom(ctx, node.box, style, rbl, rbr);\n    ctx.restore();\n  }\n\n  if (borderLeftWidth) {\n    ctx.save();\n    clipBorderLeft(ctx, node.box, style, rbl, rtl);\n    fillBorderLeft(ctx, node.box, style, rbl, rtl);\n    ctx.restore();\n  }\n\n  ctx.restore();\n};\n\nvar drawBackground = function drawBackground(ctx, node) {\n  var _node$style;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var color = parseColor(node.style.backgroundColor);\n  var nodeOpacity = isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.opacity) ? 1 : node.style.opacity;\n  var opacity = Math.min(color.opacity, nodeOpacity);\n  ctx.fillOpacity(opacity).fillColor(color.value).rect(left, top, width, height).fill();\n};\n\nvar renderBackground = function renderBackground(ctx, node) {\n  var _node$style2;\n\n  var hasBackground = !!node.box && !!((_node$style2 = node.style) !== null && _node$style2 !== void 0 && _node$style2.backgroundColor);\n\n  if (hasBackground) {\n    ctx.save();\n    clipNode(ctx, node);\n    drawBackground(ctx, node);\n    ctx.restore();\n  }\n};\n\nvar isSrcId = function isSrcId(value) {\n  return /^#.+/.test(value);\n};\n\nvar setLink = function setLink(ctx, node) {\n  var props = node.props || {};\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var src = props.src || props.href;\n\n  if (src) {\n    var isId = isSrcId(src);\n    var method = isId ? 'goTo' : 'link';\n    var value = isId ? src.slice(1) : src;\n    ctx[method](left, top, width, height, value);\n  }\n};\n\nvar setDestination = function setDestination(ctx, node) {\n  var _node$props;\n\n  if ((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.id) {\n    ctx.addNamedDestination(node.props.id, 'XYZ', null, node.box.top, null);\n  }\n};\n\nvar _renderFns;\n\nvar isRecursiveNode = function isRecursiveNode(node) {\n  return node.type !== P.Text && node.type !== P.Svg;\n};\n\nvar renderChildren = function renderChildren(ctx, node, options) {\n  ctx.save();\n\n  if (node.box) {\n    ctx.translate(node.box.left, node.box.top);\n  }\n\n  var children = node.children || [];\n\n  var renderChild = function renderChild(child) {\n    return renderNode(ctx, child, options);\n  };\n\n  children.forEach(renderChild);\n  ctx.restore();\n};\n\nvar renderFns = (_renderFns = {}, _renderFns[P.Text] = renderText, _renderFns[P.Note] = renderNote, _renderFns[P.Image] = renderImage, _renderFns[P.Canvas] = renderCanvas, _renderFns[P.Svg] = renderSvg, _renderFns[P.Link] = setLink, _renderFns);\n\nvar renderNode = function renderNode(ctx, node, options) {\n  var _node$style;\n\n  var overflowHidden = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.overflow) === 'hidden';\n  var shouldRenderChildren = isRecursiveNode(node);\n  if (node.type === P.Page) renderPage(ctx, node);\n  ctx.save();\n  if (overflowHidden) clipNode(ctx, node);\n  applyTransformations(ctx, node);\n  renderBackground(ctx, node);\n  renderBorders(ctx, node);\n  var renderFn = renderFns[node.type];\n  if (renderFn) renderFn(ctx, node, options);\n  if (shouldRenderChildren) renderChildren(ctx, node, options);\n  setDestination(ctx, node);\n  renderDebug(ctx, node);\n  ctx.restore();\n};\n\n/* eslint-disable no-param-reassign */\nvar setPDFMetadata = function setPDFMetadata(target) {\n  return function (key, value) {\n    if (value) target.info[key] = value;\n  };\n};\n/**\n * Set document instance metadata\n *\n * @param {Object} ctx document instance\n * @param {Object} doc document root\n */\n\n\nvar addMetadata = function addMetadata(ctx, doc) {\n  var setProp = setPDFMetadata(ctx);\n  var props = doc.props || {};\n  var title = props.title || null;\n  var author = props.author || null;\n  var subject = props.subject || null;\n  var keywords = props.keywords || null;\n  var creator = props.creator || 'react-pdf';\n  var producer = props.producer || 'react-pdf';\n  setProp('Title', title);\n  setProp('Author', author);\n  setProp('Subject', subject);\n  setProp('Keywords', keywords);\n  setProp('Creator', creator);\n  setProp('Producer', producer);\n};\n\n/* eslint-disable no-param-reassign */\nvar addNodeBookmark = function addNodeBookmark(ctx, node, pageNumber, registry) {\n  var _node$props;\n\n  var bookmark = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.bookmark;\n\n  if (bookmark) {\n    var title = bookmark.title,\n        parent = bookmark.parent,\n        expanded = bookmark.expanded,\n        zoom = bookmark.zoom,\n        fit = bookmark.fit;\n    var outline = registry[parent] || ctx.outline;\n    var top = bookmark.top || node.box.top;\n    var left = bookmark.left || node.box.left;\n    var instance = outline.addItem(title, {\n      pageNumber: pageNumber,\n      expanded: expanded,\n      top: top,\n      left: left,\n      zoom: zoom,\n      fit: fit\n    });\n    registry[bookmark.ref] = instance;\n  }\n\n  if (!node.children) return;\n  node.children.forEach(function (child) {\n    return addNodeBookmark(ctx, child, pageNumber, registry);\n  });\n};\n\nvar addBookmarks = function addBookmarks(ctx, root) {\n  var registry = {};\n  var pages = root.children || [];\n  pages.forEach(function (page, i) {\n    addNodeBookmark(ctx, page, i, registry);\n  });\n};\n\nvar render = function render(ctx, doc) {\n  var pages = doc.children || [];\n  var options = {\n    imageCache: new Map()\n  };\n  addMetadata(ctx, doc);\n  pages.forEach(function (page) {\n    return renderNode(ctx, page, options);\n  });\n  addBookmarks(ctx, doc);\n  ctx.end();\n  return ctx;\n};\n\nexport { render as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}